## run-all-benchmarks.pkg

# Compiled by:
#     src/app/benchmarks/benchmarks.lib

stipulate
    package bj  =  benchmark_junk;						# benchmark_junk		is from   src/app/benchmarks/benchmark-junk.pkg
herein

    package run_all_benchmarks {
	#
	fun run_all_benchmarks ()
	    =
	    {
		r =  ([]:  List( bj::Benchmark_Result ));

		# Linux times seem accurate to about 4ms
		# so I tweak these to run about    400ms each
		# to give us times accurate to roughly +-1%:
		#
		r =    tagged_int_loop::run 200  !  r;				# tagged_int_loop		is from   src/app/benchmarks/tagged-int-loop.pkg
		r =  one_word_int_loop::run 200  !  r;				# one_word_int_loop		is from   src/app/benchmarks/tagged-int-loop.pkg
		r =    tagged_int_loop::run 200  !  r;				# tagged_int_loop		is from   src/app/benchmarks/tagged-int-loop.pkg
		r =  one_word_int_loop::run 200  !  r;				# one_word_int_loop		is from   src/app/benchmarks/tagged-int-loop.pkg

		bj::summarize_all_benchmarks r;
	    };

										my _ =
	run_all_benchmarks ();

    };
end;
