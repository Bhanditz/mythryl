## make-fresh-imp-id.pkg

# Compiled by:
#     src/lib/std/standard.lib


stipulate
    include threadkit;						# threadkit			is from   src/lib/src/lib/thread-kit/src/core-thread-kit/threadkit.pkg
herein
    package make_fresh_imp_id {
	#
	stipulate
	    #
	    lock = make_full_maildrop ();

	    next_imp_id =  REF 1;

	herein
	    #
	    fun make_fresh_imp_id ()
		=
		{   take_from_maildrop lock;
		    #
		    id = *next_imp_id;
		    next_imp_id := id + 1;

		    id  then  put_in_maildrop (lock, ());
		};
	end;
    };
end;

## Original code by Jeff Prothero Copyright (c) 2010-2014,
## released per terms of SMLNJ-COPYRIGHT.
