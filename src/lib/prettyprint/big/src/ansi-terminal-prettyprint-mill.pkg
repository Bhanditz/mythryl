## ansi-terminal-prettyprint-mill.pkg

# Compiled by:
#     src/lib/prettyprint/big/src/out/prettyprint-devices.sublib

stipulate
    package fil =  file__premicrothread;						# file__premicrothread				is from   src/lib/std/src/posix/file--premicrothread.pkg
    package out =  ansi_terminal_prettyprint_output_stream;				# ansi_terminal_prettyprint_output_stream	is from   src/lib/prettyprint/big/src/out/ansi-terminal-prettyprint-output-stream.pkg
herein

    api Ansi_Terminal_Prettyprint_Mill {
	#
	package ss:  api {								# "ss" == "styled string"
	    include Traitful_Text							# Traitful_Text					is from   src/lib/prettyprint/big/src/traitful-text.api
		    where
			Texttraits == out::Texttraits;

	    styled_string:  (out::Texttraits, String) -> Traitful_Text;
	};

	include Prettyprint_Mill							# Prettyprint_Mill				is from   src/lib/prettyprint/big/src/prettyprint-mill.api
		where  Prettyprint_Output_Stream == out::Prettyprint_Output_Stream
		where  Texttraits                == out::Texttraits
		where  Traitful_Text             == ss::Traitful_Text;

	make_ansi_terminal_prettyprinter
	  :
	  { output_stream:	fil::Output_Stream
	  }
	  -> List( Prettyprinter_Args )
	  -> Prettyprint_Mill;
    };

    package  ansi_terminal_prettyprint_mill
    : (weak) Ansi_Terminal_Prettyprint_Mill
    {
	package ss									# ss == "styled string".
	    =
	    package {
		Texttraits = out::Texttraits;
		Traitful_Text = STYLED_STRING  (Texttraits, String);
		#	
		styled_string = STYLED_STRING;
		#	
		fun string     (STYLED_STRING (texttraits, string)) = string;
		fun texttraits (STYLED_STRING (texttraits, string)) = texttraits;
		fun size       (STYLED_STRING (texttraits, string)) = string::length string;
	    };

	package pp
	    =
	    prettyprint_mill_g (								# prettyprint_mill_g				is from   src/lib/prettyprint/big/src/prettyprint-mill-g.pkg
		package ss  = ss;
		package out = out;
	    );

	include pp;

	fun make_ansi_terminal_prettyprinter  arg  pp_args
	    =
	    make_prettyprinter  (out::make_ansi_terminal_output_stream  arg)  pp_args;
    };
end;

## COPYRIGHT (c) 2005 John Reppy (http://www.cs.uchicago.edu/~jhr)
## All rights reserved.
## Subsequent changes by Jeff Prothero Copyright (c) 2010-2013,
## released per terms of SMLNJ-COPYRIGHT.
