<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Pre-Compile Code</TITLE>
</HEAD>
<BODY >
<A HREF="my-Experimental_Object_Oriented_Programming_Support.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-The_Full_Monte.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Int_Overflow_Checking.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc111">5.4.26</A>  Pre-Compile Code</H3><P>
<A NAME="section:tut:full-monte:pre-compile-code"></A></P><P>The Mythryl compiler supports a simple hack to allow executing short 
fragments of code at compiletime, just before a file is compiled: </P><PRE CLASS="verbatim">    #DO set_control "compiler::verbose_compile_log" "TRUE";
</PRE><P>As illustrated, the main intended use for this facility is to set 
compiler switches. (Setting the illustrated switch at the top of 
a <TT>foo.pkg</TT> file will result in verbose compile logging into 
<TT>foo.pkg.compile.log</TT>.) A full list of available switches and their 
current settings may be obtained by executing <TT>show_controls()</TT> 
at the interactive prompt:</P><PRE CLASS="verbatim">    linux% my

    Mythryl 110.58.4.2.3 built Tue Sep 13 00:48:57 2011
    Do   help();   for help.

    eval:  show_controls();
      Compiler controls:
       tracing/debugging/profiling:
             tdp::instrument = FALSE
       makelib:
             makelib::verbose = TRUE
             makelib::debug = FALSE
       ...

    eval:  
</PRE><P>More than one <TT>#DO</TT> statement may be included in a file; the 
compiler will evaluate them in order of appearance.</P><P>Very few of these are of current use, or even documented; two of the 
most useful applications of <TT>#DO</TT> are enabling integer overflow 
trapping when desired (next section) and 
disabling vector and matrix index bounds-checking when not desired 
(section after that).</P><P>The current implementation of <TT>#DO</TT> is something of a kludge; in 
particular the lexer simply scans until it reaches a semicolon, which 
means the code to be executed cannot contain a semicolon internally, 
even in a quoted string (say). Currently it can also not contain a newline.
For the intended purpose this is not a problem; if it becomes a problem,
the lexer code can be upgraded. </P><P>The <TT>#DO</TT> statement syntax is supported only at top level; it 
will not be recognized inside of a package or such. Also, no matter 
where in the file a <TT>#DO</TT> statement is located, it will always 
be evaluated before compiling any code in the file. To avoid confusion, 
it is best to place such statements at the top of the source file, 
before the main api or package code to be compiled.</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Experimental_Object_Oriented_Programming_Support.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-The_Full_Monte.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Int_Overflow_Checking.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
