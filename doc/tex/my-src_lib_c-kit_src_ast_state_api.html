<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>src/lib/c-kit/src/ast/state.api</TITLE>
</HEAD>
<BODY >
<A HREF="my-src_lib_c-kit_src_ast_sizes_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_c-kit_src_ast_symbol_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc1140">15.3.64</A>  src/lib/c-kit/src/ast/state.api</H3><P>
<A NAME="src/lib/c-kit/src/ast/state.api"></A>
<CODE>##&nbsp;state.api</CODE><BR><BR>
<CODE>#&nbsp;Compiled&nbsp;by:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_c-kit_src_ast_ast_sublib.html#src/lib/c-kit/src/ast/ast.sublib"><TT>src/lib/c-kit/src/ast/ast.sublib</TT></A><BR><BR><CODE>#&nbsp;--------------------------------------------------------------------</CODE><BR>
<CODE>#&nbsp;State:&nbsp;a&nbsp;local&nbsp;package&nbsp;for&nbsp;operating&nbsp;on&nbsp;context&nbsp;state&nbsp;during&nbsp;the&nbsp;build-ast</CODE><BR>
<CODE>#&nbsp;(elaboration)&nbsp;phase.</CODE><BR>
<CODE>#&nbsp;State&nbsp;includes:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;global&nbsp;symbol&nbsp;table&nbsp;envContext.global_dictionary</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;stack&nbsp;of&nbsp;local&nbsp;symbol&nbsp;tables&nbsp;&nbsp;envContext.local_dictionary</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;stack&nbsp;of&nbsp;locations&nbsp;for&nbsp;error&nbsp;reporting&nbsp;locContext.locStack</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;table&nbsp;of&nbsp;named&nbsp;type&nbsp;identifiers&nbsp;(uidTables::ttab)</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;table&nbsp;of&nbsp;adornment&nbsp;types&nbsp;(uidTables::atab)&nbsp;giving&nbsp;the&nbsp;type&nbsp;for&nbsp;each&nbsp;expression</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;table&nbsp;of&nbsp;adornment&nbsp;types&nbsp;(uidTables::implicits)</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;giving&nbsp;implicit&nbsp;coercions&nbsp;for&nbsp;each&nbsp;expression&nbsp;(if&nbsp;any)</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;list&nbsp;of&nbsp;type&nbsp;identifiers&nbsp;(defined&nbsp;in&nbsp;the&nbsp;current&nbsp;"context")</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(tidsContext::newTids)</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;-&nbsp;a&nbsp;stack&nbsp;of&nbsp;tables&nbsp;of&nbsp;switch&nbsp;statement&nbsp;labels&nbsp;(switchContext::switchLabels)</CODE><BR>
<CODE>#&nbsp;--------------------------------------------------------------------</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><BR>
<CODE>api&nbsp;State&nbsp;{</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Finite&nbsp;map&nbsp;packages:</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;st:&nbsp;&nbsp;Map&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Map&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_map_api.html#src/lib/src/map.api"><TT>src/lib/src/map.api</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key::Key&nbsp;==&nbsp;symbol::Symbol;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;it:&nbsp;&nbsp;Map&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Map&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_map_api.html#src/lib/src/map.api"><TT>src/lib/src/map.api</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key::Key&nbsp;==&nbsp;large_int::Int;</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Dictionaries&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Symtab&nbsp;=&nbsp;st::Map(&nbsp;namings::Sym_Naming&nbsp;);</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Dictionary&nbsp;=&nbsp;List(&nbsp;Symtab&nbsp;);&nbsp;#&nbsp;&nbsp;local&nbsp;dictionary&nbsp;stack&nbsp;</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;global&nbsp;context&nbsp;types&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Uid_Tables&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;ttab:&nbsp;&nbsp;tables::Tidtab,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;type&nbsp;name&nbsp;table&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;atab:&nbsp;&nbsp;tables::Aidtab,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Adornment&nbsp;table&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;implicits:&nbsp;&nbsp;tables::Aidtab&nbsp;};&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;"optional"&nbsp;adornment&nbsp;table&nbsp;--&nbsp;for&nbsp;special&nbsp;casts&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Env_Context&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;global_dictionary:&nbsp;&nbsp;Ref(&nbsp;Symtab&nbsp;),&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;the&nbsp;global&nbsp;symbol&nbsp;table&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_dictionary:&nbsp;&nbsp;Ref(&nbsp;Dictionary&nbsp;)&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;the&nbsp;local&nbsp;dictionary&nbsp;stack&nbsp;</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;local&nbsp;context&nbsp;types:&nbsp;&nbsp;temporary&nbsp;information&nbsp;used&nbsp;during&nbsp;elaboration&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;tidsContext:&nbsp;sequence&nbsp;of&nbsp;tids&nbsp;of&nbsp;types&nbsp;created&nbsp;while&nbsp;processing&nbsp;a&nbsp;phrase&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Tids_Context&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;new_tids:&nbsp;&nbsp;Ref(&nbsp;&nbsp;List(&nbsp;&nbsp;tid::Uid&nbsp;)&nbsp;)&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;tmpVariables:&nbsp;sequence&nbsp;of&nbsp;(pid,&nbsp;type)&nbsp;pairs&nbsp;created&nbsp;while&nbsp;processing&nbsp;a&nbsp;phrase&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;used&nbsp;when&nbsp;inserting&nbsp;explicit&nbsp;coercions&nbsp;in&nbsp;the&nbsp;case&nbsp;of&nbsp;++,&nbsp;--,&nbsp;+=&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tmp_Variables&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;new_variables:&nbsp;&nbsp;Ref(&nbsp;&nbsp;List(&nbsp;&nbsp;raw_syntax::Id&nbsp;)&nbsp;)&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;for&nbsp;use&nbsp;in&nbsp;D&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Type_Context&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;type_cxts:&nbsp;&nbsp;&nbsp;Ref(&nbsp;List(&nbsp;Null_Or(&nbsp;raw_syntax::Ctype&nbsp;)&nbsp;)&nbsp;)&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;funContext:&nbsp;information&nbsp;for&nbsp;the&nbsp;current&nbsp;function&nbsp;def&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fun_Context&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;label_tab:&nbsp;&nbsp;&nbsp;Ref(&nbsp;st::Map(&nbsp;(raw_syntax::Label,&nbsp;Bool))&nbsp;),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gotos:&nbsp;&nbsp;Ref(&nbsp;&nbsp;List(&nbsp;&nbsp;symbol::Symbol&nbsp;)&nbsp;),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return_type:&nbsp;&nbsp;Ref(&nbsp;&nbsp;Null_Or(&nbsp;&nbsp;raw_syntax::Ctype&nbsp;)&nbsp;)&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;table&nbsp;for&nbsp;collecting&nbsp;switch&nbsp;labels&nbsp;while&nbsp;processing&nbsp;switch&nbsp;statements&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Switch_Context&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;switch_labels:&nbsp;&nbsp;&nbsp;Ref(&nbsp;List&nbsp;{&nbsp;switch_tab:&nbsp;&nbsp;it::Map(&nbsp;Void&nbsp;),&nbsp;default:&nbsp;&nbsp;Bool&nbsp;}&nbsp;)&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Loc_Context&nbsp;=&nbsp;#&nbsp;&nbsp;location&nbsp;context&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;loc_stack:&nbsp;&nbsp;Ref(&nbsp;&nbsp;List(&nbsp;&nbsp;line_number_db::Location&nbsp;)&nbsp;)&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;global&nbsp;state&nbsp;components&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Global_State&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;uid_tables:&nbsp;&nbsp;Uid_Tables,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env_context:&nbsp;&nbsp;Env_Context,&nbsp;&nbsp;#&nbsp;&nbsp;Contains&nbsp;some&nbsp;local&nbsp;working&nbsp;state&nbsp;in&nbsp;local_dictionary&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error_state:&nbsp;&nbsp;error::Error_State&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;local,&nbsp;"working",&nbsp;state&nbsp;components,&nbsp;holding&nbsp;temporary&nbsp;information&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Local_State&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;loc_context:&nbsp;Loc_Context,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tids_context:&nbsp;&nbsp;Tids_Context,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp_variables:&nbsp;&nbsp;Tmp_Variables,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun_context:&nbsp;Fun_Context,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch_context:&nbsp;Switch_Context,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type_context:&nbsp;Type_Context&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;initial&nbsp;information&nbsp;for&nbsp;calling&nbsp;makeRawSyntaxTree&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;State_Info</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;STATE&nbsp;&nbsp;(Uid_Tables,&nbsp;Symtab)&nbsp;&nbsp;#&nbsp;&nbsp;state&nbsp;carried&nbsp;over&nbsp;from&nbsp;previous&nbsp;translation&nbsp;unit&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|&nbsp;INITIAL;&nbsp;&nbsp;</CODE><CODE>#&nbsp;&nbsp;no&nbsp;previous&nbsp;state&nbsp;</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;#&nbsp;&nbsp;packages&nbsp;of&nbsp;functions&nbsp;to&nbsp;manipulate&nbsp;state&nbsp;implicitly&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;State_Funs&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;global_state:&nbsp;&nbsp;Global_State,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local_state:&nbsp;&nbsp;Local_State,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;the&nbsp;state&nbsp;records,&nbsp;included&nbsp;in&nbsp;case&nbsp;direct&nbsp;access&nbsp;to&nbsp;the</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;state&nbsp;is&nbsp;required&nbsp;(probably&nbsp;shouldn't&nbsp;be)&nbsp;*)</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loc_funs&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;push_loc:&nbsp;&nbsp;line_number_db::Location&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;push&nbsp;location&nbsp;onto&nbsp;location&nbsp;stack&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop_loc:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;pop&nbsp;location&nbsp;stack&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_loc:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;line_number_db::Location,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;get&nbsp;top&nbsp;location&nbsp;from&nbsp;location&nbsp;stack&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error:&nbsp;&nbsp;String&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;report&nbsp;an&nbsp;error&nbsp;and&nbsp;its&nbsp;location&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warn:&nbsp;&nbsp;String&nbsp;-&gt;&nbsp;Void&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;(if&nbsp;warnings&nbsp;are&nbsp;on)&nbsp;report&nbsp;a&nbsp;warning&nbsp;and&nbsp;its&nbsp;location&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tids_funs&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;push_tids:&nbsp;&nbsp;tid::Uid&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;records&nbsp;tids&nbsp;from&nbsp;new&nbsp;structs/unions/typdefs</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;introduced&nbsp;in&nbsp;declarations,&nbsp;casts,&nbsp;etc.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reset_tids:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;List(&nbsp;tid::Uid&nbsp;)&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;returns&nbsp;list&nbsp;of&nbsp;recently&nbsp;generated&nbsp;tids&nbsp;(since&nbsp;last&nbsp;resetTids&nbsp;call)&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp_vars_funs&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;push_tmp_vars:&nbsp;&nbsp;raw_syntax::Id&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;records&nbsp;pids&nbsp;for&nbsp;temporary&nbsp;introduced&nbsp;in&nbsp;decompilation&nbsp;of&nbsp;++,&nbsp;--,&nbsp;+=,&nbsp;and&nbsp;their&nbsp;friends&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reset_tmp_vars:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;List(&nbsp;raw_syntax::Id&nbsp;)&nbsp;},&nbsp;#&nbsp;&nbsp;returns&nbsp;list&nbsp;of&nbsp;recently&nbsp;generated&nbsp;pids&nbsp;(since&nbsp;last&nbsp;resetTmpVars&nbsp;call)&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;env_funs&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;top_level:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Bool,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Are&nbsp;we&nbsp;at&nbsp;top&nbsp;level?&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push_local_dictionary:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;push&nbsp;a&nbsp;fresh&nbsp;symbol&nbsp;table&nbsp;onto&nbsp;the&nbsp;stack&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop_local_dictionary:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;pop&nbsp;symbol&nbsp;table&nbsp;stack&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_sym:&nbsp;&nbsp;symbol::Symbol&nbsp;-&gt;&nbsp;Null_Or(&nbsp;namings::Sym_Naming&nbsp;),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;lookup&nbsp;type&nbsp;of&nbsp;a&nbsp;symbol&nbsp;in&nbsp;symbol&nbsp;table&nbsp;stack&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bind_sym:&nbsp;&nbsp;(symbol::Symbol,&nbsp;namings::Sym_Naming)&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;insert&nbsp;(i.e.&nbsp;bind)&nbsp;a&nbsp;symbol&nbsp;in&nbsp;the&nbsp;top&nbsp;(most&nbsp;local)&nbsp;symbol&nbsp;table&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_sym__global:&nbsp;&nbsp;symbol::Symbol&nbsp;-&gt;&nbsp;Null_Or(&nbsp;namings::Sym_Naming&nbsp;),&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;lookup&nbsp;type&nbsp;of&nbsp;a&nbsp;symbol&nbsp;in&nbsp;the&nbsp;global&nbsp;symbol&nbsp;table&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bind_sym__global:&nbsp;&nbsp;(symbol::Symbol,&nbsp;namings::Sym_Naming)&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;insert&nbsp;(i.e.&nbsp;bind)&nbsp;a&nbsp;symbol&nbsp;in&nbsp;the&nbsp;global&nbsp;symbol&nbsp;table&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_local_scope:&nbsp;&nbsp;symbol::Symbol&nbsp;-&gt;&nbsp;Null_Or(&nbsp;namings::Sym_Naming&nbsp;),&nbsp;&nbsp;#&nbsp;&nbsp;get&nbsp;for&nbsp;a&nbsp;naming&nbsp;in&nbsp;the&nbsp;most&nbsp;local&nbsp;symbol&nbsp;table&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_global_dictionary:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Symtab&nbsp;},&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;return&nbsp;the&nbsp;global&nbsp;symbol&nbsp;table&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uid_tab_funs&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;bind_aid:&nbsp;&nbsp;raw_syntax::Ctype&nbsp;-&gt;&nbsp;aid::Uid,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;generate&nbsp;a&nbsp;new&nbsp;adornment&nbsp;identifier&nbsp;and&nbsp;bind&nbsp;it&nbsp;to&nbsp;the&nbsp;type&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_aid:&nbsp;&nbsp;aid::Uid&nbsp;-&gt;&nbsp;Null_Or(&nbsp;raw_syntax::Ctype&nbsp;),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;lookup&nbsp;adornment&nbsp;identifier&nbsp;in&nbsp;state&nbsp;aidtab&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bind_tid:&nbsp;&nbsp;(tid::Uid,&nbsp;namings::Tid_Naming)&nbsp;-&gt;&nbsp;Void,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;insert&nbsp;a&nbsp;type&nbsp;identifier&nbsp;into&nbsp;the&nbsp;type&nbsp;symbol&nbsp;table&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_tid:&nbsp;&nbsp;tid::Uid&nbsp;-&gt;&nbsp;Null_Or(&nbsp;namings::Tid_Naming&nbsp;)&nbsp;},</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;lookup&nbsp;a&nbsp;type&nbsp;identifier&nbsp;in&nbsp;the&nbsp;type&nbsp;symbol&nbsp;table&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun_funs:&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;manipulate&nbsp;current&nbsp;function&nbsp;context&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;new_function:&nbsp;&nbsp;raw_syntax::Ctype&nbsp;-&gt;&nbsp;Void,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;enter&nbsp;a&nbsp;new&nbsp;function&nbsp;context&nbsp;with&nbsp;the&nbsp;given&nbsp;return&nbsp;type&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_return_type:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Null_Or(&nbsp;raw_syntax::Ctype&nbsp;),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;get&nbsp;the&nbsp;return&nbsp;type&nbsp;of&nbsp;the&nbsp;current&nbsp;function&nbsp;context&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_labels:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;&nbsp;Null_Or(&nbsp;(symbol::Symbol,&nbsp;line_number_db::Location)&nbsp;),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;verify&nbsp;that&nbsp;all&nbsp;goto&nbsp;targets&nbsp;are&nbsp;defined&nbsp;as&nbsp;labels&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_label:&nbsp;&nbsp;(symbol::Symbol,&nbsp;line_number_db::Location)&nbsp;-&gt;&nbsp;raw_syntax::Label,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Define&nbsp;a&nbsp;label,&nbsp;returning&nbsp;an&nbsp;error&nbsp;flag&nbsp;if&nbsp;multiple&nbsp;defs&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_goto:&nbsp;&nbsp;(symbol::Symbol,&nbsp;line_number_db::Location)&nbsp;-&gt;&nbsp;raw_syntax::Label&nbsp;},</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;record&nbsp;a&nbsp;label&nbsp;as&nbsp;a&nbsp;goto&nbsp;target&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch_funs:&nbsp;&nbsp;#&nbsp;&nbsp;manipulate&nbsp;current&nbsp;switch&nbsp;context&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;push_switch_labels:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Void,&nbsp;#&nbsp;&nbsp;enter&nbsp;a&nbsp;switch&nbsp;statement&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pop_switch_labels:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;#&nbsp;&nbsp;leave&nbsp;a&nbsp;switch&nbsp;statement&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_switch_label:&nbsp;&nbsp;large_int::Int&nbsp;-&gt;&nbsp;Null_Or(&nbsp;String&nbsp;),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;record&nbsp;a&nbsp;new&nbsp;switch&nbsp;label;&nbsp;returns&nbsp;THE&nbsp;errormsg&nbsp;if&nbsp;duplicate</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;or&nbsp;not&nbsp;within&nbsp;a&nbsp;switch</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add_default_label:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Null_Or(&nbsp;String&nbsp;)&nbsp;}&nbsp;};</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;record&nbsp;a&nbsp;default&nbsp;label;&nbsp;returns&nbsp;THE&nbsp;errormsg&nbsp;if&nbsp;multiple&nbsp;defaults,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;or&nbsp;not&nbsp;within&nbsp;a&nbsp;switch</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;state&nbsp;initialization&nbsp;functions&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_global:&nbsp;&nbsp;((State_Info,&nbsp;error::Error_State))&nbsp;-&gt;&nbsp;Global_State;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_local:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Local_State;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state_funs:&nbsp;&nbsp;(Global_State,&nbsp;Local_State)&nbsp;-&gt;&nbsp;State_Funs;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Returns&nbsp;a&nbsp;collection&nbsp;of&nbsp;state&nbsp;functions&nbsp;specialized&nbsp;to</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;operate&nbsp;on&nbsp;the&nbsp;state&nbsp;passed&nbsp;as&nbsp;argument</CODE><BR><BR>
<CODE>};&nbsp;#&nbsp;&nbsp;sigature&nbsp;STATE&nbsp;</CODE><BR><BR><BR>
<CODE>##&nbsp;Copyright&nbsp;(c)&nbsp;1998&nbsp;by&nbsp;Lucent&nbsp;Technologies&nbsp;</CODE><BR>
<CODE>##&nbsp;Subsequent&nbsp;changes&nbsp;by&nbsp;Jeff&nbsp;Prothero&nbsp;Copyright&nbsp;(c)&nbsp;2010-2015,</CODE><BR>
<CODE>##&nbsp;released&nbsp;per&nbsp;terms&nbsp;of&nbsp;SMLNJ-COPYRIGHT.</CODE><BR>
</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-src_lib_c-kit_src_ast_sizes_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_c-kit_src_ast_symbol_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
