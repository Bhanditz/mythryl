<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>src/lib/src/printf-combinator.api</TITLE>
</HEAD>
<BODY >
<A HREF="my-src_lib_src_path-utilities_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_src_priority-queue_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc1497">15.3.421</A>  src/lib/src/printf-combinator.api</H3><P>
<A NAME="src/lib/src/printf-combinator.api"></A>
<CODE>##&nbsp;printf-combinator.api</CODE><BR><BR>
<CODE>#&nbsp;Compiled&nbsp;by:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_std_standard_lib.html#src/lib/std/standard.lib"><TT>src/lib/std/standard.lib</TT></A><BR><BR><BR><BR><BR><CODE>#&nbsp;&nbsp;&nbsp;Well-typed&nbsp;"printf"&nbsp;for&nbsp;Mythryl,&nbsp;aka&nbsp;"Unparsing&nbsp;Combinators".</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;code&nbsp;was&nbsp;written&nbsp;by&nbsp;Matthias&nbsp;Blume&nbsp;(2002).&nbsp;&nbsp;Inspiration</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obtained&nbsp;from&nbsp;Olivier&nbsp;Danvy's&nbsp;"Functional&nbsp;Prettyprinting"&nbsp;work.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Description:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;idea&nbsp;is&nbsp;to&nbsp;use&nbsp;combinators&nbsp;to&nbsp;construct&nbsp;something&nbsp;akin&nbsp;to</CODE><BR>
<CODE>#&nbsp;the&nbsp;format&nbsp;string&nbsp;of&nbsp;C's&nbsp;printf&nbsp;function.&nbsp;&nbsp;The&nbsp;difference&nbsp;is,&nbsp;however,</CODE><BR>
<CODE>#&nbsp;that&nbsp;our&nbsp;formats&nbsp;aren't&nbsp;strings.&nbsp;&nbsp;Instead,&nbsp;format&nbsp;(fragments)&nbsp;have</CODE><BR>
<CODE>#&nbsp;meaningful&nbsp;types,&nbsp;and&nbsp;passing&nbsp;them&nbsp;to&nbsp;function&nbsp;"format"&nbsp;results</CODE><BR>
<CODE>#&nbsp;in&nbsp;a&nbsp;curried&nbsp;function&nbsp;whose&nbsp;arguments&nbsp;have&nbsp;precisely&nbsp;the&nbsp;types&nbsp;that</CODE><BR>
<CODE>#&nbsp;correspond&nbsp;to&nbsp;argument-consuming&nbsp;parts&nbsp;of&nbsp;the&nbsp;format.&nbsp;&nbsp;(Such</CODE><BR>
<CODE>#&nbsp;argument-consuming&nbsp;parts&nbsp;are&nbsp;similar&nbsp;to&nbsp;the&nbsp;%-specifications&nbsp;of&nbsp;printf.)</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Here&nbsp;is&nbsp;how&nbsp;the&nbsp;typing&nbsp;works:&nbsp;There&nbsp;is&nbsp;an&nbsp;underlying&nbsp;notion&nbsp;of</CODE><BR>
<CODE>#&nbsp;"abstract&nbsp;formats"&nbsp;of&nbsp;type&nbsp;Format(X).&nbsp;&nbsp;However,&nbsp;the&nbsp;user&nbsp;operates</CODE><BR>
<CODE>#&nbsp;at&nbsp;the&nbsp;level&nbsp;of&nbsp;"format&nbsp;fragments"&nbsp;which&nbsp;have&nbsp;type</CODE><BR>
<CODE>#&nbsp;Fragment(X,&nbsp;Y)&nbsp;and&nbsp;are&nbsp;typically&nbsp;typeagnostic&nbsp;in&nbsp;X&nbsp;(where&nbsp;Y&nbsp;is</CODE><BR>
<CODE>#&nbsp;macro&nbsp;expanded&nbsp;to&nbsp;some&nbsp;type&nbsp;containing&nbsp;X).&nbsp;&nbsp;Fragments&nbsp;are</CODE><BR>
<CODE>#&nbsp;functions&nbsp;from&nbsp;formats&nbsp;to&nbsp;formats&nbsp;and&nbsp;can&nbsp;be&nbsp;composed&nbsp;freely&nbsp;using</CODE><BR>
<CODE>#&nbsp;the&nbsp;function&nbsp;composition&nbsp;operator&nbsp;'o'.&nbsp;&nbsp;This&nbsp;form&nbsp;of&nbsp;format</CODE><BR>
<CODE>#&nbsp;composition&nbsp;translates&nbsp;to&nbsp;a&nbsp;corresponding&nbsp;concatenation&nbsp;of&nbsp;the</CODE><BR>
<CODE>#&nbsp;resulting&nbsp;output.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Fragments&nbsp;are&nbsp;composed&nbsp;from&nbsp;two&nbsp;kinds&nbsp;of&nbsp;primitve&nbsp;fragments&nbsp;called</CODE><BR>
<CODE>#&nbsp;"elements"&nbsp;and&nbsp;"glue",&nbsp;respectively.&nbsp;&nbsp;An&nbsp;"element"&nbsp;is&nbsp;a&nbsp;fragment&nbsp;that</CODE><BR>
<CODE>#&nbsp;consumes&nbsp;some&nbsp;argument&nbsp;(which&nbsp;thanks&nbsp;to&nbsp;the&nbsp;typing&nbsp;magic&nbsp;appears&nbsp;as&nbsp;a</CODE><BR>
<CODE>#&nbsp;curried&nbsp;argument&nbsp;when&nbsp;the&nbsp;format&nbsp;gets&nbsp;executed).&nbsp;&nbsp;As&nbsp;"glue"&nbsp;we&nbsp;refer</CODE><BR>
<CODE>#&nbsp;to&nbsp;fragments&nbsp;that&nbsp;do&nbsp;not&nbsp;consume&nbsp;arguments&nbsp;but&nbsp;merely&nbsp;insert&nbsp;fixed</CODE><BR>
<CODE>#&nbsp;text&nbsp;(fixed&nbsp;at&nbsp;format&nbsp;construction&nbsp;time)&nbsp;into&nbsp;the&nbsp;output.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;There&nbsp;are&nbsp;also&nbsp;adjustment&nbsp;operations&nbsp;that&nbsp;pad,&nbsp;trim,&nbsp;or&nbsp;fit&nbsp;the&nbsp;output</CODE><BR>
<CODE>#&nbsp;of&nbsp;entire&nbsp;fragments&nbsp;(primitive&nbsp;or&nbsp;not)&nbsp;to&nbsp;a&nbsp;given&nbsp;size.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;A&nbsp;number&nbsp;of&nbsp;elements&nbsp;and&nbsp;some&nbsp;glue&nbsp;have&nbsp;been&nbsp;predefined.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Here&nbsp;are&nbsp;examples&nbsp;on&nbsp;how&nbsp;to&nbsp;use&nbsp;this&nbsp;facility:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;include&nbsp;package&nbsp;&nbsp;&nbsp;printf_combinator;</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;nothing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;""</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;fn:&nbsp;Int&nbsp;-&gt;&nbsp;String</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;int&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"1234"</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(text&nbsp;"The&nbsp;square&nbsp;of&nbsp;"&nbsp;o&nbsp;int&nbsp;o&nbsp;text&nbsp;"&nbsp;is&nbsp;"&nbsp;o&nbsp;int&nbsp;o&nbsp;text&nbsp;".")</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;fn:&nbsp;int&nbsp;-&gt;&nbsp;int&nbsp;-&gt;&nbsp;String</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(text&nbsp;"The&nbsp;square&nbsp;of&nbsp;"&nbsp;o&nbsp;int&nbsp;o&nbsp;t"&nbsp;is&nbsp;"&nbsp;o&nbsp;int&nbsp;o&nbsp;t".")&nbsp;2&nbsp;4</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"The&nbsp;square&nbsp;of&nbsp;2&nbsp;is&nbsp;4."</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(int&nbsp;o&nbsp;bool&nbsp;o&nbsp;char)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;fn:&nbsp;&nbsp;Int&nbsp;-&gt;&nbsp;Bool&nbsp;-&gt;&nbsp;char&nbsp;-&gt;&nbsp;String</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(int&nbsp;o&nbsp;bool&nbsp;o&nbsp;char)&nbsp;1&nbsp;TRUE&nbsp;'x'</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"1truex"</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(glue&nbsp;string&nbsp;"glue&nbsp;vs.&nbsp;"&nbsp;o&nbsp;string&nbsp;o&nbsp;glue&nbsp;int&nbsp;42&nbsp;o&nbsp;sp&nbsp;5&nbsp;o&nbsp;int)</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ordinary&nbsp;text&nbsp;"&nbsp;17</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"glue&nbsp;vs.&nbsp;ordinary&nbsp;text&nbsp;42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;17"&nbsp;</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Fragments&nbsp;can&nbsp;be&nbsp;padded,&nbsp;trimmed,&nbsp;or&nbsp;fitted&nbsp;to&nbsp;generate&nbsp;text&nbsp;pieces&nbsp;of&nbsp;</CODE><BR>
<CODE>#&nbsp;specified&nbsp;sizes.&nbsp;&nbsp;Padding/trimming/fitting&nbsp;may&nbsp;be&nbsp;nested.</CODE><BR>
<CODE>#&nbsp;The&nbsp;operations&nbsp;are&nbsp;parameterized&nbsp;by&nbsp;a&nbsp;place&nbsp;(left,&nbsp;center,&nbsp;right)&nbsp;and</CODE><BR>
<CODE>#&nbsp;a&nbsp;width.&nbsp;Padding&nbsp;never&nbsp;shrinks&nbsp;strings,&nbsp;trimming&nbsp;never&nbsp;extends</CODE><BR>
<CODE>#&nbsp;strings,&nbsp;and&nbsp;fitting&nbsp;is&nbsp;done&nbsp;as&nbsp;necessary&nbsp;by&nbsp;either&nbsp;padding&nbsp;or&nbsp;trimming.</CODE><BR>
<CODE>#&nbsp;Examples:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(pad&nbsp;left&nbsp;6&nbsp;int)&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"&nbsp;&nbsp;1234"</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(pad&nbsp;center&nbsp;6&nbsp;int)&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"&nbsp;1234&nbsp;"</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(pad&nbsp;right&nbsp;6&nbsp;int)&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"1234&nbsp;&nbsp;"</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(trim&nbsp;left&nbsp;2&nbsp;int)&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"34"</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(trim&nbsp;center&nbsp;2&nbsp;int)&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"23"</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(trim&nbsp;right&nbsp;2&nbsp;int)&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"12"</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(fit&nbsp;left&nbsp;3&nbsp;int)&nbsp;12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"&nbsp;12"</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(fit&nbsp;left&nbsp;3&nbsp;int)&nbsp;123&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"123"</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(fit&nbsp;left&nbsp;3&nbsp;int)&nbsp;1234&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"234"</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Nesting:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;format&nbsp;(pad&nbsp;right&nbsp;20&nbsp;(int&nbsp;o&nbsp;pad&nbsp;left&nbsp;10&nbsp;float)&nbsp;o&nbsp;text&nbsp;"x")&nbsp;12&nbsp;22.3</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&gt;&nbsp;"12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;22.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x"</CODE><BR><BR>
<CODE>api&nbsp;Printf_Combinator&nbsp;{</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;We&nbsp;reveal&nbsp;"fragments"&nbsp;to&nbsp;be&nbsp;functions&nbsp;from&nbsp;abstract&nbsp;formats</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;to&nbsp;abstract&nbsp;formats.&nbsp;&nbsp;This&nbsp;is&nbsp;to&nbsp;make&nbsp;sure&nbsp;we&nbsp;can&nbsp;use&nbsp;function</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;composition&nbsp;on&nbsp;them.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Format(X);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Fragment&nbsp;(X,&nbsp;Y)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Format(X)&nbsp;-&gt;&nbsp;Format(Y);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Two&nbsp;primitive&nbsp;kinds&nbsp;of&nbsp;fragments:&nbsp;&nbsp;Glue&nbsp;inserts&nbsp;some&nbsp;text</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;into&nbsp;the&nbsp;output&nbsp;without&nbsp;consuming&nbsp;an&nbsp;argument.&nbsp;&nbsp;Elements</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;insert&nbsp;text&nbsp;corresponding&nbsp;to&nbsp;some&nbsp;(curried)&nbsp;argument&nbsp;into</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;the&nbsp;output:</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Glue(X)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;Fragment&nbsp;(X,&nbsp;X);&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Element(X,&nbsp;T)&nbsp;=&nbsp;Fragment&nbsp;(X,&nbsp;T&nbsp;-&gt;&nbsp;X);&nbsp;</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Format&nbsp;execution</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;1.&nbsp;Simple&nbsp;version,&nbsp;produce&nbsp;final&nbsp;result&nbsp;as&nbsp;a&nbsp;string:&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;format:&nbsp;&nbsp;&nbsp;Fragment&nbsp;(String,&nbsp;X)&nbsp;-&gt;&nbsp;X;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;2.&nbsp;Complex&nbsp;version,&nbsp;take&nbsp;a&nbsp;receiver&nbsp;function&nbsp;that&nbsp;will</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;invoked&nbsp;with&nbsp;the&nbsp;final&nbsp;result.&nbsp;&nbsp;The&nbsp;result&nbsp;is</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;still&nbsp;in&nbsp;non-concatenated&nbsp;form&nbsp;at&nbsp;this&nbsp;time.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Internally,&nbsp;the&nbsp;combinators&nbsp;avoid&nbsp;string&nbsp;concatenation</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;long&nbsp;as&nbsp;there&nbsp;is&nbsp;no&nbsp;padding/trimming/fitting&nbsp;going&nbsp;on.)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;format'&nbsp;:&nbsp;(List(&nbsp;String&nbsp;)&nbsp;-&gt;&nbsp;Y)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fragment(&nbsp;Y,&nbsp;X&nbsp;)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;X;</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Make&nbsp;a&nbsp;type-specific&nbsp;element&nbsp;given&nbsp;a</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;to_string&nbsp;function&nbsp;for&nbsp;this&nbsp;type:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;using:&nbsp;&nbsp;(T&nbsp;-&gt;&nbsp;String)&nbsp;-&gt;&nbsp;Element&nbsp;(X,&nbsp;T);</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Macro&nbsp;expand&nbsp;'using'&nbsp;for&nbsp;a&nbsp;few&nbsp;types...&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;int:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element(&nbsp;X,&nbsp;Int&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;using&nbsp;int::to_string&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;float:&nbsp;&nbsp;&nbsp;&nbsp;Element(&nbsp;X,&nbsp;Float&nbsp;);&nbsp;&nbsp;#&nbsp;&nbsp;using&nbsp;eight_byte_float::to_string&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;bool:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element(&nbsp;X,&nbsp;Bool&nbsp;);&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;using&nbsp;bool::to_string&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;string:&nbsp;&nbsp;&nbsp;Element(&nbsp;X,&nbsp;String&nbsp;);&nbsp;#&nbsp;&nbsp;using&nbsp;(fn&nbsp;x&nbsp;=&gt;&nbsp;x)&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;string'&nbsp;:&nbsp;Element(&nbsp;X,&nbsp;String&nbsp;);&nbsp;#&nbsp;&nbsp;using&nbsp;string::to_string&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;char:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Element(&nbsp;X,&nbsp;Char&nbsp;);&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;using&nbsp;string::from_char&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;char'&nbsp;&nbsp;&nbsp;:&nbsp;Element(&nbsp;X,&nbsp;Char&nbsp;);&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;using&nbsp;char::to_string&nbsp;</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;number_string&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_std_src_number-string_pkg.html#src/lib/std/src/number-string.pkg"><TT>src/lib/std/src/number-string.pkg</TT></A><BR><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Parameterized&nbsp;elements:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;int'&nbsp;&nbsp;&nbsp;:&nbsp;number_string::Radix&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;&nbsp;Element(&nbsp;X,&nbsp;Int&nbsp;&nbsp;);&nbsp;#&nbsp;&nbsp;using&nbsp;(int::format&nbsp;r)&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;float'&nbsp;:&nbsp;number_string::Float_Format&nbsp;-&gt;&nbsp;&nbsp;Element&nbsp;(X,&nbsp;Float);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;using&nbsp;(eight_byte_float::format&nbsp;f)&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Generic&nbsp;"gluifier":</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;glue:&nbsp;&nbsp;Element&nbsp;(X,&nbsp;T)&nbsp;-&gt;&nbsp;T&nbsp;-&gt;&nbsp;Glue(X);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;More&nbsp;glue:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;nothing:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Glue(X);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;null&nbsp;glue&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;text:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;-&gt;&nbsp;Glue(X);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Constant&nbsp;text&nbsp;glue&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;sp:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Int&nbsp;-&gt;&nbsp;&nbsp;&nbsp;&nbsp;Glue(X);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;n&nbsp;spaces&nbsp;glue&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;nl:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Glue(X);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;newline&nbsp;glue&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;tab:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Glue(X);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;tabulator&nbsp;glue&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;"Places"&nbsp;tell&nbsp;which&nbsp;side</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;of&nbsp;a&nbsp;string&nbsp;to&nbsp;pad&nbsp;or&nbsp;trim:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Place;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;left:&nbsp;&nbsp;&nbsp;&nbsp;Place;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;center:&nbsp;&nbsp;Place;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;right:&nbsp;&nbsp;&nbsp;Place;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Pad,&nbsp;trim,&nbsp;or&nbsp;fit&nbsp;to&nbsp;size&nbsp;n</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;the&nbsp;output&nbsp;corresponding&nbsp;to</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;a&nbsp;format&nbsp;fragment:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;pad:&nbsp;&nbsp;&nbsp;Place&nbsp;-&gt;&nbsp;Int&nbsp;-&gt;&nbsp;Fragment(&nbsp;X,&nbsp;T&nbsp;)&nbsp;-&gt;&nbsp;Fragment(&nbsp;X,&nbsp;T&nbsp;);</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;trim:&nbsp;&nbsp;Place&nbsp;-&gt;&nbsp;Int&nbsp;-&gt;&nbsp;Fragment(&nbsp;X,&nbsp;T&nbsp;)&nbsp;-&gt;&nbsp;Fragment(&nbsp;X,&nbsp;T&nbsp;);</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;fit:&nbsp;&nbsp;&nbsp;Place&nbsp;-&gt;&nbsp;Int&nbsp;-&gt;&nbsp;Fragment(&nbsp;X,&nbsp;T&nbsp;)&nbsp;-&gt;&nbsp;Fragment(&nbsp;X,&nbsp;T&nbsp;);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Specialized&nbsp;padding&nbsp;(left&nbsp;and&nbsp;right)&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;padl:&nbsp;&nbsp;Int&nbsp;-&gt;&nbsp;Fragment(&nbsp;X,&nbsp;T&nbsp;)&nbsp;-&gt;&nbsp;Fragment(&nbsp;X,&nbsp;T&nbsp;);</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;padr:&nbsp;&nbsp;Int&nbsp;-&gt;&nbsp;Fragment(&nbsp;X,&nbsp;T&nbsp;)&nbsp;-&gt;&nbsp;Fragment(&nbsp;X,&nbsp;T&nbsp;);</CODE><BR><BR>
<CODE>};</CODE><BR><BR><BR><BR>
<CODE>##&nbsp;COPYRIGHT&nbsp;(c)&nbsp;2002&nbsp;Bell&nbsp;Labs,&nbsp;Lucent&nbsp;Technologies</CODE><BR>
<CODE>##&nbsp;Subsequent&nbsp;changes&nbsp;by&nbsp;Jeff&nbsp;Prothero&nbsp;Copyright&nbsp;(c)&nbsp;2010-2015,</CODE><BR>
<CODE>##&nbsp;released&nbsp;per&nbsp;terms&nbsp;of&nbsp;SMLNJ-COPYRIGHT.</CODE><BR>
</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-src_lib_src_path-utilities_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_src_priority-queue_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
