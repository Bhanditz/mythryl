<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>src/lib/src/lib/thread-kit/src/core-thread-kit/microthread.api</TITLE>
</HEAD>
<BODY >
<A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_microthread-preemptive-scheduler_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_oneshot-maildrop_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc1464">15.3.388</A>  src/lib/src/lib/thread-kit/src/core-thread-kit/microthread.api</H3><P>
<A NAME="src/lib/src/lib/thread-kit/src/core-thread-kit/microthread.api"></A>
<CODE>#&nbsp;I&nbsp;think&nbsp;we&nbsp;should:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Crowbar&nbsp;the&nbsp;thread-scheduler&nbsp;logic&nbsp;to&nbsp;never&nbsp;kill</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;task&nbsp;while&nbsp;it&nbsp;is&nbsp;in&nbsp;a&nbsp;critical&nbsp;section.&nbsp;&nbsp;This</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;probably&nbsp;means&nbsp;that&nbsp;we&nbsp;need&nbsp;a&nbsp;new&nbsp;state</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ALIVE_UNTIL_EXIT_FROM_UNINTERRUPTIBLE_SCOPE&nbsp;Exception</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;An&nbsp;uncaught&nbsp;exception&nbsp;exception&nbsp;within&nbsp;an&nbsp;uninterruptible</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;scope&nbsp;needs&nbsp;to&nbsp;shut&nbsp;down&nbsp;the&nbsp;entire&nbsp;process.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;We&nbsp;need&nbsp;a&nbsp;narration&nbsp;function&nbsp;which&nbsp;is&nbsp;notified</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;all&nbsp;events&nbsp;which&nbsp;terminate&nbsp;a&nbsp;thread&nbsp;or&nbsp;task.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;should&nbsp;report&nbsp;unanticipated&nbsp;events&nbsp;to&nbsp;stderr:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Uncaught&nbsp;exceptions.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Thread&nbsp;or&nbsp;task&nbsp;killed.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;We&nbsp;need&nbsp;a&nbsp;hook&nbsp;so&nbsp;that&nbsp;the&nbsp;narration&nbsp;function&nbsp;can</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;replaced&nbsp;at&nbsp;runtime.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;We&nbsp;probably&nbsp;need&nbsp;a&nbsp;per-thread&nbsp;cleanup&nbsp;function.&nbsp;We</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;may&nbsp;want&nbsp;separate&nbsp;end_thread()/end_task()&nbsp;calls</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;this,&nbsp;to&nbsp;reflect&nbsp;the&nbsp;different&nbsp;semantics.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;We&nbsp;probably&nbsp;need&nbsp;a&nbsp;separate&nbsp;WRAPPING_UP&nbsp;state</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;this,&nbsp;distinct&nbsp;from&nbsp;regular&nbsp;ALIVE,&nbsp;for</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;example&nbsp;to&nbsp;prevent&nbsp;running&nbsp;wrap-up&nbsp;code&nbsp;twice.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;I&nbsp;don't&nbsp;think&nbsp;we&nbsp;want&nbsp;a&nbsp;per-task&nbsp;cleanup&nbsp;function;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;starters,&nbsp;it&nbsp;wouldn't&nbsp;have&nbsp;a&nbsp;natural&nbsp;thread</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;which&nbsp;to&nbsp;run.&nbsp;&nbsp;Running&nbsp;code&nbsp;is&nbsp;for&nbsp;threads,</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;tasks.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;We&nbsp;need&nbsp;to&nbsp;document&nbsp;the&nbsp;thread&nbsp;state&nbsp;transitions</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;a&nbsp;diagram.</CODE><BR><BR>
<CODE>#&nbsp;Compiled&nbsp;by:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_std_standard_lib.html#src/lib/std/standard.lib"><TT>src/lib/std/standard.lib</TT></A><BR><BR><CODE>##&nbsp;microthread.api</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;is&nbsp;the&nbsp;main&nbsp;application-programmer&nbsp;interface&nbsp;for</CODE><BR>
<CODE>#&nbsp;creating&nbsp;and&nbsp;managing&nbsp;application&nbsp;threads.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;main&nbsp;point&nbsp;of&nbsp;interest&nbsp;here&nbsp;is&nbsp;the</CODE><BR>
<CODE>#&nbsp;relationship&nbsp;between&nbsp;tasks&nbsp;and&nbsp;threads:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;A&nbsp;"task"&nbsp;represents&nbsp;a&nbsp;set&nbsp;of&nbsp;cooperating&nbsp;threads.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Threads&nbsp;and&nbsp;tasks&nbsp;both&nbsp;begin&nbsp;in&nbsp;state&nbsp;ALIVE.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Every&nbsp;thread&nbsp;is&nbsp;a&nbsp;belongs&nbsp;to&nbsp;exactly&nbsp;one&nbsp;task.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;At&nbsp;start-up&nbsp;all&nbsp;threads&nbsp;belong&nbsp;to&nbsp;the&nbsp;default</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;task,&nbsp;which&nbsp;is&nbsp;special&nbsp;in&nbsp;that&nbsp;it&nbsp;never&nbsp;dies</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(never&nbsp;leaves&nbsp;state::ALIVE).</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;A&nbsp;thread&nbsp;which&nbsp;exits&nbsp;by&nbsp;calling&nbsp;thread_exit&nbsp;{&nbsp;success&nbsp;=&gt;&nbsp;TRUE&nbsp;&nbsp;}&nbsp;enters&nbsp;state::SUCCESS.</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;A&nbsp;thread&nbsp;which&nbsp;exits&nbsp;by&nbsp;calling&nbsp;thread_exit&nbsp;{&nbsp;success&nbsp;=&gt;&nbsp;FALSE&nbsp;}&nbsp;enters&nbsp;state::FAILURE.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;If&nbsp;any&nbsp;thread&nbsp;in&nbsp;a&nbsp;task&nbsp;enters&nbsp;state:FAILURE,</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;task&nbsp;enters&nbsp;state::FAILURE,&nbsp;shutting&nbsp;down</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all&nbsp;remaining&nbsp;threads&nbsp;in&nbsp;the&nbsp;task.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;The&nbsp;default&nbsp;task&nbsp;is&nbsp;an&nbsp;exception:&nbsp;&nbsp;It&nbsp;remains</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ALIVE&nbsp;no&nbsp;matter&nbsp;what&nbsp;happens&nbsp;to&nbsp;its&nbsp;threads.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;If&nbsp;all&nbsp;threads&nbsp;in&nbsp;a&nbsp;task&nbsp;end&nbsp;in&nbsp;state::SUCCESS,</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;task&nbsp;enters&nbsp;state::SUCCESS.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Thread&nbsp;and&nbsp;tasks&nbsp;states&nbsp;are&nbsp;both&nbsp;allowed&nbsp;to&nbsp;make</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exactly&nbsp;one&nbsp;transition,&nbsp;from&nbsp;ALIVE&nbsp;to&nbsp;one&nbsp;of</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state::SUCCESS</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state::FAILURE</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state::FAILURE_DUE_TO_UNCAUGHT_EXCEPTION&nbsp;&nbsp;Exception</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Each&nbsp;thread&nbsp;and&nbsp;task&nbsp;has&nbsp;&nbsp;a&nbsp;condvar.&nbsp;&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Client&nbsp;code&nbsp;can&nbsp;wait&nbsp;on&nbsp;the&nbsp;condvar,</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;will&nbsp;result&nbsp;in&nbsp;them&nbsp;blocking&nbsp;until</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;exits&nbsp;ALIVE&nbsp;state.&nbsp;&nbsp;They&nbsp;can&nbsp;then&nbsp;check</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;see&nbsp;whether&nbsp;final&nbsp;state&nbsp;was&nbsp;state::SUCCESS.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(if&nbsp;they&nbsp;care).&nbsp;&nbsp;Such&nbsp;waiting/blocking&nbsp;is&nbsp;done</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;via&nbsp;thread_done__mailop&nbsp;and</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ane&nbsp;&nbsp;&nbsp;task_done__mailop.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Each&nbsp;task&nbsp;keeps&nbsp;a&nbsp;count&nbsp;of&nbsp;ALIVE&nbsp;threads</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;belong&nbsp;to&nbsp;it.&nbsp;&nbsp;In&nbsp;general,&nbsp;the&nbsp;task</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goes&nbsp;from&nbsp;ALIVE&nbsp;to&nbsp;SUCCESS&nbsp;state&nbsp;(and</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fires&nbsp;its&nbsp;condvar)&nbsp;when&nbsp;its&nbsp;count&nbsp;of</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ALIVE&nbsp;threads&nbsp;goes&nbsp;to&nbsp;zero.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Any&nbsp;uncaught&nbsp;exception&nbsp;kills&nbsp;both&nbsp;the&nbsp;thread</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throwing&nbsp;the&nbsp;exception&nbsp;and&nbsp;also&nbsp;its&nbsp;task;&nbsp;both</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;go&nbsp;to&nbsp;state&nbsp;FAILURE_DUE_TO_UNCAUGHT_EXCEPTION&nbsp;&nbsp;Exception</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;set&nbsp;their&nbsp;condvars.&nbsp;&nbsp;The&nbsp;"Exception"</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argument&nbsp;records&nbsp;the&nbsp;fatal&nbsp;exception.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Other&nbsp;threads&nbsp;in&nbsp;the&nbsp;task&nbsp;will&nbsp;never&nbsp;be</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scheduled&nbsp;to&nbsp;run&nbsp;again,&nbsp;but&nbsp;do&nbsp;not&nbsp;immediately</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cease&nbsp;to&nbsp;be&nbsp;ALIVE.&nbsp;&nbsp;They&nbsp;exit&nbsp;ALIVE&nbsp;state&nbsp;one</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;one&nbsp;as&nbsp;they&nbsp;come&nbsp;due&nbsp;to&nbsp;execute,&nbsp;firing&nbsp;their</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;condvars&nbsp;as&nbsp;they&nbsp;do&nbsp;so.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;thread&nbsp;&nbsp;waiting&nbsp;on&nbsp;an&nbsp;event&nbsp;which&nbsp;never</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comes&nbsp;may&nbsp;stay&nbsp;ALIVE&nbsp;indefinitely,&nbsp;albeit&nbsp;without</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doing&nbsp;anything.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;A&nbsp;task&nbsp;may&nbsp;be&nbsp;explicitly&nbsp;killed&nbsp;via&nbsp;the</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kill_task()&nbsp;call.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;If&nbsp;the&nbsp;task&nbsp;state&nbsp;is&nbsp;not&nbsp;ALIVE&nbsp;this&nbsp;is&nbsp;a&nbsp;no-op.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;If&nbsp;the&nbsp;task&nbsp;state&nbsp;is&nbsp;ALIVE&nbsp;it&nbsp;causes&nbsp;the</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;task&nbsp;to&nbsp;transition&nbsp;to&nbsp;state::FAILURE.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;fire&nbsp;its&nbsp;condvar.&nbsp;&nbsp;Again,&nbsp;threads</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;belonging&nbsp;to&nbsp;the&nbsp;task&nbsp;to&nbsp;not&nbsp;exit&nbsp;ALIVE</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state&nbsp;immediately;&nbsp;&nbsp;rather&nbsp;as&nbsp;they&nbsp;come</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;due&nbsp;to&nbsp;execute&nbsp;they&nbsp;enter&nbsp;the&nbsp;same&nbsp;state</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;the&nbsp;task,&nbsp;firing&nbsp;their&nbsp;condvar&nbsp;as&nbsp;they</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;so.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;The&nbsp;Exception&nbsp;may&nbsp;be&nbsp;used&nbsp;to&nbsp;record&nbsp;arbitrary</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;information&nbsp;about&nbsp;why&nbsp;the&nbsp;task&nbsp;was&nbsp;killed.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;exception&nbsp;is&nbsp;thrown;&nbsp;it&nbsp;serves&nbsp;simply</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;a&nbsp;data&nbsp;container.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;A&nbsp;thread&nbsp;may&nbsp;be&nbsp;explicitly&nbsp;killed&nbsp;via&nbsp;the</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kill_thread()&nbsp;call.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;If&nbsp;the&nbsp;thread&nbsp;state&nbsp;is&nbsp;not&nbsp;ALIVE&nbsp;this&nbsp;is&nbsp;a&nbsp;no-op.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;If&nbsp;the&nbsp;thread&nbsp;state&nbsp;is&nbsp;ALIVE&nbsp;it&nbsp;causes&nbsp;the</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread&nbsp;to&nbsp;transition&nbsp;to&nbsp;state::FAILURE.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;fire&nbsp;its&nbsp;condvar.&nbsp;&nbsp;</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;By&nbsp;default&nbsp;make_thread()&nbsp;and&nbsp;make_thread'()&nbsp;produce</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;new&nbsp;threads&nbsp;belonging&nbsp;to&nbsp;the&nbsp;same&nbsp;task&nbsp;as&nbsp;the&nbsp;currently</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;running&nbsp;thread.&nbsp;&nbsp;This&nbsp;may&nbsp;be&nbsp;overridden&nbsp;by&nbsp;suppling&nbsp;an</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;explicit&nbsp;THREAD_TASK&nbsp;parameter&nbsp;to&nbsp;make_thread'().</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;The&nbsp;make_task[]&nbsp;call&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;create&nbsp;a&nbsp;new&nbsp;task;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;optionally&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;create&nbsp;one&nbsp;or&nbsp;more&nbsp;threads</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;members&nbsp;of&nbsp;that&nbsp;task&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;same&nbsp;call.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;No&nbsp;method&nbsp;is&nbsp;provided&nbsp;for&nbsp;killing&nbsp;a&nbsp;thread&nbsp;which&nbsp;is&nbsp;looping</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;an&nbsp;uninterruptible&nbsp;scope&nbsp;("critical&nbsp;section"&nbsp;--&nbsp;i.e.,&nbsp;with</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;between&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;call&nbsp;to&nbsp;enter_uninterruptible_scope()</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;the&nbsp;next&nbsp;call&nbsp;to&nbsp;exit_uninterruptible_scope().</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;Such&nbsp;calls&nbsp;are&nbsp;used&nbsp;to&nbsp;indicate&nbsp;that&nbsp;the&nbsp;heap&nbsp;is&nbsp;in&nbsp;an</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;inconsistent&nbsp;state&nbsp;in&nbsp;which&nbsp;other&nbsp;threads&nbsp;cannot&nbsp;safely</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;run,&nbsp;so&nbsp;it&nbsp;makes&nbsp;no&nbsp;sense&nbsp;to&nbsp;kill&nbsp;such&nbsp;a&nbsp;thread&nbsp;and</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;continue.</CODE><BR><BR>
<CODE>#&nbsp;Compiled&nbsp;by:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_std_standard_lib.html#src/lib/std/standard.lib"><TT>src/lib/std/standard.lib</TT></A><BR><BR><CODE>#&nbsp;See&nbsp;also&nbsp;higher-level&nbsp;functionality&nbsp;defined&nbsp;in:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_task-junk_api.html#src/lib/src/lib/thread-kit/src/core-thread-kit/task-junk.api"><TT>src/lib/src/lib/thread-kit/src/core-thread-kit/task-junk.api</TT></A><BR><BR><CODE>stipulate</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;mop&nbsp;=&nbsp;&nbsp;mailop;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;mailop&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_mailop_pkg.html#src/lib/src/lib/thread-kit/src/core-thread-kit/mailop.pkg"><TT>src/lib/src/lib/thread-kit/src/core-thread-kit/mailop.pkg</TT></A><BR><CODE>herein</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;This&nbsp;api&nbsp;is&nbsp;implemented&nbsp;in:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_microthread_pkg.html#src/lib/src/lib/thread-kit/src/core-thread-kit/microthread.pkg"><TT>src/lib/src/lib/thread-kit/src/core-thread-kit/microthread.pkg</TT></A><BR><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;api&nbsp;Microthread&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exception&nbsp;THREAD_SCHEDULER_NOT_RUNNING;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;state:&nbsp;api&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;State&nbsp;=&nbsp;ALIVE</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|&nbsp;SUCCESS</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|&nbsp;FAILURE</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|&nbsp;FAILURE_DUE_TO_UNCAUGHT_EXCEPTION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>#&nbsp;No&nbsp;Exception&nbsp;value&nbsp;here.&nbsp;&nbsp;This&nbsp;is&nbsp;the&nbsp;crucial&nbsp;difference&nbsp;from&nbsp;itt::state,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;which&nbsp;makes&nbsp;this&nbsp;state&nbsp;an&nbsp;equality&nbsp;type&nbsp;--&nbsp;much&nbsp;for&nbsp;convenient&nbsp;for&nbsp;client&nbsp;code.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apptask;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;task&nbsp;represents&nbsp;one&nbsp;or&nbsp;more&nbsp;threads;&nbsp;it&nbsp;provides&nbsp;an&nbsp;easy&nbsp;way&nbsp;to&nbsp;kill&nbsp;them&nbsp;all&nbsp;with&nbsp;one&nbsp;call.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Microthread;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;This&nbsp;contains&nbsp;the&nbsp;state&nbsp;of&nbsp;a&nbsp;thread&nbsp;other&nbsp;than&nbsp;the&nbsp;actual&nbsp;fate&nbsp;("continuation")&nbsp;for&nbsp;that&nbsp;thread.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default_microthread:&nbsp;&nbsp;&nbsp;&nbsp;Microthread;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Needed&nbsp;during&nbsp;bootstrapping,&nbsp;when&nbsp;get_current_microthread()&nbsp;cannot&nbsp;yet&nbsp;be&nbsp;called.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_current_microthread:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Microthread;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;thread&nbsp;uses&nbsp;this&nbsp;to&nbsp;get&nbsp;its&nbsp;own&nbsp;Microthread&nbsp;record.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_current_microthread's_name:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;String;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;thread&nbsp;uses&nbsp;this&nbsp;to&nbsp;get&nbsp;its&nbsp;own&nbsp;name.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_current_microthread's_id:&nbsp;&nbsp;&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Int;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;thread&nbsp;uses&nbsp;this&nbsp;to&nbsp;get&nbsp;its&nbsp;own&nbsp;unique&nbsp;ID.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_task's_id:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apptask&nbsp;-&gt;&nbsp;Int;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Unique&nbsp;id&nbsp;of&nbsp;task.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_task's_name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apptask&nbsp;-&gt;&nbsp;String;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Caller-assigned&nbsp;human-readable&nbsp;name&nbsp;of&nbsp;task.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_task's_state:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apptask&nbsp;-&gt;&nbsp;state::State;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_task's_alive_threads_count:&nbsp;&nbsp;Apptask&nbsp;-&gt;&nbsp;Int;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Number&nbsp;of&nbsp;threads&nbsp;currently&nbsp;in&nbsp;this&nbsp;task&nbsp;and&nbsp;in&nbsp;ALIVE&nbsp;state.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;same_task:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Apptask,&nbsp;Apptask)&nbsp;-&gt;&nbsp;Bool;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compare_task:&nbsp;&nbsp;&nbsp;&nbsp;(Apptask,&nbsp;Apptask)&nbsp;-&gt;&nbsp;Order;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;same_thread:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Microthread,&nbsp;Microthread)&nbsp;-&gt;&nbsp;Bool;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compare_thread:&nbsp;&nbsp;(Microthread,&nbsp;Microthread)&nbsp;-&gt;&nbsp;Order;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hash_thread:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Microthread&nbsp;-&gt;&nbsp;Unt;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kill_thread:&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;success:&nbsp;Bool,&nbsp;thread:&nbsp;Microthread&nbsp;}&nbsp;-&gt;&nbsp;Void;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;If&nbsp;given&nbsp;thread&nbsp;is&nbsp;ALIVE,&nbsp;make&nbsp;it&nbsp;a&nbsp;SUCCESS&nbsp;or&nbsp;FAILURE.&nbsp;FAILURE&nbsp;kills&nbsp;its&nbsp;task&nbsp;(if&nbsp;not&nbsp;the&nbsp;default&nbsp;task)&nbsp;and&nbsp;thus&nbsp;all&nbsp;other&nbsp;threads&nbsp;in&nbsp;the&nbsp;task.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kill_task:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;success:&nbsp;Bool,&nbsp;task:&nbsp;&nbsp;&nbsp;Apptask&nbsp;&nbsp;&nbsp;}&nbsp;-&gt;&nbsp;Void;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;If&nbsp;given&nbsp;task&nbsp;&nbsp;&nbsp;is&nbsp;ALIVE,&nbsp;make&nbsp;it&nbsp;a&nbsp;SUCCESS&nbsp;or&nbsp;FAILURE.&nbsp;Kills&nbsp;all&nbsp;threads&nbsp;in&nbsp;task.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_thread's_id:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Microthread&nbsp;-&gt;&nbsp;Int;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Unique&nbsp;id&nbsp;of&nbsp;thread.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_thread's_id_as_string:&nbsp;&nbsp;Microthread&nbsp;-&gt;&nbsp;String;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Unique&nbsp;id&nbsp;of&nbsp;thread&nbsp;as&nbsp;a&nbsp;string&nbsp;--&nbsp;"003141"&nbsp;or&nbsp;such.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_thread's_name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Microthread&nbsp;-&gt;&nbsp;String;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Caller-assigned&nbsp;human-readable&nbsp;name&nbsp;of&nbsp;thread.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_thread's_state:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Microthread&nbsp;-&gt;&nbsp;state::State;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_thread's_task:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Microthread&nbsp;-&gt;&nbsp;Apptask;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_exception_that_killed_thread:&nbsp;&nbsp;Microthread&nbsp;-&gt;&nbsp;Null_Or(&nbsp;Exception&nbsp;);&nbsp;#&nbsp;NULL&nbsp;if&nbsp;not&nbsp;in&nbsp;state::FAILURE_DUE_TO_UNCAUGHT_EXCEPTION.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_exception_that_killed_task:&nbsp;&nbsp;&nbsp;&nbsp;Apptask&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Null_Or(&nbsp;Exception&nbsp;);&nbsp;&nbsp;&nbsp;#&nbsp;NULL&nbsp;if&nbsp;not&nbsp;in&nbsp;state::FAILURE_DUE_TO_UNCAUGHT_EXCEPTION.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Make_Thread_Args&nbsp;=&nbsp;&nbsp;THREAD_NAME&nbsp;&nbsp;String&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Future-proofing:&nbsp;&nbsp;we&nbsp;can&nbsp;add&nbsp;additional&nbsp;options&nbsp;here&nbsp;in&nbsp;future&nbsp;without&nbsp;breaking&nbsp;existing&nbsp;code.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|&nbsp;&nbsp;THREAD_TASK&nbsp;&nbsp;Apptask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>#&nbsp;New&nbsp;thread&nbsp;will&nbsp;be&nbsp;a&nbsp;member&nbsp;of&nbsp;this&nbsp;task&nbsp;(instead&nbsp;of&nbsp;defaulting&nbsp;to&nbsp;same&nbsp;task&nbsp;as&nbsp;parent&nbsp;thread).</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;etc&nbsp;for&nbsp;threadThread&nbsp;&nbsp;&nbsp;Thread&nbsp;body&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arg&nbsp;for&nbsp;Body&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Result</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------------------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make_thread':&nbsp;&nbsp;&nbsp;List(Make_Thread_Args)&nbsp;&nbsp;-&gt;&nbsp;&nbsp;(X&nbsp;-&gt;&nbsp;Void)&nbsp;&nbsp;-&gt;&nbsp;&nbsp;X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Microthread;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Given&nbsp;a&nbsp;fn&nbsp;f&nbsp;and&nbsp;arg&nbsp;x&nbsp;for&nbsp;it,&nbsp;run&nbsp;f(x)&nbsp;as&nbsp;a&nbsp;thread&nbsp;and&nbsp;return&nbsp;the&nbsp;microthread&nbsp;for&nbsp;that&nbsp;thread.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread&nbsp;body&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Result</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------&nbsp;&nbsp;&nbsp;&nbsp;------------------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;---------</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make_thread:&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;-&gt;&nbsp;(Void&nbsp;-&gt;&nbsp;Void)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Microthread;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;convenience&nbsp;version&nbsp;of&nbsp;above&nbsp;for&nbsp;common&nbsp;case&nbsp;where&nbsp;f&nbsp;is&nbsp;Void-&gt;Void.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;fun&nbsp;make_thread&nbsp;name&nbsp;f&nbsp;=&nbsp;make_thread&nbsp;f&nbsp;()&nbsp;[&nbsp;THREAD_NAME&nbsp;name&nbsp;];</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Task&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread&nbsp;&nbsp;&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread&nbsp;body&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Result</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;------&nbsp;&nbsp;&nbsp;&nbsp;-------------------------------&nbsp;&nbsp;&nbsp;&nbsp;------</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make_task:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;-&gt;&nbsp;List(&nbsp;(String,&nbsp;(Void&nbsp;-&gt;&nbsp;Void)))&nbsp;-&gt;&nbsp;Apptask;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread_exit:&nbsp;&nbsp;{&nbsp;success:&nbsp;Bool&nbsp;}&nbsp;-&gt;&nbsp;X;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;thread&nbsp;calls&nbsp;this&nbsp;when&nbsp;done;&nbsp;the&nbsp;call&nbsp;never&nbsp;returns.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;If&nbsp;'success'&nbsp;is&nbsp;TRUE&nbsp;&nbsp;thread&nbsp;final&nbsp;state&nbsp;will&nbsp;be&nbsp;state::SUCCESS.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;If&nbsp;'success'&nbsp;is&nbsp;FALSE&nbsp;thread&nbsp;final&nbsp;state&nbsp;will&nbsp;be&nbsp;state::FAILURE&nbsp;and&nbsp;its&nbsp;task&nbsp;will&nbsp;be&nbsp;terminated&nbsp;in&nbsp;state::FAILURE,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;except&nbsp;the&nbsp;default&nbsp;task&nbsp;never&nbsp;dies&nbsp;and&nbsp;never&nbsp;exits&nbsp;state::ALIVE.</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thread_done__mailop:&nbsp;&nbsp;Microthread&nbsp;-&gt;&nbsp;mop::Mailop(&nbsp;Void&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;thread&nbsp;uses&nbsp;this&nbsp;to&nbsp;be&nbsp;notified&nbsp;of&nbsp;the&nbsp;death&nbsp;of&nbsp;another&nbsp;thread.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;For&nbsp;example:&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_lib_thread-kit_src_lib_thread-deathwatch_pkg.html#src/lib/src/lib/thread-kit/src/lib/thread-deathwatch.pkg"><TT>src/lib/src/lib/thread-kit/src/lib/thread-deathwatch.pkg</TT></A><BR><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;task_done__mailop:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apptask&nbsp;-&gt;&nbsp;mop::Mailop(&nbsp;Void&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;thread&nbsp;uses&nbsp;this&nbsp;to&nbsp;be&nbsp;notified&nbsp;of&nbsp;the&nbsp;death&nbsp;of&nbsp;a&nbsp;task.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Void;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;thread&nbsp;calls&nbsp;this&nbsp;to&nbsp;let&nbsp;another&nbsp;thread&nbsp;run.&nbsp;&nbsp;Used&nbsp;mostly&nbsp;for&nbsp;benchmarking,&nbsp;since&nbsp;scheduler&nbsp;is&nbsp;preemptive.</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;run_thread__xu</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Microthread&nbsp;-&gt;&nbsp;(X&nbsp;-&gt;&nbsp;Void)&nbsp;-&gt;&nbsp;X&nbsp;-&gt;&nbsp;Void;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Thread-local&nbsp;data&nbsp;support:</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make_per_thread_property</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Void&nbsp;-&gt;&nbsp;X)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;clear:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Void,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Clear&nbsp;current&nbsp;thread's&nbsp;property.&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get:&nbsp;&nbsp;&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;X,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Get&nbsp;current&nbsp;thread's&nbsp;property;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;If&nbsp;the&nbsp;property&nbsp;is&nbsp;not&nbsp;defined</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;then&nbsp;set&nbsp;it&nbsp;using&nbsp;the&nbsp;initialization&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;function.&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;peek:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Null_Or(X),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Return&nbsp;the&nbsp;property's&nbsp;value,&nbsp;if&nbsp;any.&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set:&nbsp;&nbsp;&nbsp;X&nbsp;-&gt;&nbsp;Void&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Set&nbsp;the&nbsp;property's&nbsp;value&nbsp;for&nbsp;the&nbsp;current&nbsp;thread.&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make_boolean_per_thread_property</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Void</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;get:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Bool,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set:&nbsp;&nbsp;Bool&nbsp;-&gt;&nbsp;Void</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR>
<CODE>end;</CODE><BR><BR><BR>
<CODE>##&nbsp;COPYRIGHT&nbsp;(c)&nbsp;1989-1991&nbsp;John&nbsp;H.&nbsp;Reppy</CODE><BR>
<CODE>##&nbsp;COPYRIGHT&nbsp;(c)&nbsp;1995&nbsp;AT&amp;T&nbsp;Bell&nbsp;Laboratories.</CODE><BR>
<CODE>##&nbsp;Subsequent&nbsp;changes&nbsp;by&nbsp;Jeff&nbsp;Prothero&nbsp;Copyright&nbsp;(c)&nbsp;2010-2015,</CODE><BR>
<CODE>##&nbsp;released&nbsp;per&nbsp;terms&nbsp;of&nbsp;SMLNJ-COPYRIGHT.</CODE><BR>
</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_microthread-preemptive-scheduler_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_oneshot-maildrop_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
