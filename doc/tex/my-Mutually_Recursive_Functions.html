<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Mutually Recursive Functions</TITLE>
</HEAD>
<BODY >
<A HREF="my-Value_Capture_by_Functions.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Functions.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc271">10.9.7</A>  Mutually Recursive Functions</H3><P>
<A NAME="section:ref:functions:mutuall-recursive-functions"></A></P><P>Normally the Mythryl compiler processes the lines of each input file 
in reading order, left-to-right, top-to-bottom. Text as yet unseen 
has no effect upon the meaning of a statement. This semantics is a 
good match to what the human reader does, thus enhancing readability, 
and also supports interactive use by allowing Mythryl to evaluate 
expressions one by one as they are entered, rather than needing to 
see the entire input file before any output can be generated.</P><P>However, this semantics does not suffice for mutually recursive 
functions; somehow the compiler must be told that the first 
function in a mutually recursive set refers to as-yet unseen 
functions coming up, and thus that the compiler must postpone 
analysis until the complete set of mutually recursive functions 
has been read.</P><P>To do this Mythryl uses the reserved word <I>also</I>: Instead 
of closing the first mutually recursive function with a semicolon, 
it is connected to the next mutually recursive function with <I>also</I>.</P><P>As a simple contrived example, suppose that we wish to compute 
whether a list is of even or odd length using mutually recursive 
functions. A simpler way to do this would be to just use the 
existing <TT>list::length</TT> function and test the low bit of 
the result:</P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    fun list_length_is_odd  some_list
        =
        ((list::length some_list) &amp; 1) == 1;

    printf "list_length_is_odd [1, 2] = %s\n"    (list_length_is_odd [1, 2]    ?? "TRUE" :: "FALSE");
    printf "list_length_is_odd [1, 2, 3] = %s\n" (list_length_is_odd [1, 2, 3] ?? "TRUE" :: "FALSE");

    linux$ ./my-script
    list_length_is_odd [1, 2] = FALSE
    list_length_is_odd [1, 2, 3] = TRUE
</PRE><P>But we want to do it the hard way:</P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    fun list_length_is_odd  some_list
        =
        even_helper some_list
        where
            fun even_helper []          =&gt; FALSE;
                even_helper (a ! rest)  =&gt;  odd_helper rest;
            end

            also
            fun  odd_helper []          =&gt; TRUE;
                 odd_helper (a ! rest)  =&gt; even_helper rest;
            end;
        end;

    printf "list_length_is_odd [1, 2] = %s\n"    (list_length_is_odd [1, 2]    ?? "TRUE" :: "FALSE");
    printf "list_length_is_odd [1, 2, 3] = %s\n" (list_length_is_odd [1, 2, 3] ?? "TRUE" :: "FALSE");

    linux$ ./my-script
    list_length_is_odd [1, 2] = FALSE
    list_length_is_odd [1, 2, 3] = TRUE
</PRE><P>Here our two mutually recursive helper functions <TT>even_helper</TT> and <TT>odd_helper</TT> 
remember whether we have currently seen an even or odd number of nodes in the list, 
according to which is currently executing, and respectively return <TT>FALSE</TT> or <TT>TRUE</TT> 
when the end of the list is reached.</P><P>To signal the mutual recursion, <TT>even_helper</TT> lacks a terminal semicolon, instead 
being linked to <TT>odd_helper</TT> by the <TT>also</TT> reserved word.</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Value_Capture_by_Functions.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Functions.html"><IMG SRC="contents_motif.gif" ALT="Up"></A></BODY>
</HTML>
