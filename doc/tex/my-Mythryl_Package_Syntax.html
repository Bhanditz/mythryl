<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Mythryl Package Syntax</TITLE>
</HEAD>
<BODY >
<A HREF="my-Mythryl_API_Syntax.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Mythryl_for_SML_Programmers.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Mythryl_Generic_Syntax.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc197">5.7.15</A>  Mythryl Package Syntax</H3><P>C calls a record a <I>struct</I>, so to avoid misleading C intuition, 
where <SPAN STYLE="font-variant:small-caps">SML</SPAN> uses the keyword <TT>structure</TT>, Mythryl uses the keyword <TT>package</TT>.</P><P>Named packages are declared using a conventional, compact, Posix-flavored syntax 
parallel to the API syntax. Here is a package definition matching the preceding 
API declaration:</P><PRE CLASS="verbatim">    package my_package: My_Api {
        Color = RED | GREEN | BLUE;
        Point = TWO_D (Float, Float)
              | THREE_D (Float, Float, Float);   
        
        fun my_function ints
            =
            sum (ints, 0)
            where
                fun sum ([],       result) =&gt; result;
                    sum ((i ! is), result) =&gt; sum (is, i + result);
                end;
            end;
    };
</PRE><P>Unlike <SPAN STYLE="font-variant:small-caps">SML</SPAN>, which uses plain colon for weak package sealing for 
historical reasons, Mythryl uses plain colon above to represent strong 
sealing, in order to encourage good programming practices by giving the 
shortest, most convenient form to the preferred construct.</P><P>The Mythryl syntax for weak sealing in the same case is</P><PRE CLASS="verbatim">    package my_package: (weak) My_Api {
        Color = RED | GREEN | BLUE;
        Point = TWO_D (Float, Float)
              | THREE_D (Float, Float, Float);   
        
        fun my_function ints
            =
            sum (ints, 0)
            where
                fun sum ([],       result) =&gt; result;
                    sum ((i ! is), result) =&gt; sum (is, i + result);
                end;
            end;
    }
</PRE><P>(The above <TT>weak</TT> is not a reserved identifier, by the way.)</P><P>This syntax has better C intuition than <SPAN STYLE="font-variant:small-caps">SML</SPAN>&#X2019;s <TT>:&gt; </TT> operator. Also, 
recent research has revealed forms of module sealing other than conventional 
strong and weak sealing; the above <TT>(weak)</TT> syntax will extend naturally to accommodate 
other forms of sealing should the need arise.</P><P>As with Mythryl API syntax, anonymous package declarations (often useful as 
arguments to generics) are written by replacing the package name with an underbar 
wildcard in the above syntax:</P><PRE CLASS="verbatim">    package my_package
        =
        some_g (
            package {
                Color = RED | GREEN | BLUE;
                Point = TWO_D (Float, Float)
                      | THREE_D (Float, Float, Float);   

                fun my_function ints
                    =
                    sum (ints, 0)
                    where
                        fun sum ([],       result) =&gt; result;
                            sum ((i ! is), result) =&gt; sum (is, i + result);
                        end;
                    end;
            }
        );
</PRE><P>Anonymous package syntax is also used when a package is sealed with an 
API trailing <TT>where</TT> modifiers. This form parallels normal <SPAN STYLE="font-variant:small-caps">SML</SPAN> 
syntax in such cases:</P><PRE CLASS="verbatim">    package my_package
        :
        My_Api
        where
            Int == Integer
        =
        package {
            Color = RED | GREEN | BLUE;
            Point = TWO_D (Float, Float)
                  | THREE_D (Float, Float, Float);   

            fun my_function ints
                =
                sum (ints, 0)
                where
                    fun sum ([],       result) =&gt; result;
                        sum ((i ! is), result) =&gt; sum (is, i + result);
                    end;
                end;
        }
</PRE><P>A Mythryl file defining a package customarily uses the <TT>.pkg</TT> file extension.</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Mythryl_API_Syntax.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Mythryl_for_SML_Programmers.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Mythryl_Generic_Syntax.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
