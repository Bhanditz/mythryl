<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Mythryl for Loop</TITLE>
</HEAD>
<BODY >
<A HREF="my-Mythryl_Generic_Syntax.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Mythryl_for_SML_Programmers.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Mythryl_Prefix__Infix__Postfix_and_Circumfix_Operators.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc199">5.7.17</A>  Mythryl for Loop</H3><P><SPAN STYLE="font-variant:small-caps">SML</SPAN> suffers from a paucity of iterative constructs. Only <TT>while</TT> is 
standard, and it is almost never used.</P><P>Mythryl implements a C-flavored <TT>for</TT> loop construct:</P><PRE CLASS="verbatim">    for (i = 0; i &lt; 10; ++i) {
        printf "Loop %d\n" i;
    }
</PRE><P>That looks disturbingly imperative at first blush, but is in fact 
a derived form which expands into a recursive function as pure as 
the driven snow. The general form is</P><BLOCKQUOTE CLASS="quotation">
    for ( i = <I>expression</I><SUB><I>i</I></SUB>, j = <I>expression</I><SUB><I>j</I></SUB> ...; <I>conditional</I>; <I>loop_increments</I>; <I>result_expression</I>) {<BR>
        <I>loop body</I><BR>
    };<BR>
</BLOCKQUOTE><P>which the compiler expands internally into code like
</P><BLOCKQUOTE CLASS="quotation">
    let fun loop (i, j, ...) = {<BR>
            if (<I>conditional</I>)<BR>
                <I>loop body</I>;<BR>
                <I>loop_increments</I>;<BR>
                loop( i, j, ...);<BR>
            };<BR>
        else<BR>
            <I>result_expression</I>;<BR>
        fi;<BR>
    in<BR>
        loop (<I>expression</I><SUB><I>i</I></SUB>, <I>expression</I><SUB><I>j</I></SUB>, ...);<BR>
    end;<BR>
</BLOCKQUOTE><P>You will note that the former version is one-quarter the length 
of the latter: Using the <TT>for</TT> construct can make iterative 
code considerably shorter and clearer!</P><P>Incidentally, the <TT>++i</TT> and <TT>--j</TT> syntax expand into harmless 
pure <TT>i = i + 1; </TT> and <TT>j = j - 1;</TT> statements.</P><P>So there you are, the best of both worlds: clean loop syntax without guilt!</P><P>By the way, the old <TT>while</TT> loop is still available as </P><BLOCKQUOTE CLASS="quotation">
    for (<I>expression</I>) {<BR>
        <I>loop body</I><BR>
    };<BR>
</BLOCKQUOTE><P>The point of the keyword substitution is to return <TT>while</TT> to 
the general identifier pool: The fewer reserved words, the better.</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Mythryl_Generic_Syntax.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Mythryl_for_SML_Programmers.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Mythryl_Prefix__Infix__Postfix_and_Circumfix_Operators.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
