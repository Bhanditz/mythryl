<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Mythryl Functions: Currying and Partial Application</TITLE>
</HEAD>
<BODY >
<A HREF="my-Mythryl_Functions__Value_Capture.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-The_Full_Monte.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Mythryl_Functions__Parsing_Combinators_I.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc91">5.4.6</A>  Mythryl Functions: Currying and Partial Application</H3><P>Let us return to the <TT>delayed_print</TT> function from the 
previous section:</P><PRE CLASS="verbatim">    fun delayed_print  string
        =
        \\ () = printf "%s\n" string;
</PRE><P>An alternate way to write that function and example in Mythryl is:</P><PRE CLASS="verbatim">    #!/usr/bin/mythryl

    fun delayed_print  string  ()
        =
        printf "%s\n" string;

    fate_a =  delayed_print "Just";
    fate_b =  delayed_print "another";
    fate_c =  delayed_print "Mythryl";
    fate_d =  delayed_print "hacker!";

    fate_a ();
    fate_b ();
    fate_c ();
    fate_d ();
</PRE><P>When run, this produces exactly the same result as before:</P><PRE CLASS="verbatim">    linux$ ./my-script
    Just
    another
    Mythryl
    hacker!
    linux$
</PRE><P>In fact, this example may well compile into bit-for-bit the same binary 
code as before. The only difference is that now the <TT><BR>
</TT> statement 
constructing the fate <I>thunk</I> is implicit rather than explicit. </P><P>You may be tempted to think of the above <TT>delayed_print</TT> function as 
taking two arguments. A better way &#X2014; the Mythryl way &#X2014; of thinking 
about the matter is that the above <TT>fun delayed_print</TT> statement 
defines a function of one argument (a string) which then returns another 
function of one (void) argument: the fate <I>thunk</I>.</P><P>Thus, the api type declaration for such a function is</P><PRE CLASS="verbatim">    delayed_print:  String -&gt; (Void -&gt; Void);
</PRE><P>Which is to say, handing a string to <TT>delayed_print</TT> gives you 
in return a function, which when given a <I>Void</I> argument <TT>()</TT> 
returns a void value. (And in this case also prints something out, 
but the type system does not worry about that.)</P><P>Type arrows associate to the right, so in practice the above 
declaration is usually written without the parentheses:</P><PRE CLASS="verbatim">    delayed_print:  String -&gt; Void -&gt; Void;
</PRE><P>That looks a little confusing at first, but you quickly get 
used to it after seeing it a few times &#X2014; and you will be 
seeing it a <I>lot</I> in Mythryl. </P><P>Such function definitions are called <I>Curried</I> in honor of 
<A HREF="http://en.wikipedia.org/wiki/Haskell_Curry">Haskell Curry</A>, a functional programming pioneer widely admired for having a cool name. (This kind of function 
definition was actually invented by 
<A HREF="http://en.wikipedia.org/wiki/Moses_Sch%C3%B6nfinkel">Moses Ilyich Schönfinkel</A>, but nobody wants to talk about &#X201C;Schönfinkelled functions&#X201D;.)</P><P>An expression like <TT>delayed_print "Just";</TT> above is referred to 
as a <I>partial application</I> of the <TT>delayed_print</TT> function, 
since its final result will not be produced until the final <I>Void</I> 
argument <TT>()</TT> is supplied.</P><P>Partial application of curried functions is a concise, convenient 
way to produce fates. You will see this a lot in your 
reading of Mythryl code, and as you grow in proficiency as a 
Mythryl programmer you will find yourself taking advantage of this 
idiom steadily more frequently.</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Mythryl_Functions__Value_Capture.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-The_Full_Monte.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Mythryl_Functions__Parsing_Combinators_I.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
