<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>src/lib/x-kit/widget/old/basic/widget.pkg</TITLE>
</HEAD>
<BODY >
<A HREF="my-src_lib_x-kit_widget_old_basic_widget-types_pkg.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__pkg_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_x-kit_widget_old_basic_xevent-mail-router_pkg.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc3368">15.4.1480</A>  src/lib/x-kit/widget/old/basic/widget.pkg</H3><P>
<A NAME="src/lib/x-kit/widget/old/basic/widget.pkg"></A>
<CODE>##&nbsp;widget.pkg</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;See&nbsp;bottom-of-file&nbsp;comments&nbsp;for</CODE><BR>
<CODE>#&nbsp;extended&nbsp;widget-internals&nbsp;docs.</CODE><BR><BR>
<CODE>#&nbsp;Compiled&nbsp;by:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_xkit-widget_sublib.html#src/lib/x-kit/widget/xkit-widget.sublib"><TT>src/lib/x-kit/widget/xkit-widget.sublib</TT></A><BR><BR><BR><BR><CODE>###&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Steve&nbsp;Jobs&nbsp;said&nbsp;two&nbsp;years&nbsp;ago</CODE><BR>
<CODE>###&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;X&nbsp;is&nbsp;brain-damaged&nbsp;and</CODE><BR>
<CODE>###&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;will&nbsp;be&nbsp;gone&nbsp;in&nbsp;two&nbsp;years.</CODE><BR>
<CODE>###&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;He&nbsp;was&nbsp;half&nbsp;right."</CODE><BR>
<CODE>###</CODE><BR>
<CODE>###&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Dennis&nbsp;Ritchie</CODE><BR><BR><BR><BR>
<CODE>stipulate</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;package&nbsp;&nbsp;&nbsp;threadkit;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;threadkit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_threadkit_pkg.html#src/lib/src/lib/thread-kit/src/core-thread-kit/threadkit.pkg"><TT>src/lib/src/lib/thread-kit/src/core-thread-kit/threadkit.pkg</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;xc&nbsp;=&nbsp;&nbsp;xclient;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;xclient&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_xclient_pkg.html#src/lib/x-kit/xclient/xclient.pkg"><TT>src/lib/x-kit/xclient/xclient.pkg</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;g2d=&nbsp;&nbsp;geometry2d;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;geometry2d&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_std_2d_geometry2d_pkg.html#src/lib/std/2d/geometry2d.pkg"><TT>src/lib/std/2d/geometry2d.pkg</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;rw&nbsp;=&nbsp;&nbsp;root_window_old;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;root_window_old&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_root-window-old_pkg.html#src/lib/x-kit/widget/old/basic/root-window-old.pkg"><TT>src/lib/x-kit/widget/old/basic/root-window-old.pkg</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;wa&nbsp;=&nbsp;&nbsp;widget_attribute_old;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;widget_attribute_old&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_lib_widget-attribute-old_pkg.html#src/lib/x-kit/widget/old/lib/widget-attribute-old.pkg"><TT>src/lib/x-kit/widget/old/lib/widget-attribute-old.pkg</TT></A><BR><CODE>herein</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;&nbsp;&nbsp;widget</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;(weak)&nbsp;&nbsp;Widget&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Widget&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_widget_api.html#src/lib/x-kit/widget/old/basic/widget.api"><TT>src/lib/x-kit/widget/old/basic/widget.api</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;package&nbsp;&nbsp;&nbsp;widget_base;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;widget_base&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_widget-base_pkg.html#src/lib/x-kit/widget/old/basic/widget-base.pkg"><TT>src/lib/x-kit/widget/old/basic/widget-base.pkg</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;package&nbsp;&nbsp;&nbsp;root_window_old;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;root_window_old&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_root-window-old_pkg.html#src/lib/x-kit/widget/old/basic/root-window-old.pkg"><TT>src/lib/x-kit/widget/old/basic/root-window-old.pkg</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;package&nbsp;&nbsp;&nbsp;widget_attributes;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;widget_attributes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_widget-attributes_pkg.html#src/lib/x-kit/widget/old/basic/widget-attributes.pkg"><TT>src/lib/x-kit/widget/old/basic/widget-attributes.pkg</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;These&nbsp;three&nbsp;are&nbsp;all&nbsp;specified&nbsp;by&nbsp;api&nbsp;Widget.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arg&nbsp;=&nbsp;(wa::Name,&nbsp;wa::Value);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Realize_Widget</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;kidplug:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xc::Kidplug,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xc::Window,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window_size:&nbsp;&nbsp;g2d::Size</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Void;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Soon&nbsp;we'll&nbsp;want&nbsp;to&nbsp;change&nbsp;all&nbsp;the&nbsp;Size&nbsp;values</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;in&nbsp;this&nbsp;file&nbsp;to&nbsp;Box&nbsp;values,&nbsp;so&nbsp;as&nbsp;to&nbsp;track&nbsp;the</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;full&nbsp;size+position&nbsp;info&nbsp;relative&nbsp;to&nbsp;parent&nbsp;for</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;each&nbsp;window.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exception&nbsp;ALREADY_REALIZED;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Widget</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WIDGET</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root_window:&nbsp;&nbsp;&nbsp;&nbsp;Root_Window,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Int,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Window_Args,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_preference_thunk_of:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Widget_Size_Preference,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seen_first_redraw:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Oneshot_Maildrop(&nbsp;Void&nbsp;),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;realized:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Oneshot_Maildrop(&nbsp;Void&nbsp;),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;realize_widget:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Realize_Widget,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Support&nbsp;for&nbsp;window_of.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;This&nbsp;ise&nbsp;NULL&nbsp;until&nbsp;realization</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;and&nbsp;non-NULL&nbsp;thereafter:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ref(&nbsp;Null_Or(xc::Window)&nbsp;)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;make_widget&nbsp;{&nbsp;root_window&nbsp;as&nbsp;{&nbsp;next_widget_id,&nbsp;...&nbsp;}:&nbsp;Root_Window,&nbsp;args,&nbsp;size_preference_thunk_of,&nbsp;realize_widget&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WIDGET</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root_window,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;realized&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&nbsp;make_oneshot_maildrop&nbsp;(),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seen_first_redraw&nbsp;=&gt;&nbsp;&nbsp;make_oneshot_maildrop&nbsp;(),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt;&nbsp;&nbsp;next_widget_id&nbsp;(),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_preference_thunk_of,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;realize_widget,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window&nbsp;&nbsp;&nbsp;=&gt;&nbsp;REF&nbsp;NULL</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;root_window_of&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;root_window,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;&nbsp;root_window;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;args_of&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;args,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;&nbsp;args&nbsp;();</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;args_fn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;args,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;&nbsp;args;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;window_of&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;window&nbsp;=&gt;&nbsp;REF&nbsp;(THE&nbsp;window),&nbsp;...&nbsp;}&nbsp;)&nbsp;=&gt;&nbsp;&nbsp;window;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window_of&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;window&nbsp;=&gt;&nbsp;REF&nbsp;&nbsp;NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&gt;&nbsp;&nbsp;raise&nbsp;exception&nbsp;&nbsp;DIE&nbsp;"widget::window_of&nbsp;called&nbsp;before&nbsp;realization";</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end;</CODE><BR><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;size_of&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;size&nbsp;&nbsp;&nbsp;=&gt;&nbsp;REF&nbsp;(THE&nbsp;size),&nbsp;&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&gt;&nbsp;&nbsp;size;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_of&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;size&nbsp;&nbsp;&nbsp;=&gt;&nbsp;REF&nbsp;&nbsp;NULL,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&gt;&nbsp;&nbsp;raise&nbsp;exception&nbsp;&nbsp;DIE&nbsp;"widget::size_of&nbsp;called&nbsp;before&nbsp;realization";</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;size_preference_of&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;size_preference_thunk_of,&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;&nbsp;size_preference_thunk_of&nbsp;();</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;size_preference_thunk_of&nbsp;(WIDGET&nbsp;{&nbsp;size_preference_thunk_of,&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;&nbsp;size_preference_thunk_of;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;seen_first_redraw_oneshot_of&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;seen_first_redraw,&nbsp;&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;&nbsp;seen_first_redraw;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;realize_widget</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;realize_widget,&nbsp;realized,&nbsp;window&nbsp;=&gt;&nbsp;window_ref,&nbsp;seen_first_redraw,&nbsp;...&nbsp;}&nbsp;)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(arg&nbsp;as&nbsp;{&nbsp;kidplug,&nbsp;window,&nbsp;window_size&nbsp;}&nbsp;)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;put_in_oneshot&nbsp;(realized,&nbsp;())</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;=&nbsp;raise&nbsp;exception&nbsp;ALREADY_REALIZED;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Cache&nbsp;window&nbsp;as&nbsp;support&nbsp;for&nbsp;window_of:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window_ref&nbsp;:=&nbsp;&nbsp;THE&nbsp;window;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Post&nbsp;&nbsp;seen_first_redraw&nbsp;&nbsp;oneshot&nbsp;as&nbsp;support&nbsp;for</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;seen_first_redraw_oneshot_of</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xc::note_''seen_first_expose''_oneshot&nbsp;&nbsp;window&nbsp;&nbsp;seen_first_redraw;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;realize_widget&nbsp;arg;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;same_widget</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;WIDGET&nbsp;{&nbsp;id,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root_window,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;},</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WIDGET&nbsp;{&nbsp;id=&gt;id',&nbsp;root_window=&gt;root_window',&nbsp;...&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;==&nbsp;id'</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;same_root&nbsp;(root_window,&nbsp;root_window');</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;preferred_size&nbsp;(WIDGET&nbsp;{&nbsp;size_preference_thunk_of,&nbsp;...&nbsp;}&nbsp;)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;my&nbsp;{&nbsp;col_preference,&nbsp;row_preference&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_preference_thunk_of&nbsp;();</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;wide&nbsp;=&gt;&nbsp;preferred_length&nbsp;col_preference,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;high&nbsp;=&gt;&nbsp;preferred_length&nbsp;row_preference</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;okay_size&nbsp;(widget,&nbsp;size)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is_within_size_limits&nbsp;(size_preference_of&nbsp;widget,&nbsp;size);</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Given&nbsp;a&nbsp;widget,&nbsp;return&nbsp;a&nbsp;replacement&nbsp;widget</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;in&nbsp;which&nbsp;the&nbsp;'keyboard',&nbsp;'mouse'&nbsp;or&nbsp;'other'</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;eventstream&nbsp;is&nbsp;replaced&nbsp;by&nbsp;an&nbsp;externally</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;filtered&nbsp;version&nbsp;of&nbsp;the&nbsp;original&nbsp;one.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;To&nbsp;be&nbsp;effective,&nbsp;this&nbsp;needs&nbsp;to&nbsp;be&nbsp;done&nbsp;pre-realization.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;We&nbsp;return&nbsp;a&nbsp;pair:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;o&nbsp;The&nbsp;replacement&nbsp;widget.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;o&nbsp;A&nbsp;mailop&nbsp;yielding&nbsp;a&nbsp;(read-mailop,&nbsp;write-slot)&nbsp;pair</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;used&nbsp;to&nbsp;perform&nbsp;the&nbsp;desired&nbsp;event&nbsp;filtering.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Arguments:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which_eventstream&nbsp;&nbsp;&nbsp;extracts&nbsp;from&nbsp;a&nbsp;kidplug&nbsp;either&nbsp;from_mouse',&nbsp;from_keyboard'&nbsp;or&nbsp;from_other'.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace_eventstream&nbsp;&nbsp;is&nbsp;one&nbsp;of&nbsp;replace_mouse,&nbsp;replace_keyboard,&nbsp;replace_other&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_src_window_widget-cable-old_pkg.html#src/lib/x-kit/xclient/src/window/widget-cable-old.pkg"><TT>src/lib/x-kit/xclient/src/window/widget-cable-old.pkg</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;it&nbsp;does&nbsp;functional&nbsp;update&nbsp;of&nbsp;a&nbsp;kidplug,&nbsp;replacing&nbsp;one&nbsp;component.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;widget&nbsp;to&nbsp;filter.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;filter_widget</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(which_eventstream,&nbsp;replace_eventstream)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;root_window,&nbsp;realize_widget,&nbsp;size_preference_thunk_of,&nbsp;args,&nbsp;...&nbsp;}&nbsp;)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;realize_slot&nbsp;=&nbsp;make_mailslot&nbsp;();</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;realize_widget'&nbsp;{&nbsp;window,&nbsp;kidplug,&nbsp;window_size&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;event&nbsp;=&nbsp;which_eventstream&nbsp;kidplug;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eslot&nbsp;=&nbsp;make_mailslot&nbsp;();</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kidplug'&nbsp;=&nbsp;&nbsp;replace_eventstream&nbsp;&nbsp;(kidplug,&nbsp;&nbsp;take_from_mailslot'&nbsp;eslot);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;put_in_mailslot&nbsp;&nbsp;(realize_slot,&nbsp;&nbsp;(event,&nbsp;eslot));</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;realize_widget&nbsp;{&nbsp;window,&nbsp;window_size,&nbsp;kidplug=&gt;kidplug'};</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;make_widget</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root_window,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_preference_thunk_of,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;realize_widget&nbsp;=&gt;&nbsp;realize_widget'</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;take_from_mailslot'&nbsp;&nbsp;realize_slot</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter_mouse&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;filter_widget&nbsp;&nbsp;(\\&nbsp;(xc::KIDPLUG&nbsp;{&nbsp;from_mouse',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;from_mouse',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xc::replace_mouse&nbsp;&nbsp;&nbsp;);</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter_keyboard&nbsp;=&nbsp;&nbsp;filter_widget&nbsp;&nbsp;(\\&nbsp;(xc::KIDPLUG&nbsp;{&nbsp;from_keyboard',&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;from_keyboard',&nbsp;&nbsp;&nbsp;xc::replace_keyboard);</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter_other&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;filter_widget&nbsp;&nbsp;(\\&nbsp;(xc::KIDPLUG&nbsp;{&nbsp;from_other',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;from_other',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xc::replace_other&nbsp;&nbsp;&nbsp;);</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;ignore_widget</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(which_eventstream,&nbsp;replace_eventstream)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;root_window,&nbsp;realize_widget,&nbsp;size_preference_thunk_of,&nbsp;args,&nbsp;...&nbsp;}&nbsp;)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;fun&nbsp;realize_widget'&nbsp;{&nbsp;window,&nbsp;window_size,&nbsp;kidplug&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;fun&nbsp;discard_all_input&nbsp;&nbsp;mailop&nbsp;&nbsp;()</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(;;)&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;block_until_mailop_fires&nbsp;&nbsp;mailop;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Replace&nbsp;original&nbsp;kidplug&nbsp;eventstream&nbsp;with</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;a&nbsp;null&nbsp;stream&nbsp;--&nbsp;anyone&nbsp;who&nbsp;attempts&nbsp;to&nbsp;read</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;it&nbsp;will&nbsp;block&nbsp;forever:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kidplug'</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replace_eventstream</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;kidplug,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_from_oneshot'&nbsp;(make_oneshot_maildrop&nbsp;())</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make_thread&nbsp;"widget"&nbsp;(discard_all_input&nbsp;(which_eventstream&nbsp;kidplug));</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;realize_widget&nbsp;{&nbsp;window,&nbsp;window_size,&nbsp;kidplug=&gt;kidplug'};</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;make_widget</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;root_window,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size_preference_thunk_of,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;realize_widget&nbsp;=&gt;&nbsp;realize_widget'</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ignore_mouse&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;&nbsp;ignore_widget&nbsp;&nbsp;&nbsp;(\\&nbsp;(xc::KIDPLUG&nbsp;{&nbsp;from_mouse',&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;from_mouse',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xc::replace_mouse&nbsp;&nbsp;&nbsp;);</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ignore_keyboard&nbsp;=&nbsp;&nbsp;ignore_widget&nbsp;&nbsp;&nbsp;(\\&nbsp;(xc::KIDPLUG&nbsp;{&nbsp;from_keyboard',&nbsp;...&nbsp;}&nbsp;)&nbsp;=&nbsp;from_keyboard',&nbsp;&nbsp;xc::replace_keyboard);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Relief&nbsp;==&nbsp;three_d::Relief;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Attribute_Spec&nbsp;=&nbsp;(wa::Name,&nbsp;wa::Type,&nbsp;wa::Value);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun&nbsp;get_''gui_startup_complete''_oneshot_of</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(WIDGET&nbsp;{&nbsp;root_window,&nbsp;...&nbsp;})</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xc::get_''gui_startup_complete''_oneshot_of_xsession&nbsp;&nbsp;(rw::xsession_of&nbsp;&nbsp;root_window);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;package&nbsp;widget&nbsp;</CODE><BR><BR>
<CODE>end;</CODE><BR><BR><BR>
<CODE>#&nbsp;Prior&nbsp;reading:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Before&nbsp;reading&nbsp;this&nbsp;section&nbsp;you&nbsp;will&nbsp;want&nbsp;to&nbsp;have</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read&nbsp;the&nbsp;bottom-of-file&nbsp;comments&nbsp;in:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_widget_api.html#src/lib/x-kit/widget/old/basic/widget.api"><TT>src/lib/x-kit/widget/old/basic/widget.api</TT></A><BR><CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Widget&nbsp;Internals</CODE><BR>
<CODE>#&nbsp;================</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(The&nbsp;following&nbsp;comments&nbsp;are&nbsp;adapted&nbsp;from&nbsp;Chapter&nbsp;5&nbsp;of</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://mythryl.org/pub/exene/1993-widgets.ps</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Gansner+Reppy's&nbsp;1993&nbsp;eXene&nbsp;widget&nbsp;manual.)</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;Widget&nbsp;creation&nbsp;is&nbsp;usually&nbsp;simple:</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Compute&nbsp;some&nbsp;parameters;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Allocate&nbsp;resources&nbsp;such&nbsp;as&nbsp;fonts,&nbsp;colors&nbsp;or&nbsp;pixmaps;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Possibly&nbsp;spawn&nbsp;a&nbsp;thread&nbsp;encapsulating&nbsp;mutual&nbsp;widget&nbsp;state.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;No&nbsp;X&nbsp;window&nbsp;is&nbsp;created&nbsp;at&nbsp;this&nbsp;point.</CODE><BR>
<CODE>#&nbsp;The&nbsp;widget&nbsp;value&nbsp;returned&nbsp;by&nbsp;make_widget&nbsp;wraps</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;The&nbsp;relevant&nbsp;Root_Window;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;a&nbsp;size_preference&nbsp;function;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;a&nbsp;realize&nbsp;function.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Realize&nbsp;functions</CODE><BR>
<CODE>#&nbsp;-----------------</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;In&nbsp;x-kit&nbsp;each&nbsp;parent&nbsp;widget&nbsp;controls&nbsp;the&nbsp;resources&nbsp;of&nbsp;its&nbsp;kid(s):</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;It&nbsp;allocates&nbsp;the&nbsp;child's&nbsp;X&nbsp;window;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;It&nbsp;positions&nbsp;that&nbsp;window&nbsp;on&nbsp;the&nbsp;screen;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;It&nbsp;sizes&nbsp;that&nbsp;window;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Ultimately,&nbsp;it&nbsp;deletes&nbsp;that&nbsp;window.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;When&nbsp;a&nbsp;child&nbsp;needs&nbsp;any&nbsp;of&nbsp;these&nbsp;actions&nbsp;performed</CODE><BR>
<CODE>#&nbsp;it&nbsp;sends&nbsp;a&nbsp;request&nbsp;to&nbsp;its&nbsp;parent.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;When&nbsp;a&nbsp;parent&nbsp;invokes&nbsp;the&nbsp;realize&nbsp;function&nbsp;of&nbsp;a&nbsp;child</CODE><BR>
<CODE>#&nbsp;it&nbsp;passes&nbsp;it&nbsp;three&nbsp;parameters:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;The&nbsp;Kidplug&nbsp;end&nbsp;of&nbsp;the&nbsp;Widget_Cable&nbsp;from</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;the&nbsp;child&nbsp;receives&nbsp;mouse&nbsp;and&nbsp;keyboard</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;input&nbsp;and&nbsp;through&nbsp;which&nbsp;it&nbsp;sends&nbsp;parent&nbsp;requests.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;The&nbsp;child's&nbsp;window.&nbsp;(The&nbsp;canvas&nbsp;on&nbsp;which&nbsp;the&nbsp;child&nbsp;draws&nbsp;itself.)</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;The&nbsp;size&nbsp;of&nbsp;that&nbsp;window.&nbsp;(Supplied&nbsp;for&nbsp;convenience.)</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;The&nbsp;parent&nbsp;will&nbsp;size&nbsp;the&nbsp;child's&nbsp;window&nbsp;taking&nbsp;into</CODE><BR>
<CODE>#&nbsp;account&nbsp;its&nbsp;expressed&nbsp;size&nbsp;preference.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;child&nbsp;widget's&nbsp;realize&nbsp;function&nbsp;must:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Configure&nbsp;itself&nbsp;per&nbsp;its&nbsp;assigned&nbsp;window&nbsp;size.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Spawn&nbsp;the&nbsp;threads&nbsp;it&nbsp;needs&nbsp;to&nbsp;draw&nbsp;itself&nbsp;and</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;keyboard&nbsp;and&nbsp;mouse&nbsp;input&nbsp;appropriately.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;For&nbsp;layout&nbsp;widgets,&nbsp;the&nbsp;realize&nbsp;function&nbsp;must</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Lay&nbsp;out&nbsp;its&nbsp;children;</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Allocate&nbsp;their&nbsp;X&nbsp;windows;</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Arrange&nbsp;handling&nbsp;of&nbsp;its&nbsp;end</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;their&nbsp;Widget_Cable&nbsp;traffic.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Call&nbsp;their&nbsp;realize&nbsp;functions.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;Map&nbsp;their&nbsp;windows.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(A&nbsp;leaf&nbsp;widget&nbsp;should&nbsp;not&nbsp;un/map&nbsp;itself.)</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Handling&nbsp;Keyboard&nbsp;and&nbsp;Mouse&nbsp;Events</CODE><BR>
<CODE>#&nbsp;----------------------------------</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Keyboard&nbsp;input&nbsp;arrives&nbsp;via&nbsp;the&nbsp;Kidplug</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from_keyboard'</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;mailop&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;Keyboard_Mail&nbsp;messages.</CODE><BR>
<CODE>#&nbsp;These&nbsp;specify&nbsp;whether&nbsp;the&nbsp;event&nbsp;was&nbsp;a&nbsp;keypress</CODE><BR>
<CODE>#&nbsp;or&nbsp;key&nbsp;release,&nbsp;the&nbsp;X&nbsp;keysym&nbsp;of&nbsp;that&nbsp;key,&nbsp;and</CODE><BR>
<CODE>#&nbsp;the&nbsp;state&nbsp;of&nbsp;the&nbsp;modifier&nbsp;keys,&nbsp;in&nbsp;particular</CODE><BR>
<CODE>#&nbsp;the&nbsp;shift&nbsp;and&nbsp;control&nbsp;keys.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;For&nbsp;details&nbsp;see:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_src_window_widget-cable-old_pkg.html#src/lib/x-kit/xclient/src/window/widget-cable-old.pkg"><TT>src/lib/x-kit/xclient/src/window/widget-cable-old.pkg</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;For&nbsp;translation&nbsp;of&nbsp;keysyms&nbsp;into&nbsp;ascii&nbsp;characters&nbsp;see:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_src_window_keysym-to-ascii_api.html#src/lib/x-kit/xclient/src/window/keysym-to-ascii.api"><TT>src/lib/x-kit/xclient/src/window/keysym-to-ascii.api</TT></A><BR><CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;Mouse&nbsp;input&nbsp;arrives&nbsp;via&nbsp;the&nbsp;Kidplug</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from_mouse'</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;mailop&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;Mouse_Mail&nbsp;messages.</CODE><BR>
<CODE>#&nbsp;These&nbsp;signal&nbsp;mouse&nbsp;button&nbsp;press&nbsp;and&nbsp;release&nbsp;events,</CODE><BR>
<CODE>#&nbsp;mouse&nbsp;motions&nbsp;and&nbsp;window&nbsp;enter/leave&nbsp;events.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;IMPORTANT:&nbsp;&nbsp;X-kit&nbsp;guarantees&nbsp;that&nbsp;when&nbsp;a&nbsp;widget&nbsp;receives</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;mouse&nbsp;buttonpress&nbsp;that&nbsp;it&nbsp;will&nbsp;receive&nbsp;all&nbsp;mouse</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;events&nbsp;until&nbsp;all&nbsp;mouse&nbsp;buttons&nbsp;have&nbsp;been&nbsp;released.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;corresponds&nbsp;to&nbsp;an&nbsp;"active&nbsp;grab"&nbsp;in&nbsp;X&nbsp;jargon.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;first&nbsp;mouse&nbsp;button&nbsp;event&nbsp;a&nbsp;widget&nbsp;receives&nbsp;is&nbsp;always&nbsp;a</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MOUSE_FIRST_DOWN</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;message,&nbsp;and&nbsp;the&nbsp;last&nbsp;is&nbsp;always</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MOUSE_LAST_UP</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;Handling&nbsp;Non-keyboard,&nbsp;Non-mouse&nbsp;Events</CODE><BR>
<CODE>#&nbsp;---------------------------------------</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Messages&nbsp;not&nbsp;correspondingly&nbsp;directly&nbsp;to&nbsp;user&nbsp;input</CODE><BR>
<CODE>#&nbsp;arrive&nbsp;via&nbsp;the&nbsp;Kidplug</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from_other'</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;mailop&nbsp;in&nbsp;the&nbsp;form&nbsp;of&nbsp;Other_Mail&nbsp;messages:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;ETC_REDRAW:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Signals&nbsp;an&nbsp;X&nbsp;Expose&nbsp;event,&nbsp;listing&nbsp;one&nbsp;or&nbsp;more</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rectangular&nbsp;parts&nbsp;of&nbsp;the&nbsp;widget&nbsp;window&nbsp;which&nbsp;need</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;be&nbsp;redrawn.&nbsp;&nbsp;It&nbsp;is&nbsp;always&nbsp;safe&nbsp;to&nbsp;redraw&nbsp;the</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entire&nbsp;window,&nbsp;but&nbsp;redrawing&nbsp;just&nbsp;the&nbsp;indicated</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parts&nbsp;may&nbsp;be&nbsp;quicker.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;ETC_RESIZE:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Notifies&nbsp;widget&nbsp;that&nbsp;its&nbsp;window&nbsp;has&nbsp;been&nbsp;moved</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;resized,&nbsp;and&nbsp;gives&nbsp;the&nbsp;current&nbsp;size&nbsp;and&nbsp;location.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Any&nbsp;required&nbsp;resizing&nbsp;has&nbsp;already&nbsp;been&nbsp;done&nbsp;by&nbsp;parent.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layout&nbsp;widgets&nbsp;will&nbsp;need&nbsp;to&nbsp;recompute&nbsp;their&nbsp;layout</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upon&nbsp;receiving&nbsp;this&nbsp;message&nbsp;and&nbsp;perhaps&nbsp;use</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move_window,&nbsp;resize_window&nbsp;and/or&nbsp;move_and_resize_window</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;reposition&nbsp;them:&nbsp;&nbsp;See</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_src_window_window-old_api.html#src/lib/x-kit/xclient/src/window/window-old.api"><TT>src/lib/x-kit/xclient/src/window/window-old.api</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Layout&nbsp;widgets&nbsp;need&nbsp;not&nbsp;explicitly&nbsp;send&nbsp;ETC_RESIZE</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messages&nbsp;their&nbsp;children;&nbsp;such&nbsp;messages&nbsp;will&nbsp;be</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generated&nbsp;as&nbsp;needed&nbsp;by&nbsp;the&nbsp;above&nbsp;calls.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;is&nbsp;not&nbsp;necessary&nbsp;(or&nbsp;good)&nbsp;to&nbsp;redraw&nbsp;upon</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;receiving&nbsp;a&nbsp;ETC_RESIZE;&nbsp;separate&nbsp;ETC_REDRAW</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messages&nbsp;will&nbsp;be&nbsp;sent&nbsp;automatically&nbsp;as&nbsp;appropriate.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;ETC_OWN_DEATH:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Our&nbsp;window&nbsp;has&nbsp;been&nbsp;destroyed.&nbsp;&nbsp;We&nbsp;must&nbsp;stop</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawing&nbsp;on&nbsp;our&nbsp;window,&nbsp;but&nbsp;continue&nbsp;to&nbsp;read</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;any&nbsp;mouse&nbsp;and&nbsp;keyboard&nbsp;events&nbsp;which&nbsp;might&nbsp;be</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;still&nbsp;en&nbsp;route.&nbsp;&nbsp;(One&nbsp;approach&nbsp;is&nbsp;to&nbsp;attach</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;simple&nbsp;null&nbsp;loops&nbsp;to&nbsp;the&nbsp;from_keyboard'&nbsp;and</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from_mouse'&nbsp;mailops.)</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;ETC_CHILD_BIRTH:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;ETC_CHILD_DEATH:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used&nbsp;by&nbsp;layout&nbsp;widgets&nbsp;to&nbsp;coordinate&nbsp;mail&nbsp;routing.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;Asking&nbsp;Mommy&nbsp;For&nbsp;Help</CODE><BR>
<CODE>#&nbsp;---------------------</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;A&nbsp;widget&nbsp;requests&nbsp;parental&nbsp;favors&nbsp;via&nbsp;the&nbsp;Kidplug.to_mom&nbsp;function:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;REQ_RESIZE:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Asks&nbsp;parent&nbsp;to&nbsp;resize&nbsp;us.&nbsp;&nbsp;Parent&nbsp;will&nbsp;call</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;our&nbsp;size_preference&nbsp;function&nbsp;to&nbsp;get&nbsp;our</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(presumably&nbsp;changed)&nbsp;size&nbsp;preference&nbsp;and</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(maybe)&nbsp;reposition/resize&nbsp;us&nbsp;accordingly.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;parent&nbsp;is&nbsp;not&nbsp;obligated&nbsp;to&nbsp;respond&nbsp;to</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;request;&nbsp;&nbsp;the&nbsp;child&nbsp;should&nbsp;not&nbsp;assume</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;anything&nbsp;has&nbsp;changed&nbsp;unless/until&nbsp;it&nbsp;receive</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;an&nbsp;ETC_RESIZE&nbsp;message.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;REQ_DESTRUCTION:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Child&nbsp;&nbsp;wishes&nbsp;its&nbsp;window&nbsp;destroyed.&nbsp;&nbsp;Parent</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;attempt&nbsp;this&nbsp;via&nbsp;window::destroy_window:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_src_window_window-old_api.html#src/lib/x-kit/xclient/src/window/window-old.api"><TT>src/lib/x-kit/xclient/src/window/window-old.api</TT></A><BR><CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Child&nbsp;will&nbsp;get&nbsp;an&nbsp;ETC_OWN_DEATH&nbsp;message&nbsp;on&nbsp;completion.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Layout&nbsp;and&nbsp;Wrapper&nbsp;Widgets</CODE><BR>
<CODE>#&nbsp;--------------------------</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Layout&nbsp;widgets&nbsp;arrange&nbsp;multiple&nbsp;visible&nbsp;children.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Wrapper&nbsp;widgets&nbsp;usually&nbsp;have&nbsp;just&nbsp;one&nbsp;visible&nbsp;child,</CODE><BR>
<CODE>#&nbsp;performing&nbsp;some&nbsp;service&nbsp;such&nbsp;as&nbsp;sizing&nbsp;it&nbsp;or&nbsp;drawing</CODE><BR>
<CODE>#&nbsp;a&nbsp;border&nbsp;around&nbsp;it.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Layout&nbsp;and&nbsp;wrapper&nbsp;widgets&nbsp;must&nbsp;handle&nbsp;the&nbsp;Kidplug</CODE><BR>
<CODE>#&nbsp;end&nbsp;of&nbsp;their&nbsp;own&nbsp;Widget_Cable&nbsp;just&nbsp;like&nbsp;any&nbsp;leaf</CODE><BR>
<CODE>#&nbsp;widget,&nbsp;and&nbsp;must&nbsp;in&nbsp;addition&nbsp;handle&nbsp;the&nbsp;Momplug</CODE><BR>
<CODE>#&nbsp;ends&nbsp;of&nbsp;the&nbsp;cable(s)&nbsp;leading&nbsp;to&nbsp;their&nbsp;kid(s).</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Tasks&nbsp;include:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Geometric&nbsp;layout&nbsp;of&nbsp;kids&nbsp;within&nbsp;own&nbsp;window.</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Creating&nbsp;windows&nbsp;and&nbsp;cables&nbsp;for&nbsp;kids.</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Calling&nbsp;child&nbsp;realize&nbsp;function(s).</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;Mapping&nbsp;child&nbsp;windows.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;By&nbsp;convention&nbsp;x-kit&nbsp;windows&nbsp;do&nbsp;not&nbsp;explicitly</CODE><BR>
<CODE>#&nbsp;use&nbsp;the&nbsp;X&nbsp;server&nbsp;border&nbsp;or&nbsp;background&nbsp;properties,</CODE><BR>
<CODE>#&nbsp;instead&nbsp;using&nbsp;wrapper&nbsp;widgets&nbsp;to&nbsp;implement&nbsp;this</CODE><BR>
<CODE>#&nbsp;functionality.&nbsp;&nbsp;This&nbsp;is&nbsp;intended&nbsp;to&nbsp;yield&nbsp;cleaner</CODE><BR>
<CODE>#&nbsp;and&nbsp;more&nbsp;consistent&nbsp;code&nbsp;better&nbsp;insulated&nbsp;from</CODE><BR>
<CODE>#&nbsp;X&nbsp;idiosyncracies;&nbsp;&nbsp;for&nbsp;example&nbsp;widgets&nbsp;need</CODE><BR>
<CODE>#&nbsp;not&nbsp;take&nbsp;border&nbsp;presence&nbsp;or&nbsp;thickness&nbsp;into&nbsp;account</CODE><BR>
<CODE>#&nbsp;when&nbsp;computing&nbsp;their&nbsp;geometry.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Widget&nbsp;authors&nbsp;are&nbsp;encouraged&nbsp;to&nbsp;use&nbsp;make_child_window()</CODE><BR>
<CODE>#&nbsp;to&nbsp;create&nbsp;child&nbsp;windows,&nbsp;as&nbsp;it&nbsp;both&nbsp;automates</CODE><BR>
<CODE>#&nbsp;busywork&nbsp;and&nbsp;implements&nbsp;expected&nbsp;conventions.&nbsp;See:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_widget-base_api.html#src/lib/x-kit/widget/old/basic/widget-base.api"><TT>src/lib/x-kit/widget/old/basic/widget-base.api</TT></A><BR><CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_widget-base_pkg.html#src/lib/x-kit/widget/old/basic/widget-base.pkg"><TT>src/lib/x-kit/widget/old/basic/widget-base.pkg</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;Widget&nbsp;cables&nbsp;are&nbsp;created&nbsp;using</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;widget_cable::make_widget_cable()&nbsp;:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;from</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_src_window_widget-cable-old_pkg.html#src/lib/x-kit/xclient/src/window/widget-cable-old.pkg"><TT>src/lib/x-kit/xclient/src/window/widget-cable-old.pkg</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;Wrapper&nbsp;and&nbsp;layout&nbsp;widgets&nbsp;have&nbsp;a&nbsp;Momplug&nbsp;for&nbsp;each</CODE><BR>
<CODE>#&nbsp;child,&nbsp;which&nbsp;they&nbsp;must&nbsp;service&nbsp;promptly.&nbsp;("Parents</CODE><BR>
<CODE>#&nbsp;should&nbsp;be&nbsp;more&nbsp;responsible&nbsp;than&nbsp;their&nbsp;children.")</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;REQ_RESIZE&nbsp;and&nbsp;REQ_DESTRUCTION&nbsp;messages&nbsp;should&nbsp;be</CODE><BR>
<CODE>#&nbsp;handled&nbsp;as&nbsp;described&nbsp;above.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Note&nbsp;that&nbsp;a&nbsp;child's&nbsp;REQ_RESIZE&nbsp;message&nbsp;may&nbsp;be&nbsp;handled</CODE><BR>
<CODE>#&nbsp;locally&nbsp;using&nbsp;the&nbsp;layout&nbsp;widget's&nbsp;current&nbsp;window&nbsp;size,</CODE><BR>
<CODE>#&nbsp;or&nbsp;the&nbsp;layout&nbsp;widget&nbsp;may&nbsp;in&nbsp;turn&nbsp;send&nbsp;a&nbsp;REQ_RESIZE&nbsp;of</CODE><BR>
<CODE>#&nbsp;its&nbsp;own&nbsp;to&nbsp;its&nbsp;own&nbsp;parent.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;BEWARE&nbsp;the&nbsp;deadlock&nbsp;potential&nbsp;in&nbsp;two-way&nbsp;communications</CODE><BR>
<CODE>#&nbsp;between&nbsp;parent&nbsp;and&nbsp;child!&nbsp;&nbsp;E.g&nbsp;deadlock&nbsp;can&nbsp;easily&nbsp;result</CODE><BR>
<CODE>#&nbsp;if&nbsp;a&nbsp;layout&nbsp;widget&nbsp;recomputing&nbsp;layout&nbsp;calls&nbsp;a&nbsp;child's</CODE><BR>
<CODE>#&nbsp;size&nbsp;preference&nbsp;function&nbsp;when&nbsp;the&nbsp;child,&nbsp;in&nbsp;response&nbsp;to</CODE><BR>
<CODE>#&nbsp;user&nbsp;input,&nbsp;is&nbsp;sending&nbsp;a&nbsp;REQ_RESIZE&nbsp;to&nbsp;the&nbsp;parent.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;x-kit&nbsp;convention&nbsp;is&nbsp;that&nbsp;it&nbsp;is&nbsp;the&nbsp;parent's&nbsp;responsibility</CODE><BR>
<CODE>#&nbsp;to&nbsp;always&nbsp;be&nbsp;receptive&nbsp;to&nbsp;child&nbsp;requests.&nbsp;&nbsp;The</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wrap_queue</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;function&nbsp;from</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_widget-base_api.html#src/lib/x-kit/widget/old/basic/widget-base.api"><TT>src/lib/x-kit/widget/old/basic/widget-base.api</TT></A><BR><CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_widget-base_pkg.html#src/lib/x-kit/widget/old/basic/widget-base.pkg"><TT>src/lib/x-kit/widget/old/basic/widget-base.pkg</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;may&nbsp;be&nbsp;used&nbsp;to&nbsp;wrap&nbsp;a&nbsp;queue&nbsp;around&nbsp;the&nbsp;Momplug.from_child'</CODE><BR>
<CODE>#&nbsp;mailop,&nbsp;assuring&nbsp;that&nbsp;the&nbsp;child&nbsp;will&nbsp;not&nbsp;block&nbsp;even</CODE><BR>
<CODE>#&nbsp;if&nbsp;the&nbsp;parent&nbsp;thread&nbsp;is&nbsp;occupied.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Mail&nbsp;Delivery:</CODE><BR>
<CODE>#&nbsp;..............</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;final&nbsp;task&nbsp;of&nbsp;layout&nbsp;and&nbsp;wrapper&nbsp;widgets&nbsp;is&nbsp;routing</CODE><BR>
<CODE>#&nbsp;X&nbsp;event&nbsp;mail&nbsp;that&nbsp;arrives&nbsp;via&nbsp;its&nbsp;Kidplug.&nbsp;&nbsp;Each&nbsp;Kidplug</CODE><BR>
<CODE>#&nbsp;message&nbsp;may&nbsp;be&nbsp;destined&nbsp;either&nbsp;for&nbsp;the&nbsp;widget&nbsp;itself&nbsp;or</CODE><BR>
<CODE>#&nbsp;for&nbsp;one&nbsp;of&nbsp;its&nbsp;children.&nbsp;The&nbsp;envelope&nbsp;on&nbsp;each&nbsp;incoming</CODE><BR>
<CODE>#&nbsp;mail&nbsp;message&nbsp;contains&nbsp;the&nbsp;route&nbsp;to&nbsp;its&nbsp;destination.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;input&nbsp;section&nbsp;of&nbsp;the&nbsp;xclient&nbsp;api&nbsp;defines&nbsp;various&nbsp;functions&nbsp;which</CODE><BR>
<CODE>#&nbsp;may&nbsp;be&nbsp;used&nbsp;to&nbsp;assist&nbsp;in&nbsp;deciding&nbsp;whether&nbsp;a&nbsp;given&nbsp;message&nbsp;is&nbsp;for&nbsp;the</CODE><BR>
<CODE>#&nbsp;widget&nbsp;itself&nbsp;or&nbsp;one&nbsp;of&nbsp;its&nbsp;children,&nbsp;and&nbsp;if&nbsp;so&nbsp;which&nbsp;child:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_xclient_api.html#src/lib/x-kit/xclient/xclient.api"><TT>src/lib/x-kit/xclient/xclient.api</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;Xevent_Mail_Router&nbsp;api&nbsp;defines&nbsp;functionality&nbsp;which&nbsp;can</CODE><BR>
<CODE>#&nbsp;handle&nbsp;most&nbsp;typical&nbsp;mail-routing&nbsp;situations:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_xevent-mail-router_api.html#src/lib/x-kit/widget/old/basic/xevent-mail-router.api"><TT>src/lib/x-kit/widget/old/basic/xevent-mail-router.api</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;At&nbsp;realization&nbsp;time&nbsp;a&nbsp;layout&nbsp;or&nbsp;wrapper&nbsp;widget&nbsp;can&nbsp;create</CODE><BR>
<CODE>#&nbsp;a&nbsp;router&nbsp;using&nbsp;make_xevent_mail_router(),&nbsp;passing&nbsp;it&nbsp;the</CODE><BR>
<CODE>#&nbsp;Kidplug&nbsp;that&nbsp;it&nbsp;received&nbsp;from&nbsp;its&nbsp;realize&nbsp;fn.&nbsp;&nbsp;The&nbsp;widget</CODE><BR>
<CODE>#&nbsp;will&nbsp;also&nbsp;need&nbsp;to&nbsp;create&nbsp;a&nbsp;new&nbsp;Widget_Cable,&nbsp;passing&nbsp;the</CODE><BR>
<CODE>#&nbsp;Momplug&nbsp;end&nbsp;to&nbsp;the&nbsp;make_xevent_mail_router()&nbsp;call;&nbsp;the</CODE><BR>
<CODE>#&nbsp;widget&nbsp;will&nbsp;read&nbsp;its&nbsp;own&nbsp;input&nbsp;from&nbsp;the&nbsp;Kidplug&nbsp;end&nbsp;of</CODE><BR>
<CODE>#&nbsp;that&nbsp;cable,&nbsp;while&nbsp;the&nbsp;new&nbsp;router&nbsp;sits&nbsp;between&nbsp;the</CODE><BR>
<CODE>#&nbsp;widget&nbsp;and&nbsp;its&nbsp;original&nbsp;parent,&nbsp;intercepting&nbsp;and</CODE><BR>
<CODE>#&nbsp;processing&nbsp;mail:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(parent)&nbsp;&gt;===&gt;</CODE><CODE>|&nbsp;xevent_mail_router&nbsp;|&gt;=====&gt;|&nbsp;widget&nbsp;|</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|----------------------|&nbsp;&nbsp;|&nbsp;&nbsp;|----------</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;|&nbsp;&nbsp;|</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New&nbsp;Momplug&nbsp;&nbsp;|&nbsp;&nbsp;New&nbsp;Kidplug&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Original&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Kidplug&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;New</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Widget_Cable</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;In&nbsp;addition,&nbsp;for&nbsp;each&nbsp;child&nbsp;widget,&nbsp;the&nbsp;layout/wrapper</CODE><BR>
<CODE>#&nbsp;widget&nbsp;will&nbsp;need&nbsp;to&nbsp;create&nbsp;another&nbsp;Widget_Cable,&nbsp;passing</CODE><BR>
<CODE>#&nbsp;the&nbsp;Kidplug&nbsp;end&nbsp;to&nbsp;the&nbsp;child&nbsp;through&nbsp;its&nbsp;realize&nbsp;fn</CODE><BR>
<CODE>#&nbsp;while&nbsp;registering&nbsp;the&nbsp;child's&nbsp;Momplug&nbsp;and&nbsp;window&nbsp;with</CODE><BR>
<CODE>#&nbsp;the&nbsp;router&nbsp;via&nbsp;its&nbsp;add_child()&nbsp;call.&nbsp;&nbsp;(The&nbsp;child&nbsp;widgets</CODE><BR>
<CODE>#&nbsp;may&nbsp;also&nbsp;be&nbsp;passed&nbsp;in&nbsp;via&nbsp;the&nbsp;make_xevent_mail_router()</CODE><BR>
<CODE>#&nbsp;call.)&nbsp;&nbsp;The&nbsp;resulting&nbsp;topology&nbsp;winds&nbsp;up&nbsp;looking&nbsp;like:</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(parent)&nbsp;&gt;===&gt;</CODE><CODE>|&nbsp;xevent_mail_router&nbsp;|&gt;=====&gt;|&nbsp;widget&nbsp;|</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------------------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;----------</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||----&nbsp;more&nbsp;Widget_Cables</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----&nbsp;&nbsp;&nbsp;-----&nbsp;&nbsp;&nbsp;-----</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|kid|&nbsp;&nbsp;&nbsp;|kid|&nbsp;&nbsp;&nbsp;|kid|</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----&nbsp;&nbsp;&nbsp;-----&nbsp;&nbsp;&nbsp;-----</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;To&nbsp;simplify&nbsp;life&nbsp;in&nbsp;the&nbsp;special&nbsp;case&nbsp;of&nbsp;wrapper&nbsp;widgets</CODE><BR>
<CODE>#&nbsp;with&nbsp;a&nbsp;single&nbsp;child,&nbsp;the&nbsp;xevent_mail_router&nbsp;package</CODE><BR>
<CODE>#&nbsp;provides&nbsp;the&nbsp;route_pair()&nbsp;function&nbsp;which&nbsp;does&nbsp;everything</CODE><BR>
<CODE>#&nbsp;necessary&nbsp;in&nbsp;one&nbsp;call.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;With&nbsp;either&nbsp;of&nbsp;these&nbsp;routers,&nbsp;all&nbsp;child&nbsp;mail&nbsp;will&nbsp;be&nbsp;routed</CODE><BR>
<CODE>#&nbsp;to&nbsp;them&nbsp;automatically&nbsp;without&nbsp;further&nbsp;work&nbsp;on&nbsp;behalf&nbsp;of&nbsp;the</CODE><BR>
<CODE>#&nbsp;layout/wrapper&nbsp;widget&nbsp;itself.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;widget_base::make_child_window()&nbsp;function&nbsp;specified&nbsp;by</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_widget-base_api.html#src/lib/x-kit/widget/old/basic/widget-base.api"><TT>src/lib/x-kit/widget/old/basic/widget-base.api</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;handles&nbsp;making&nbsp;child&nbsp;windows,&nbsp;returning&nbsp;a&nbsp;subwindow</CODE><BR>
<CODE>#&nbsp;of&nbsp;the&nbsp;given&nbsp;window&nbsp;of&nbsp;the&nbsp;given&nbsp;size&nbsp;in&nbsp;the&nbsp;given</CODE><BR>
<CODE>#&nbsp;(relative)&nbsp;position.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Sub-widget&nbsp;insert/remove</CODE><BR>
<CODE>#&nbsp;........................</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Layout&nbsp;and&nbsp;wrapper&nbsp;widgets&nbsp;may&nbsp;permit&nbsp;post-realization</CODE><BR>
<CODE>#&nbsp;dynamic&nbsp;insertion&nbsp;and&nbsp;removal&nbsp;of&nbsp;child&nbsp;widgets.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Inserted&nbsp;children&nbsp;should&nbsp;be&nbsp;assumed&nbsp;to&nbsp;be&nbsp;unrealized.</CODE><BR>
<CODE>#&nbsp;The&nbsp;layout&nbsp;widget&nbsp;should&nbsp;reposition&nbsp;its&nbsp;existing&nbsp;children</CODE><BR>
<CODE>#&nbsp;in&nbsp;light&nbsp;of&nbsp;the&nbsp;new&nbsp;widget,&nbsp;allot&nbsp;needed&nbsp;resources</CODE><BR>
<CODE>#&nbsp;(e.g.,&nbsp;fonts,&nbsp;window),&nbsp;and&nbsp;then&nbsp;realize&nbsp;the&nbsp;new&nbsp;child.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;When&nbsp;a&nbsp;layout&nbsp;or&nbsp;wrapper&nbsp;widget&nbsp;removes&nbsp;a&nbsp;child&nbsp;it&nbsp;should</CODE><BR>
<CODE>#&nbsp;destroy&nbsp;the&nbsp;child's&nbsp;window&nbsp;and&nbsp;remove&nbsp;it&nbsp;from&nbsp;the&nbsp;router.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;Wrapper&nbsp;Widget&nbsp;Support</CODE><BR>
<CODE>#&nbsp;......................</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;x-kit&nbsp;design&nbsp;is&nbsp;intended&nbsp;to&nbsp;encourage&nbsp;re-use&nbsp;of</CODE><BR>
<CODE>#&nbsp;existing&nbsp;widgets&nbsp;by&nbsp;wrapping&nbsp;them&nbsp;in&nbsp;a&nbsp;modulating</CODE><BR>
<CODE>#&nbsp;widget&nbsp;in&nbsp;preference&nbsp;to&nbsp;writing&nbsp;a&nbsp;new&nbsp;widget&nbsp;from</CODE><BR>
<CODE>#&nbsp;scratch&nbsp;or&nbsp;adding&nbsp;complexity&nbsp;to&nbsp;an&nbsp;existing&nbsp;widget.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;To&nbsp;encourage&nbsp;the&nbsp;writing&nbsp;of&nbsp;wrapper&nbsp;widgets,&nbsp;the</CODE><BR>
<CODE>#&nbsp;Widget&nbsp;api</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_widget_old_basic_widget_api.html#src/lib/x-kit/widget/old/basic/widget.api"><TT>src/lib/x-kit/widget/old/basic/widget.api</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;defines&nbsp;a&nbsp;number&nbsp;of&nbsp;support&nbsp;functions:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter_mouse:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter_keyboard:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filter_other:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Wrap&nbsp;a&nbsp;new&nbsp;widget&nbsp;around&nbsp;a&nbsp;given&nbsp;existing</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;widget&nbsp;while&nbsp;giving&nbsp;access&nbsp;to&nbsp;the&nbsp;given</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mail&nbsp;stream.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ignore_mouse:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ignore_keyboard:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Wrap&nbsp;a&nbsp;new&nbsp;widget&nbsp;around&nbsp;a&nbsp;given&nbsp;existing</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;widget&nbsp;which&nbsp;intercepts&nbsp;and&nbsp;discards&nbsp;all</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messages&nbsp;on&nbsp;the&nbsp;given&nbsp;mail&nbsp;stream.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Suggested&nbsp;Widget&nbsp;Programming&nbsp;Conventions</CODE><BR>
<CODE>#&nbsp;----------------------------------------</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;From:&nbsp;&nbsp;&nbsp;http://mythryl.org/pub/exene/dusty-thesis.pdf</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;Parents&nbsp;should&nbsp;be&nbsp;more&nbsp;responsible&nbsp;than&nbsp;children:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;A&nbsp;parent&nbsp;must&nbsp;guarantee&nbsp;kids&nbsp;never&nbsp;block&nbsp;indefinitely</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;attempting&nbsp;to&nbsp;mail&nbsp;it&nbsp;--&nbsp;preferably&nbsp;not&nbsp;block&nbsp;at</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;all,&nbsp;or&nbsp;only&nbsp;momentarily.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Child&nbsp;methods&nbsp;must&nbsp;always&nbsp;terminate,&nbsp;preferably&nbsp;quickly.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Parents&nbsp;should&nbsp;queue&nbsp;messages&nbsp;sent&nbsp;to&nbsp;children&nbsp;or&nbsp;applications,</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;prevent&nbsp;parent&nbsp;threads&nbsp;from&nbsp;being&nbsp;blocked&nbsp;by&nbsp;slow&nbsp;kids:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Because&nbsp;all&nbsp;queued&nbsp;messages&nbsp;originated&nbsp;with&nbsp;the&nbsp;user,&nbsp;there</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;little&nbsp;risk&nbsp;of&nbsp;the&nbsp;message&nbsp;queues&nbsp;becoming&nbsp;especially&nbsp;long."</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Parents&nbsp;should&nbsp;call&nbsp;child&nbsp;size_preference&nbsp;fns&nbsp;only&nbsp;prior</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;realization:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Parent&nbsp;should&nbsp;cache&nbsp;child&nbsp;size&nbsp;preference&nbsp;pre-realization.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Parent&nbsp;should&nbsp;update&nbsp;cached&nbsp;value&nbsp;only&nbsp;on&nbsp;REQ_RESIZE</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;REQ_RESIZE&nbsp;should&nbsp;contain&nbsp;child's&nbsp;(presumably&nbsp;changed)&nbsp;size&nbsp;preference.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Since&nbsp;pre-realization&nbsp;kids&nbsp;have&nbsp;no&nbsp;user&nbsp;input&nbsp;to&nbsp;distract</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;them&nbsp;they&nbsp;should&nbsp;answer&nbsp;promptly,&nbsp;or&nbsp;at&nbsp;minimum&nbsp;deterministically,</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meaning&nbsp;that&nbsp;any&nbsp;deadlock&nbsp;should&nbsp;show&nbsp;up&nbsp;early&nbsp;rather&nbsp;than&nbsp;late.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Suggested&nbsp;widget&nbsp;life&nbsp;cycle:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;Create&nbsp;widget;&nbsp;its&nbsp;state-encapusulating&nbsp;thread&nbsp;starts&nbsp;up.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;Parent&nbsp;calls&nbsp;size_preference&nbsp;fn&nbsp;of&nbsp;child.&nbsp;&nbsp;An&nbsp;exception</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;should&nbsp;be&nbsp;thrown&nbsp;if&nbsp;this&nbsp;fn&nbsp;is&nbsp;called&nbsp;a&nbsp;second&nbsp;time.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3&nbsp;Parent&nbsp;calls&nbsp;realize&nbsp;fn&nbsp;of&nbsp;child,&nbsp;handing&nbsp;it&nbsp;Kidplug&nbsp;and&nbsp;Window.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An&nbsp;exception&nbsp;should&nbsp;be&nbsp;throw&nbsp;if&nbsp;it&nbsp;is&nbsp;called&nbsp;a&nbsp;second&nbsp;time.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;The&nbsp;existing&nbsp;codebase&nbsp;has&nbsp;a&nbsp;problem&nbsp;with&nbsp;widgets&nbsp;which</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;change&nbsp;size&nbsp;preference&nbsp;between&nbsp;(2)&nbsp;and&nbsp;(3).&nbsp;&nbsp;They&nbsp;need</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;remember&nbsp;to&nbsp;file&nbsp;a&nbsp;REQ_RESIZE&nbsp;after&nbsp;realization.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;Child&nbsp;runs,&nbsp;processing&nbsp;user&nbsp;input.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Children&nbsp;responding&nbsp;to&nbsp;user&nbsp;input&nbsp;should&nbsp;send&nbsp;at&nbsp;most</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;one&nbsp;REQ_RESIZE.&nbsp;(Parent&nbsp;is&nbsp;not&nbsp;obligated&nbsp;to&nbsp;honor&nbsp;them.)</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5&nbsp;Widget&nbsp;is&nbsp;notified&nbsp;of&nbsp;loss&nbsp;of&nbsp;window&nbsp;via&nbsp;ETC_OWN_DEATH</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;ceases&nbsp;drawing.&nbsp;(But&nbsp;continues&nbsp;to&nbsp;accept&nbsp;incoming</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user&nbsp;input.)</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Existing&nbsp;eXene&nbsp;irritations:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Keyboard&nbsp;focus&nbsp;defaults&nbsp;in&nbsp;X&nbsp;to&nbsp;the&nbsp;root&nbsp;window,</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;practice&nbsp;the&nbsp;one&nbsp;pointed&nbsp;to&nbsp;by&nbsp;the&nbsp;mouse,&nbsp;which</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;a&nbsp;nuisance.&nbsp;Using&nbsp;SetInputFocus&nbsp;to&nbsp;set&nbsp;it&nbsp;to</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;more&nbsp;appropriate&nbsp;default&nbsp;would&nbsp;be&nbsp;nice.&nbsp;So&nbsp;would</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;being&nbsp;able&nbsp;to&nbsp;TAB&nbsp;between&nbsp;textfields.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Hostwindows&nbsp;could&nbsp;trap&nbsp;CLIENT_TakeFocus&nbsp;from&nbsp;window</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manager&nbsp;and&nbsp;restore&nbsp;last-active&nbsp;widget.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Textwidgets&nbsp;could&nbsp;highlight&nbsp;when&nbsp;they&nbsp;have&nbsp;keyboard&nbsp;focus.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;In&nbsp;Dusty's&nbsp;version&nbsp;windows&nbsp;receive&nbsp;window&nbsp;manager&nbsp;CI_FocusIn</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;CI_FocusOut&nbsp;messages&nbsp;are&nbsp;sent.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Dusty&nbsp;added&nbsp;support&nbsp;for&nbsp;WM_DELETE_WINDOW&nbsp;x&nbsp;protocol,</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;a&nbsp;'shell'&nbsp;deletionEvent&nbsp;made&nbsp;available&nbsp;which</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signals&nbsp;CLIENT_DeleteWindow&nbsp;messages.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Dusty's&nbsp;'shell'&nbsp;has&nbsp;an&nbsp;input-focus&nbsp;manager&nbsp;supporting</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TABbing&nbsp;through&nbsp;text&nbsp;widgets.&nbsp;(See&nbsp;circa&nbsp;p23&nbsp;in&nbsp;his</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;thesis&nbsp;for&nbsp;much&nbsp;detail.)</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Dusty&nbsp;added&nbsp;a&nbsp;wrapper&nbsp;object&nbsp;to&nbsp;highlight&nbsp;focusable&nbsp;objects.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Dusty&nbsp;thinks&nbsp;buttons&nbsp;should&nbsp;participate&nbsp;in&nbsp;the&nbsp;TAB&nbsp;protocol</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;too,&nbsp;to&nbsp;support&nbsp;mouse-free&nbsp;GUI&nbsp;usage&nbsp;(I'm&nbsp;sure&nbsp;Drake&nbsp;would&nbsp;approve!)</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;did&nbsp;not&nbsp;implement&nbsp;this.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Dusty's&nbsp;X&nbsp;resource&nbsp;stuff:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;"view"&nbsp;==&nbsp;"style"&nbsp;+&nbsp;"style-view":</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;"style"&nbsp;==&nbsp;eXene&nbsp;version&nbsp;of&nbsp;Xlib&nbsp;resource&nbsp;db</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;"style-view"&nbsp;==&nbsp;search&nbsp;key&nbsp;into&nbsp;that&nbsp;db,&nbsp;e.g.&nbsp;app&nbsp;name.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;"args"&nbsp;list&nbsp;is&nbsp;attribute/value&nbsp;pair&nbsp;list.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Widget&nbsp;maintains&nbsp;"attrs"&nbsp;list&nbsp;of&nbsp;triples&nbsp;(attrfibute,&nbsp;type,&nbsp;default_value)</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;eXene&nbsp;supports&nbsp;searching&nbsp;for&nbsp;attribute&nbsp;in&nbsp;(in&nbsp;order)</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;args&nbsp;list</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;style&nbsp;per&nbsp;style-view</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.&nbsp;attrs&nbsp;list&nbsp;default.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Dusty&nbsp;implemented&nbsp;a&nbsp;commandline&nbsp;arg&nbsp;parsing&nbsp;facility</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inspired&nbsp;by&nbsp;xlib's&nbsp;XrmParseCommand</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;o&nbsp;Dusty&nbsp;implements&nbsp;X&nbsp;Selections.&nbsp;&nbsp;At&nbsp;least&nbsp;part</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;logic&nbsp;appears&nbsp;to&nbsp;be&nbsp;in:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_src_window_selection-old_pkg.html#src/lib/x-kit/xclient/src/window/selection-old.pkg"><TT>src/lib/x-kit/xclient/src/window/selection-old.pkg</TT></A><BR><CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_src_window_selection-imp-old_api.html#src/lib/x-kit/xclient/src/window/selection-imp-old.api"><TT>src/lib/x-kit/xclient/src/window/selection-imp-old.api</TT></A><BR><CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_x-kit_xclient_src_window_selection-imp-old_pkg.html#src/lib/x-kit/xclient/src/window/selection-imp-old.pkg"><TT>src/lib/x-kit/xclient/src/window/selection-imp-old.pkg</TT></A><CODE>&nbsp;&nbsp;</CODE><BR><CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><BR>
<CODE>#&nbsp;The&nbsp;above&nbsp;comments&nbsp;summarize&nbsp;material&nbsp;in&nbsp;Dusty's&nbsp;thesis</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;http://mythryl.org/pub/exene/dusty-thesis.pdf</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><BR>
<CODE>#&nbsp;Much&nbsp;the&nbsp;same&nbsp;material&nbsp;is&nbsp;repeated&nbsp;in&nbsp;the&nbsp;"The&nbsp;Future&nbsp;of&nbsp;eXene"</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;http://mythryl.org/pub/exene/future.pdf</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><BR>
<CODE>#&nbsp;</CODE><BR><BR>
</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-src_lib_x-kit_widget_old_basic_widget-types_pkg.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__pkg_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_x-kit_widget_old_basic_xevent-mail-router_pkg.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
