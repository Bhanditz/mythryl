<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Posix_Io</TITLE>
</HEAD>
<BODY >
<A HREF="my-Posix_Id.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Posix_APIs.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Posix_Process.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc727">14.3.6</A>  Posix_Io</H3><P>					<A NAME="@api61"></A>
<A NAME="api:Posix_Io"></A>

The standard library <TT>Posix_Io</TT> api is a sub-API of the <A HREF="my-Posixlib.html#api:Posixlib">Posixlib</A> api.</P><P><FONT SIZE=1><I>The above information is manually maintained and may contain errors.</I></FONT>
</P><PRE CLASS="verbatim">api {
    eqtype File_Descriptor;
    eqtype Process_Id;
    make_pipe : Void -&gt; {infd:File_Descriptor, outfd:File_Descriptor};
    make_pipe__without_syscall_redirection : Void -&gt; {infd:File_Descriptor, outfd:File_Descriptor};
    dup : File_Descriptor -&gt; File_Descriptor;
    dup2 : {new:File_Descriptor, old:File_Descriptor} -&gt; Void;
    dup2__without_syscall_redirection : {new:File_Descriptor, old:File_Descriptor} -&gt; Void;
    close : File_Descriptor -&gt; Void;
    close__without_syscall_redirection : File_Descriptor -&gt; Void;
    copy_file : {from:String, to:String} -&gt; Int;
    file_contents_are_identical : (String , String) -&gt; Bool;
        read_as_vector :
        {file_descriptor:File_Descriptor, max_bytes_to_read:Int} -&gt; vector_of_one_byte_unts::Vector;
        read_into_buffer :
        {file_descriptor:File_Descriptor, read_buffer:rw_vector_slice_of_one_byte_unts::Slice} -&gt; Int;
    stdout_redirect : Ref(Null_Or((String -&gt; Void) ) );
    stderr_redirect : Ref(Null_Or((String -&gt; Void) ) );
    write_string : (File_Descriptor , String) -&gt; Int;
    write_vector : (File_Descriptor , vector_slice_of_one_byte_unts::Slice) -&gt; Int;
    write_rw_vector : (File_Descriptor , rw_vector_slice_of_one_byte_unts::Slice) -&gt; Int;
        read_as_vector__without_syscall_redirection :
        {file_descriptor:File_Descriptor, max_bytes_to_read:Int} -&gt; vector_of_one_byte_unts::Vector;
        read_into_buffer__without_syscall_redirection :
        {file_descriptor:File_Descriptor, read_buffer:rw_vector_slice_of_one_byte_unts::Slice} -&gt; Int;
        write_vector__without_syscall_redirection :
        (File_Descriptor , vector_slice_of_one_byte_unts::Slice) -&gt; Int;
        write_rw_vector__without_syscall_redirection :
        (File_Descriptor , rw_vector_slice_of_one_byte_unts::Slice) -&gt; Int;
    Whence  = SEEK_CUR | SEEK_END | SEEK_SET;
        package fd
          : api {
                eqtype Flags;
                to_unt : Flags -&gt; one_word_unt::Unt;
                from_unt : one_word_unt::Unt -&gt; Flags;
                all : Flags;
                flags : List(Flags ) -&gt; Flags;
                intersect : List(Flags ) -&gt; Flags;
                clear : (Flags , Flags) -&gt; Flags;
                all_set : (Flags , Flags) -&gt; Bool;
                any_set : (Flags , Flags) -&gt; Bool;
                cloexec : Flags;};;
        package flags
          : api {
                eqtype Flags;
                to_unt : Flags -&gt; one_word_unt::Unt;
                from_unt : one_word_unt::Unt -&gt; Flags;
                all : Flags;
                flags : List(Flags ) -&gt; Flags;
                intersect : List(Flags ) -&gt; Flags;
                clear : (Flags , Flags) -&gt; Flags;
                all_set : (Flags , Flags) -&gt; Bool;
                any_set : (Flags , Flags) -&gt; Bool;
                append : Flags;
                nonblock : Flags;
                sync : Flags;
                rsync : Flags;
                dsync : Flags;};;
    dupfd : {base:File_Descriptor, old:File_Descriptor} -&gt; File_Descriptor;
    getfd : File_Descriptor -&gt; fd::Flags;
    setfd : (File_Descriptor , fd::Flags) -&gt; Void;
    setfd__without_syscall_redirection : (File_Descriptor , fd::Flags) -&gt; Void;
    getfl : File_Descriptor -&gt; (flags::Flags , ?.posix_common::Open_Mode);
    setfl : (File_Descriptor , flags::Flags) -&gt; Void;
    lseek : (File_Descriptor , Int , Whence) -&gt; Int;
    fsync : File_Descriptor -&gt; Void;
    Lock_Type  = F_RDLCK | F_UNLCK | F_WRLCK;
        package flock
          : api {
                Flock;
                flock : {len:Int, locktype:Lock_Type, pid:Null_Or(Process_Id ), start:Int, whence:Whence} -&gt; Flock;
                locktype : Flock -&gt; Lock_Type;
                whence : Flock -&gt; Whence;
                start : Flock -&gt; Int;
                len : Flock -&gt; Int;
                pid : Flock -&gt; Null_Or(Process_Id );};;
    getlk : (File_Descriptor , flock::Flock) -&gt; flock::Flock;
    setlk : (File_Descriptor , flock::Flock) -&gt; flock::Flock;
    setlkw : (File_Descriptor , flock::Flock) -&gt; flock::Flock;
        make_data_filereader :
            {file_descriptor:File_Descriptor, filename:String, ok_to_block:Bool}
            -&gt;
            winix_base_data_file_io_driver_for_posix__premicrothread::Filereader;
        make_text_filereader :
            {file_descriptor:File_Descriptor, filename:String, ok_to_block:Bool}
            -&gt;
            winix_base_text_file_io_driver_for_posix__premicrothread::Filereader;
        make_data_filewriter :
                {append_mode:Bool, best_io_quantum:Int, file_descriptor:File_Descriptor, filename:String,
                ok_to_block:Bool}
            -&gt;
            winix_base_data_file_io_driver_for_posix__premicrothread::Filewriter;
        make_text_filewriter :
                {append_mode:Bool, best_io_quantum:Int, file_descriptor:File_Descriptor, filename:String,
                ok_to_block:Bool}
            -&gt;
            winix_base_text_file_io_driver_for_posix__premicrothread::Filewriter;
    Sy_Int  = Int;
    Sy_Unt  = one_word_unt::Unt;
    osval2__syscall : String -&gt; Sy_Int;
        set__osval2__ref :
        ({fun_name:String, io_call:String -&gt; Sy_Int, lib_name:String} -&gt; String -&gt; Sy_Int) -&gt; Void;
    make_pipe__syscall : Void -&gt; (Sy_Int , Sy_Int);
        set__make_pipe__ref :
            ({fun_name:String, io_call:Void -&gt; (Sy_Int , Sy_Int), lib_name:String} -&gt; Void -&gt; (Sy_Int , Sy_Int))
            -&gt;
            Void;
    dup__syscall : Sy_Int -&gt; Sy_Int;
        set__dup__ref :
        ({fun_name:String, io_call:Sy_Int -&gt; Sy_Int, lib_name:String} -&gt; Sy_Int -&gt; Sy_Int) -&gt; Void;
    dup2__syscall : (Sy_Int , Sy_Int) -&gt; Void;
        set__dup2__ref :
            ({fun_name:String, io_call:(Sy_Int , Sy_Int) -&gt; Void, lib_name:String} -&gt; (Sy_Int , Sy_Int) -&gt; Void)
            -&gt;
            Void;
    close__syscall : Sy_Int -&gt; Void;
        set__close__ref :
        ({fun_name:String, io_call:Sy_Int -&gt; Void, lib_name:String} -&gt; Sy_Int -&gt; Void) -&gt; Void;
    read__syscall : (Int , Int) -&gt; vector_of_one_byte_unts::Vector;
        set__read__ref :
                (
                {fun_name:String, io_call:(Int , Int) -&gt; vector_of_one_byte_unts::Vector, lib_name:String}
                -&gt;
                (Int , Int) -&gt; vector_of_one_byte_unts::Vector
                )
            -&gt;
            Void;
    readbuf__syscall : (Int , rw_vector_of_one_byte_unts::Rw_Vector , Int , Int) -&gt; Int;
        set__readbuf__ref :
                (   {fun_name:String, io_call:(Int , rw_vector_of_one_byte_unts::Rw_Vector , Int , Int) -&gt; Int,
                    lib_name:String}
                -&gt;
                (Int , rw_vector_of_one_byte_unts::Rw_Vector , Int , Int) -&gt; Int
                )
            -&gt;
            Void;
    write_ro_slice__syscall : (Int , vector_of_one_byte_unts::Vector , Int , Int) -&gt; Int;
        set__write_ro_slice__ref :
                (   {fun_name:String, io_call:(Int , vector_of_one_byte_unts::Vector , Int , Int) -&gt; Int,
                    lib_name:String}
                -&gt;
                (Int , vector_of_one_byte_unts::Vector , Int , Int) -&gt; Int
                )
            -&gt;
            Void;
    write_rw_slice__syscall : (Int , rw_vector_of_one_byte_unts::Rw_Vector , Int , Int) -&gt; Int;
        set__write_rw_slice__ref :
                (   {fun_name:String, io_call:(Int , rw_vector_of_one_byte_unts::Rw_Vector , Int , Int) -&gt; Int,
                    lib_name:String}
                -&gt;
                (Int , rw_vector_of_one_byte_unts::Rw_Vector , Int , Int) -&gt; Int
                )
            -&gt;
            Void;
    fcntl_d__syscall : (Sy_Int , Sy_Int) -&gt; Sy_Int;
        set__fcntl_d__ref :
                (
                {fun_name:String, io_call:(Sy_Int , Sy_Int) -&gt; Sy_Int, lib_name:String}
                -&gt;
                (Sy_Int , Sy_Int) -&gt; Sy_Int
                )
            -&gt;
            Void;
    fcntl_gfd__syscall : Sy_Int -&gt; Sy_Unt;
        set__fcntl_gfd__ref :
        ({fun_name:String, io_call:Sy_Int -&gt; Sy_Unt, lib_name:String} -&gt; Sy_Int -&gt; Sy_Unt) -&gt; Void;
    fcntl_sfd__syscall : (Sy_Int , Sy_Unt) -&gt; Void;
        set__fcntl_sfd__ref :
            ({fun_name:String, io_call:(Sy_Int , Sy_Unt) -&gt; Void, lib_name:String} -&gt; (Sy_Int , Sy_Unt) -&gt; Void)
            -&gt;
            Void;
    fcntl_gfl__syscall : Sy_Int -&gt; (Sy_Unt , Sy_Unt);
        set__fcntl_gfl__ref :
                (
                {fun_name:String, io_call:Sy_Int -&gt; (Sy_Unt , Sy_Unt), lib_name:String}
                -&gt;
                Sy_Int -&gt; (Sy_Unt , Sy_Unt)
                )
            -&gt;
            Void;
    fcntl_sfl__syscall : (Sy_Int , Sy_Unt) -&gt; Void;
        set__fcntl_sfl__ref :
            ({fun_name:String, io_call:(Sy_Int , Sy_Unt) -&gt; Void, lib_name:String} -&gt; (Sy_Int , Sy_Unt) -&gt; Void)
            -&gt;
            Void;
    Flock_Rep  = (Sy_Int , Sy_Int , Int , Int , Sy_Int);
    fcntl_l__syscall : (Sy_Int , Sy_Int , Flock_Rep) -&gt; Flock_Rep;
        set__fcntl_l__ref :
                (
                {fun_name:String, io_call:(Sy_Int , Sy_Int , Flock_Rep) -&gt; Flock_Rep, lib_name:String}
                -&gt;
                (Sy_Int , Sy_Int , Flock_Rep) -&gt; Flock_Rep
                )
            -&gt;
            Void;
    lseek__syscall : (Sy_Int , Int , Sy_Int) -&gt; Int;
        set__lseek__ref :
                (
                {fun_name:String, io_call:(Sy_Int , Int , Sy_Int) -&gt; Int, lib_name:String}
                -&gt;
                (Sy_Int , Int , Sy_Int) -&gt; Int
                )
            -&gt;
            Void;
    fsync__syscall : Sy_Int -&gt; Void;
        set__fsync__ref :
        ({fun_name:String, io_call:Sy_Int -&gt; Void, lib_name:String} -&gt; Sy_Int -&gt; Void) -&gt; Void;};
</PRE><P><A NAME="@fun2137"></A>
<A NAME="@fun2138"></A>
<A NAME="@fun2139"></A>
<A NAME="@fun2140"></A>
<A NAME="@fun2141"></A>
<A NAME="@fun2142"></A>
<A NAME="@fun2143"></A>
<A NAME="@fun2144"></A>
<A NAME="@fun2145"></A>
<A NAME="@fun2146"></A>
<A NAME="@fun2147"></A>
<A NAME="@fun2148"></A>
<A NAME="@fun2149"></A>
<A NAME="@fun2150"></A>
<A NAME="@fun2151"></A>
<A NAME="@fun2152"></A>
<A NAME="@fun2153"></A>
<A NAME="@fun2154"></A>
<A NAME="@fun2155"></A>
<A NAME="@fun2156"></A>
<A NAME="@fun2157"></A>
<A NAME="@fun2158"></A>
<A NAME="@fun2159"></A>
<A NAME="@fun2160"></A>
<A NAME="@fun2161"></A>
<A NAME="@fun2162"></A>
<A NAME="@fun2163"></A>
<A NAME="@fun2164"></A>
<A NAME="@fun2165"></A>
<A NAME="@fun2166"></A>
<A NAME="@fun2167"></A>
<A NAME="@fun2168"></A>
<A NAME="@fun2169"></A>
<A NAME="@fun2170"></A>
<A NAME="@fun2171"></A>
<A NAME="@fun2172"></A>
<A NAME="@fun2173"></A>
<A NAME="@fun2174"></A>
<A NAME="@fun2175"></A>
<A NAME="@fun2176"></A>
<A NAME="@fun2177"></A>
<A NAME="@fun2178"></A>
<A NAME="@fun2179"></A>
<A NAME="@fun2180"></A>
<A NAME="@fun2181"></A>
<A NAME="@fun2182"></A>
<A NAME="@fun2183"></A>
<A NAME="@fun2184"></A>
<A NAME="@fun2185"></A>
<A NAME="@fun2186"></A>
<A NAME="@fun2187"></A>
<A NAME="@fun2188"></A>
<A NAME="@fun2189"></A>
<A NAME="@fun2190"></A>
<A NAME="@fun2191"></A>
<A NAME="@fun2192"></A>
<A NAME="@fun2193"></A>
<A NAME="@fun2194"></A>
<A NAME="@fun2195"></A>
<A NAME="@fun2196"></A>
<A NAME="@fun2197"></A>
<A NAME="@fun2198"></A>
<A NAME="@fun2199"></A>
<A NAME="@fun2200"></A>
<A NAME="@fun2201"></A>
<A NAME="@fun2202"></A>
<A NAME="@fun2203"></A>
<A NAME="@fun2204"></A>
<A NAME="@fun2205"></A>
<A NAME="@fun2206"></A>
<A NAME="@fun2207"></A>
<A NAME="@fun2208"></A>
<A NAME="@fun2209"></A>
<A NAME="@fun2210"></A>
<A NAME="@fun2211"></A>
<A NAME="@fun2212"></A>
<A NAME="@fun2213"></A>
<A NAME="@fun2214"></A>
<A NAME="@fun2215"></A>
<A NAME="@fun2216"></A>
<A NAME="@fun2217"></A>
<A NAME="@fun2218"></A>
<A NAME="@fun2219"></A>
<A NAME="@fun2220"></A>
<A NAME="@fun2221"></A>
<A NAME="@fun2222"></A>
<A NAME="@fun2223"></A>
<A NAME="@fun2224"></A>
<A NAME="@fun2225"></A>
<A NAME="@fun2226"></A>
<A NAME="@fun2227"></A>
<A NAME="@fun2228"></A>
<A NAME="@fun2229"></A>
<A NAME="@fun2230"></A>
<A NAME="@fun2231"></A>
<A NAME="@fun2232"></A>
<A NAME="@fun2233"></A>

</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Posix_Id.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Posix_APIs.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Posix_Process.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
