<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Runtime_Internals</TITLE>
</HEAD>
<BODY >
<A HREF="my-Run_At__Premicrothread.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Less_Frequently_Used_APIs.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Rw_Queue.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc817">14.4.87</A>  Runtime_Internals</H3><P>							<A NAME="@api150"></A>
<A NAME="api:Runtime_Internals"></A>

The standard library <TT>Runtime_Internals</TT> api defines access to functionality 
such as control of the garbage collector.</P><P>The <TT>Runtime_Internals</TT> api is implemented by 
<TT>runtime_internals</TT> in 
<A HREF="my-src_lib_std_src_nj_runtime-internals_pkg.html#src/lib/std/src/nj/runtime-internals.pkg">src/lib/std/src/nj/runtime-internals.pkg</A>.</P><P>The <TT>Runtime_Internals</TT> api source code is in <A HREF="my-src_lib_std_src_nj_runtime-internals_api.html#src/lib/std/src/nj/runtime-internals.api">src/lib/std/src/nj/runtime-internals.api</A>.</P><P><FONT SIZE=1><I>The above information is manually maintained and may contain errors.</I></FONT>
</P><PRE CLASS="verbatim">api {   package at
          : api {   When
                    = FORK_TO_DISK
                    |
                    NEVER_RUN
                    |
                    SHUTDOWN_PHASE_1_USER_HOOKS
                    |
                    SHUTDOWN_PHASE_2_UNREDIRECT_SYSCALLS
                    |
                    SHUTDOWN_PHASE_3_STOP_THREAD_SCHEDULER
                    |
                    SHUTDOWN_PHASE_4_STOP_SUPPORT_HOSTTHREADS
                    |
                    SHUTDOWN_PHASE_5_ZERO_COMPILE_STATISTICS
                    |
                    SHUTDOWN_PHASE_6_CLOSE_OPEN_FILES
                    |
                    SHUTDOWN_PHASE_6_FLUSH_OPEN_FILES
                    |
                    SHUTDOWN_PHASE_7_CLEAR_POSIX_INTERPROCESS_SIGNAL_HANDLER_TABLE
                    |
                    SPAWN_TO_DISK
                    |
                    STARTUP_PHASE_10_START_NEW_DLOPEN_ERA
                    |
                    STARTUP_PHASE_11_START_SUPPORT_HOSTTHREADS
                    |
                    STARTUP_PHASE_12_START_THREAD_SCHEDULER
                    |
                    STARTUP_PHASE_13_REDIRECT_SYSCALLS
                    |
                    STARTUP_PHASE_14_START_BASE_IMPS
                    |
                    STARTUP_PHASE_15_START_XKIT_IMPS
                    |
                    STARTUP_PHASE_16_OF_HEAP_MADE_BY_FORK_TO_DISK
                    |
                    STARTUP_PHASE_16_OF_HEAP_MADE_BY_SPAWN_TO_DISK
                    |
                    STARTUP_PHASE_17_USER_HOOKS
                    |
                    STARTUP_PHASE_1_RESET_STATE_VARIABLES
                    |
                    STARTUP_PHASE_2_REOPEN_MYTHRYL_LOG
                    |
                    STARTUP_PHASE_3_REOPEN_USER_LOGS
                    |
                    STARTUP_PHASE_4_MAKE_STDIN_STDOUT_AND_STDERR
                    |
                    STARTUP_PHASE_5_CLOSE_STALE_OUTPUT_STREAMS
                    |
                    STARTUP_PHASE_6_INITIALIZE_POSIX_INTERPROCESS_SIGNAL_HANDLER_TABLE
                    |
                    STARTUP_PHASE_7_RESET_POSIX_INTERPROCESS_SIGNAL_HANDLER_TABLE
                    |
                    STARTUP_PHASE_8_RESET_COMPILER_STATISTICS
                    |
                    STARTUP_PHASE_9_RESET_CPU_AND_WALLCLOCK_TIMERS;
                schedule : (String , List(When ) , (When -&gt; Void)) -&gt; Null_Or(((List(When ) , (When -&gt; Void))) );
                deschedule : String -&gt; Null_Or(((List(When ) , (When -&gt; Void))) );
                run_functions_scheduled_to_run : When -&gt; Void;
                when_to_string : When -&gt; String;
                when_to_int : When -&gt; Int;
                when_compare : (When , When) -&gt; Order;
                when_gt : (When , When) -&gt; Bool;
                get_schedule : Void -&gt; List(((String , List(When ))) );};;
        package rpc
          : api {
                add_per_fun_call_counters_to_deep_syntax : Ref(Bool );
                get_time_profiling_rw_vector : Void -&gt; Rw_Vector(Int );
                this_fn_profiling_hook_refcell__global : Ref(Int );
                start_sigvtalrm_time_profiler : Void -&gt; Void;
                stop_sigvtalrm_time_profiler : Void -&gt; Void;
                sigvtalrm_time_profiler_is_running : Void -&gt; Bool;
                get_sigvtalrm_interval_in_microseconds : Void -&gt; Int;
                    Profiled_Package
                    = PROFILED_PACKAGE      {first_slot_in_time_profiling_rw_vector:Int, fun_count:Int, fun_names:String,
                                            per_fun_call_counts:Rw_Vector(Int )};
                in_runtime__cpu_user_index : Int;
                in_minor_heapcleaner__cpu_user_index : Int;
                in_major_heapcleaner__cpu_user_index : Int;
                in_other_code__cpu_user_index : Int;
                in_compiler__cpu_user_index : Int;
                number_of_predefined_indices : Int;
                get_profiled_packages_list : Void -&gt; List(Profiled_Package );
                zero_profiling_counts : Void -&gt; Void;
                space_profiling : Ref(Bool );
                space_prof_register : Ref(((?.unsafe::Chunk , String) -&gt; ?.unsafe::Chunk) );};;
        package hc
          : api {
                clean_heap : Int -&gt; Void;
                messages : Bool -&gt; Void;};;
    print_hook : Ref((String -&gt; Void) );
    initialize_posix_interprocess_signal_handler_table : Void -&gt; Void;
    clear_posix_interprocess_signal_handler_table : Void -&gt; Void;
    reset_posix_interprocess_signal_handler_table : Void -&gt; Void;
        package tdp
          : api {     Plugin  =         {enter:(Int , Int) -&gt; Void, name:String, nopush:(Int , Int) -&gt; Void,
                                        push:(Int , Int) -&gt; Void -&gt; Void, register:(Int , Int , Int , String) -&gt; Void,
                                        save:Void -&gt; Void -&gt; Void};
                Monitor  = {monitor:(Bool , (Void -&gt; Void)) -&gt; Void, name:String};
                active_plugins : Ref(List(Plugin ) );
                active_monitors : Ref(List(Monitor ) );
                reserve : Int -&gt; Int;
                reset : Void -&gt; Void;
                idk_entry_point : Int;
                idk_non_tail_call : Int;
                idk_tail_call : Int;
                tdp_instrument_enabled : Ref(Bool );
                with_monitors : Bool -&gt; (Void -&gt; Void) -&gt; Void;};;};
</PRE><P><A NAME="@fun3631"></A>
<A NAME="@fun3632"></A>
<A NAME="@fun3633"></A>
<A NAME="@fun3634"></A>
<A NAME="@fun3635"></A>
<A NAME="@fun3636"></A>
<A NAME="@fun3637"></A>
<A NAME="@fun3638"></A>
<A NAME="@fun3639"></A>
<A NAME="@fun3640"></A>
<A NAME="@fun3641"></A>
<A NAME="@fun3642"></A>
<A NAME="@fun3643"></A>
<A NAME="@fun3644"></A>
<A NAME="@fun3645"></A>
<A NAME="@fun3646"></A>
<A NAME="@fun3647"></A>
<A NAME="@fun3648"></A>
<A NAME="@fun3649"></A>
<A NAME="@fun3650"></A>
<A NAME="@fun3651"></A>
<A NAME="@fun3652"></A>
<A NAME="@fun3653"></A>
<A NAME="@fun3654"></A>
<A NAME="@fun3655"></A>
<A NAME="@fun3656"></A>
<A NAME="@fun3657"></A>
<A NAME="@fun3658"></A>
<A NAME="@fun3659"></A>
<A NAME="@fun3660"></A>
<A NAME="@fun3661"></A>
<A NAME="@fun3662"></A>
<A NAME="@fun3663"></A>
<A NAME="@fun3664"></A>
<A NAME="@fun3665"></A>
<A NAME="@fun3666"></A>
<A NAME="@fun3667"></A>
<A NAME="@fun3668"></A>
<A NAME="@fun3669"></A>
<A NAME="@fun3670"></A>

</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Run_At__Premicrothread.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Less_Frequently_Used_APIs.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Rw_Queue.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
