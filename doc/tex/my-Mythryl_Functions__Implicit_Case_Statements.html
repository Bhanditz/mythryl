<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Mythryl Functions: Implicit Case Statements</TITLE>
</HEAD>
<BODY >
<A HREF="my-Mythryl_Functions__Beyond_Parameter_Lists.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-The_Full_Monte.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Mythryl_Functions__List_Handling_Idioms.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc88">5.4.3</A>  Mythryl Functions: Implicit Case Statements</H3><P>Let us return to our first <I>enum</I>-style <TT>Color</TT> type declaration and 
the problem of printing out values of that type:</P><PRE CLASS="verbatim">    #!/usr/bin/mythryl

    Color = RED | GREEN | BLUE;

    fun print_color color = {
        case color
        RED   =&gt; print "RED\n";
        GREEN =&gt; print "GREEN\n";
        BLUE  =&gt; print "BLUE\n";
        esac;
    };

    print_color RED;
    print_color GREEN;
    print_color BLUE;
</PRE><P>When run this of course produces</P><PRE CLASS="verbatim">    linux$ ./my-script
    RED
    GREEN
    BLUE
</PRE><P>First off, note that we wrote <TT>print_color RED;</TT> above, not 
<TT>print_color( RED );</TT>.</P><P>Now that we know that Mythryl functions are not C functions, and can 
take any type of argument, we need no longer keep up the pretense that 
parentheses are associated with function invocation. In Mythryl, 
parentheses are used for constructing tuples and for grouping; they 
have nothing whatever to do with function invocation. Putting 
useless parentheses in function calls in Mythryl just makes you look 
like a beginner who is still writing C in Mythryl.</P><P>Now look at the above function definition. It works just fine, but 
an experienced Mythryl programmer would rarely if ever write it that 
way. Mythryl function syntax supports <I>implicit case statements</I> 
to allow writing such functions without an explicit <TT>case</TT>, and 
an experienced Mythryl programmer would almost always automatically 
take advantage of that fact:</P><PRE CLASS="verbatim">    #!/usr/bin/mythryl

    Color = RED | GREEN | BLUE;

    fun print_color RED   =&gt;  print "RED\n";
        print_color GREEN =&gt;  print "GREEN\n";
        print_color BLUE  =&gt;  print "BLUE\n";
    end;

    print_color RED;
    print_color GREEN;
    print_color BLUE;
</PRE><P>When run, the above script will produce exactly the same output as the 
previous version, and in fact will probably compile into exactly the 
same binary code &#X2014; the first thing the Mythryl compiler does with such 
function syntax is to expand it into an explicit <TT>case</TT> internally.</P><P>But what a difference in readability! Seven lines of function definition 
have shrunk to four, and assymetric clutter has given way to pleasing 
symmetry. The first version was rather ugly; the second version is 
actually quite pretty! (Always listen to your esthetic sense. It is 
the voice of experience. Beautiful code is better code.)</P><P>Now we are not only writing Mythryl code that works &#X2014; we are starting 
to write Mythryl code that <I>looks</I> like Mythryl code, code that an 
experienced Mythryl programmer might read without wincing.</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Mythryl_Functions__Beyond_Parameter_Lists.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-The_Full_Monte.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Mythryl_Functions__List_Handling_Idioms.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
