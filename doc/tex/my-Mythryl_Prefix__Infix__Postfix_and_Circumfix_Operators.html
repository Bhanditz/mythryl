<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Mythryl Prefix, Infix, Postfix and Circumfix Operators</TITLE>
</HEAD>
<BODY >
<A HREF="my-Mythryl_for_Loop.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Mythryl_for_SML_Programmers.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Mythryl_Backticks_Operators-2.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc200">5.7.18</A>  Mythryl Prefix, Infix, Postfix and Circumfix Operators</H3><P>Contemporary programming is (perhaps unfortunately) based upon seven-bit 
<SPAN STYLE="font-variant:small-caps">ASCII</SPAN>, leading to a distict paucity of available operator symbols, 
particularly compared with the rich variety used in mathematics.</P><P>This paucity is accentuated in <SPAN STYLE="font-variant:small-caps">SML</SPAN> by the design inability to 
distinguish between prefix and infix uses of an operator symbol such 
as <TT>-</TT>. This forces <SPAN STYLE="font-variant:small-caps">SML</SPAN> to use tilde for unary negation 
and <TT>!</TT> for dereferencing, in jarring discord with contemporary 
practice.</P><P>C avoids this problem by adopting the rule that every pair of alphabetic 
identifiers must be separated by a binary symbolic operator; this allows 
any following symbolic operators to be unambiguously identified as prefix. 
This is why C can use <TT>*</TT> for both binary multiplication and unary 
dereferencing. This design approach is unworkable in the functional 
programming context due to the pervasive use of <TT>f x</TT> functional 
application syntax.</P><P>Mythryl, participating in a recent trend, uses the presence or absence 
of whitespace to distinguish infix from prefix operator application:</P><PRE CLASS="verbatim">    f-g             # Infix --- subtraction.
    f -g            # f(-g).
    f - g           # Infix --- subtraction.
    f- g            # Postfix. (No default Mythryl library semantics.)
</PRE><P>This effectively doubles or triples the size of the available operator 
namespace and allows Mythryl to use default operator definitions which 
are much more in tune with contemporary C-influenced intuition.</P><P>This also allows Mythryl to support some mathematical notations not 
(yet?) commonly used in the programming community, such as this 
definition of the factorial function, taken from the Mythryl standard 
library <A HREF="my-src_lib_std_src_multiword-int-guts_pkg.html#src/lib/std/src/multiword-int-guts.pkg">src/lib/std/src/multiword-int-guts.pkg</A> package:</P><PRE CLASS="verbatim">    fun 0! =&gt;  1;
        n! =&gt;  n * (n - 1)! ;
    end;
</PRE><P>Mythryl similarly supports a limited set of circumfix operators:</P><PRE CLASS="verbatim">    fun |i| = (i &gt; 0) ?? i :: -i;
</PRE><P>This allows certain common mathematical notations to be used in 
the Mythryl programming context for brevity and readability.</P><P>To resolve correctly, such expressions must be surrounded by whitespace 
and there must be no whitespace between the circumfix operator 
symbols and the enclosed expression.</P><P>The set of such operators currently supported is:</P><UL CLASS="itemize"><LI CLASS="li-itemize">
|x|
</LI><LI CLASS="li-itemize">&lt;x&gt;
</LI><LI CLASS="li-itemize">/x/
</LI><LI CLASS="li-itemize">{i}
</LI></UL><P>(Although in a nod to quantum mechanics, Mythryl does also support mismatched bracket 
constructs like like <CODE>&lt;f|</CODE> and <CODE>/</CODE>g&gt;/. The standard library defines 
no meanings for these.)</P><P>The compiler resolves these operators to equivalent but more conventional 
names early in the front end, renaming them <TT>(|x|) (&lt;x&gt;) (/x/) ({x})</TT> 
respectively. These names may be used in contexts where the functions 
involved need to be named independent of immediate application ot a value.</P><P>A closely related Mythryl frontend tweak internally resolves <TT>a[i]</TT> 
to <TT>(_[]</TT> early. Defining this as a synonym for the usual vector 
<TT>get</TT> operation via code like</P><PRE CLASS="verbatim">    my (_[]): (Vector(X), Int) -&gt; X = inline_t::poly_vector::get_with_boundscheck;
</PRE><P>(taken from <A HREF="my-src_lib_std_src_vector_pkg.html#src/lib/std/src/vector.pkg">src/lib/std/src/vector.pkg</A>)</P><P>allowing more natural reference to vector elements:</P><PRE CLASS="verbatim">    linux&gt; my
    eval:  v = #[1, 2, 3];

    #[1, 2, 3]

    eval:  v[1];

    2
</PRE><P>A matching frontend tweak resolves <TT>a[i] = v;</TT> 
to <TT>(_[]:=)(a,i,v);</TT> Defining <TT>(_[]:=)</TT> as a synonym 
for the usual vector <TT>set</TT> operation via code like</P><PRE CLASS="verbatim">    (_[]:=) = set;
</PRE><P>(again from <A HREF="my-src_lib_std_src_vector_pkg.html#src/lib/std/src/vector.pkg">src/lib/std/src/vector.pkg</A>) allows use of traditional notation for setting a vector entry:</P><PRE CLASS="verbatim">    linux&gt; my

    eval:  v = #[1, 2, 3];

    #[1, 2, 3]

    eval:  v[1] := 222;

    #[1, 222, 3]

</PRE>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Mythryl_for_Loop.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Mythryl_for_SML_Programmers.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Mythryl_Backticks_Operators-2.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
