<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Overloaded Operators</TITLE>
</HEAD>
<BODY >
<A HREF="my-Library_Freezing.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-The_Full_Monte.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Experimental_Object_Oriented_Programming_Support.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc109">5.4.24</A>  Overloaded Operators</H3><P>The alert reader may have noticed that the Mythryl arithmetic operators such as 
<TT>+</TT> and <TT>*</TT> are anomalous in that they can operate upon both integer 
and floating point numbers.</P><P>This is indeed an anomaly.</P><P>Such symbols are termed <I>overloaded</I>. They actually refer ambiguously 
to <I>several</I> underlying symbol definitions.</P><P>Such overloading works quite naturally in languages like <TT>C++</TT> where 
every identifier is explicitly assigned a type by the programmer 
when it enters scope.</P><P>Such overloading does not sit very well with Mythryl type inference, alas. 
Mythryl type inference works by propagating 
type information out from symbols with known type through the rest of the 
program syntax tree. Symbols which may refer to any one of several underlying 
definitions and thus potentially have any one of several types add unwelcome 
complexity and opacity to the type inference computation.</P><P>This is why (for example) the closely related 
<A HREF="http://en.wikipedia.org/wiki/OCaml">Ocaml</A> programming language abjures overloading completely. The price it pays for this is having to use different symbols for integer 
and floating point multiplcation &#X2014; <TT>*</TT> vs <TT>*.</TT> &#X2014; which some people consider 
ugly. It gets uglier if one wants to add such support for other types 
such as complex numbers, vectors and matrices.</P><P>Consequently Mythryl has elected to support operator overloading, albeit 
without great enthusiasm or conviction. You might think of operator 
overloading as the <TT>goto</TT> of the Mythryl type and syntax system, 
somewhat sinister and unwelcome, and by preference not mentioned or used, 
but occasionally just exactly the right tool for the job.</P><P>Important note: The Mythryl compiler resolves overloaded operators at compiletime; 
any given reference in source code to an overloaded operator 
must resolve at compiletime to exactly one of the underlying possibilities. 
This means that one <I>cannot</I> use overloaded operators to write a function 
which will operate on different types at different times, for example a 
function which does integer additions when handed integers and float 
additions when handed floats. </P><P>You can find the Mythryl standard library&#X2019;s set of default operator 
overloading declarations in the aptly named 
<A HREF="my-src_lib_core_init_pervasive_pkg.html#src/lib/core/init/pervasive.pkg">src/lib/core/init/pervasive.pkg</A> package. A typical sample looks like:</P><PRE CLASS="verbatim">    overloaded my + :   ((X, X) -&gt; X)
        =
        ( tagged_int::(+),
          one_word_int::(+),
          two_word_int::(+),
          intgr::(+),
          tagged_unt::(+),
          strcat,
          one_word_unt::(+),
          two_word_unt::(+),
          flt64::(+),
          unt08plus
        );
</PRE><P>This declares that the overloaded <TT>+</TT> binary operator combines two values to 
produce a third, all of the same type, and that it may be used to ambiguously 
refer to any of the corresponding underlying addition symbols from any of the indicated 
arithmetic-type packages &#X2014; and to strings too, just for good measure. </P><P>You might use the following syntax to add support for complex, 
quaternion, oction and matrix addition to the pre-existing overloaded 
addition operation:</P><PRE CLASS="verbatim">    overloaded my + :   ((X, X) -&gt; X)
       +=
        ( complex::(+),
          quaternion::(+),
          oction::(+),
          matrix::(+)
        );
</PRE><P>Here the substitution of <TT>+=</TT> for <TT>=</TT> signals 
the compiler that the pre-existing overloaded operator definition 
should be extended rather than overridden.</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Library_Freezing.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-The_Full_Monte.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Experimental_Object_Oriented_Programming_Support.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
