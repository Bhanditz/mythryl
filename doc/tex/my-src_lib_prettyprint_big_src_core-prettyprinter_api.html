<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>src/lib/prettyprint/big/src/core-prettyprinter.api</TITLE>
</HEAD>
<BODY >
<A HREF="my-src_lib_prettyprint_big_src_core-prettyprinter-types_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_prettyprint_big_src_out_prettyprint-output-stream_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc1419">15.3.343</A>  src/lib/prettyprint/big/src/core-prettyprinter.api</H3><P>
<A NAME="src/lib/prettyprint/big/src/core-prettyprinter.api"></A>
<CODE>##&nbsp;core-prettyprinter.api</CODE><BR>
<CODE>#</CODE><BR><BR>
<CODE>#&nbsp;Compiled&nbsp;by:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_prettyprint_big_prettyprinter_lib.html#src/lib/prettyprint/big/prettyprinter.lib"><TT>src/lib/prettyprint/big/prettyprinter.lib</TT></A><BR><BR><CODE>#&nbsp;This&nbsp;API&nbsp;is&nbsp;implemented&nbsp;in:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_prettyprint_big_src_core-prettyprinter-g_pkg.html#src/lib/prettyprint/big/src/core-prettyprinter-g.pkg"><TT>src/lib/prettyprint/big/src/core-prettyprinter-g.pkg</TT></A><BR><CODE>#</CODE><BR>
<CODE>api&nbsp;Core_Prettyprinter&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;typ:&nbsp;Core_Prettyprinter_Types;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Prettyprinter;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Pp&nbsp;&nbsp;=&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prettyprinter&nbsp;&nbsp;;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Npp&nbsp;=&nbsp;Null_Or(&nbsp;Prettyprinter&nbsp;);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Prettyprint_Output_Stream;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Traitful_Text;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Styled_Strings&nbsp;wrap&nbsp;a&nbsp;string&nbsp;plus&nbsp;blink/bold/color/...&nbsp;information</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Texttraits;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;open_box:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Prettyprinter,&nbsp;typ::Left_Margin_Is,&nbsp;typ::Wrap_Policy,&nbsp;Int)&nbsp;-&gt;&nbsp;Void;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;'Int'&nbsp;==&nbsp;target_width.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;indent:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Prettyprinter,&nbsp;Int)&nbsp;-&gt;&nbsp;Void;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;break':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Prettyprinter,&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;ifnotwrap:&nbsp;&nbsp;{&nbsp;blanks:&nbsp;Int,&nbsp;&nbsp;&nbsp;tab_to:&nbsp;Int,&nbsp;&nbsp;&nbsp;tabstops_are_every:&nbsp;Int&nbsp;},</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ifwrap:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;blanks:&nbsp;Int,&nbsp;&nbsp;&nbsp;tab_to:&nbsp;Int,&nbsp;&nbsp;&nbsp;tabstops_are_every:&nbsp;Int&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Void;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;horizontal:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typ::Wrap_Policy;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;vertical:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typ::Wrap_Policy;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;normal:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typ::Wrap_Policy;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;ragged_right:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typ::Wrap_Policy;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;make_prettyprinter:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Prettyprint_Output_Stream&nbsp;-&gt;&nbsp;List(typ::Prettyprinter_Configuration_Args)&nbsp;-&gt;&nbsp;Pp;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;process_mill_options</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&nbsp;(typ::Prettyprinter_Configuration_Args)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;default_target_box_width:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Int,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default_wrap_policy:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typ::Wrap_Policy,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default_left_margin_is:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;typ::Left_Margin_Is,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabstops_are_every:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Int</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;get_prettyprint_output_stream:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pp&nbsp;-&gt;&nbsp;Prettyprint_Output_Stream;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;flush_prettyprinter:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pp&nbsp;-&gt;&nbsp;Void;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;close_prettyprinter:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pp&nbsp;-&gt;&nbsp;Void;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;traitful_text:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Pp&nbsp;-&gt;&nbsp;Traitful_Text&nbsp;-&gt;&nbsp;Void;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;set_rulename_for_current_box:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Pp,&nbsp;String)&nbsp;-&gt;&nbsp;Void;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;nblanks:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Int&nbsp;-&gt;&nbsp;String;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Temporary&nbsp;convenience&nbsp;function.&nbsp;Returns&nbsp;a&nbsp;string&nbsp;containing&nbsp;(only)&nbsp;given&nbsp;number&nbsp;of&nbsp;blanks.</CODE><BR>
<CODE>};</CODE><BR><BR><BR>
<CODE>####################################################################################################</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Note&nbsp;[1]:&nbsp;&nbsp;Prettyprint&nbsp;mill&nbsp;motivation&nbsp;and&nbsp;overview.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Nomenclature:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;Prettyprinter:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;package&nbsp;which&nbsp;renders&nbsp;a&nbsp;given&nbsp;datastructure&nbsp;as&nbsp;indented&nbsp;text.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;system&nbsp;will&nbsp;usually&nbsp;have&nbsp;many&nbsp;datastructures&nbsp;and&nbsp;consequently&nbsp;many&nbsp;prettyprinters.&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;Prettyprint&nbsp;mill:&nbsp;&nbsp;A&nbsp;package&nbsp;which&nbsp;provides&nbsp;the&nbsp;underlying&nbsp;infrastructure&nbsp;needed&nbsp;by&nbsp;all&nbsp;prettyprinters.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;This&nbsp;dirtree&nbsp;contains&nbsp;my&nbsp;third&nbsp;(2014)&nbsp;rewrite&nbsp;of&nbsp;the&nbsp;Mythryl&nbsp;prettyprint&nbsp;mill.</CODE><BR>
<CODE>#&nbsp;It&nbsp;is&nbsp;based&nbsp;on&nbsp;John&nbsp;H&nbsp;Reppy's&nbsp;(2005)&nbsp;SML/NJ&nbsp;prettyprint&nbsp;mill,&nbsp;which&nbsp;in&nbsp;turn</CODE><BR>
<CODE>#&nbsp;is&nbsp;based&nbsp;on&nbsp;Pierre&nbsp;Weis'&nbsp;1995&nbsp;Ocaml&nbsp;prettyprint&nbsp;mill.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;The&nbsp;prettyprint&nbsp;system&nbsp;has&nbsp;a&nbsp;layered&nbsp;architecture.</CODE><BR>
<CODE>#&nbsp;Taking&nbsp;a&nbsp;leaf&nbsp;from&nbsp;the&nbsp;X-server&nbsp;playbook,&nbsp;the&nbsp;intent&nbsp;is:</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Core&nbsp;layer&nbsp;provides&nbsp;mechanism&nbsp;without&nbsp;policy.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Base&nbsp;layer&nbsp;adds&nbsp;client-code&nbsp;conveniences.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Standard&nbsp;layer&nbsp;implements&nbsp;more&nbsp;conveniences&nbsp;and&nbsp;any&nbsp;required&nbsp;policy.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Data-structure-specific&nbsp;prettyprinters&nbsp;are&nbsp;built&nbsp;on&nbsp;the&nbsp;standard&nbsp;layer.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;The&nbsp;central&nbsp;line&nbsp;of&nbsp;development&nbsp;here&nbsp;is</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;core-prettyprinter-g.pkg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;The&nbsp;central&nbsp;formatting&nbsp;engine.&nbsp;&nbsp;Exports&nbsp;an&nbsp;api&nbsp;of&nbsp;minimal&nbsp;complexity.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base-prettyprinter-g.pkg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Wraps&nbsp;the&nbsp;core&nbsp;prettyprint&nbsp;mill&nbsp;with&nbsp;an&nbsp;API&nbsp;more&nbsp;convenient&nbsp;to&nbsp;code&nbsp;clients.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;standard-prettyprinter-g.pkg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Wraps&nbsp;the&nbsp;base&nbsp;prettyprint&nbsp;mill&nbsp;with&nbsp;additional&nbsp;conveniences.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;standard-prettyprinter.pkg&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;The&nbsp;standard&nbsp;instantiation&nbsp;of&nbsp;the&nbsp;previous,&nbsp;used&nbsp;pervasively</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;in&nbsp;prettyprinters&nbsp;throughout&nbsp;the&nbsp;codebase.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Independently&nbsp;of&nbsp;the&nbsp;layering,&nbsp;the&nbsp;codebase&nbsp;is&nbsp;also&nbsp;structured&nbsp;to&nbsp;allow</CODE><BR>
<CODE>#&nbsp;prettyprinters&nbsp;to&nbsp;be&nbsp;built&nbsp;which&nbsp;output&nbsp;text&nbsp;in&nbsp;various&nbsp;formats&nbsp;such&nbsp;as</CODE><BR>
<CODE>#&nbsp;plain&nbsp;ascii,&nbsp;ascii&nbsp;with&nbsp;ansi-terminal&nbsp;escape&nbsp;sequences&nbsp;for&nbsp;bold&nbsp;etc,</CODE><BR>
<CODE>#&nbsp;and&nbsp;html,&nbsp;via&nbsp;the&nbsp;'out'&nbsp;and&nbsp;'tt'&nbsp;arguments&nbsp;to&nbsp;the&nbsp;above&nbsp;generics.</CODE><BR>
<CODE>#&nbsp;However&nbsp;at&nbsp;present&nbsp;in&nbsp;practice&nbsp;we&nbsp;use&nbsp;plain&nbsp;ascii&nbsp;exclusively.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;Mythryl&nbsp;is&nbsp;assembled&nbsp;from&nbsp;parts&nbsp;built&nbsp;at&nbsp;many&nbsp;institutions,&nbsp;which&nbsp;tend</CODE><BR>
<CODE>#&nbsp;to&nbsp;all&nbsp;instantiate&nbsp;their&nbsp;own&nbsp;prettyprint&nbsp;mills&nbsp;for&nbsp;no&nbsp;very&nbsp;good&nbsp;reason.</CODE><BR>
<CODE>#&nbsp;I'm&nbsp;working&nbsp;to&nbsp;replace&nbsp;these&nbsp;with&nbsp;standard-prettyprinter.pkg,&nbsp;but</CODE><BR>
<CODE>#&nbsp;for&nbsp;the&nbsp;moment&nbsp;I've&nbsp;settled&nbsp;on&nbsp;concentrating&nbsp;them&nbsp;in&nbsp;this&nbsp;directory</CODE><BR>
<CODE>#&nbsp;at&nbsp;least&nbsp;so&nbsp;the&nbsp;redundancy&nbsp;is&nbsp;more&nbsp;obvious&nbsp;and&nbsp;easier&nbsp;to&nbsp;work&nbsp;on.</CODE><BR>
<CODE>#&nbsp;These&nbsp;redundant&nbsp;prettyprint&nbsp;mills&nbsp;are&nbsp;built&nbsp;on&nbsp;&nbsp;base-prettyprinter-g.pkg.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;The&nbsp;core&nbsp;concept&nbsp;used&nbsp;to&nbsp;structure&nbsp;text&nbsp;to&nbsp;be&nbsp;prettyprinted&nbsp;is&nbsp;the&nbsp;'box'.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;A&nbsp;box&nbsp;represents&nbsp;text&nbsp;to&nbsp;be&nbsp;printed&nbsp;at&nbsp;a&nbsp;given&nbsp;level&nbsp;of&nbsp;indentation.&nbsp;&nbsp;A&nbsp;box</CODE><BR>
<CODE>#&nbsp;has&nbsp;contents&nbsp;to&nbsp;be&nbsp;printed&nbsp;and&nbsp;a&nbsp;target&nbsp;width-in-chars.&nbsp;&nbsp;It&nbsp;tries&nbsp;to&nbsp;format</CODE><BR>
<CODE>#&nbsp;the&nbsp;contents&nbsp;to&nbsp;fit&nbsp;within&nbsp;its&nbsp;assigned&nbsp;width.&nbsp;&nbsp;The&nbsp;box&nbsp;width&nbsp;is&nbsp;interpreted</CODE><BR>
<CODE>#&nbsp;as&nbsp;a&nbsp;soft&nbsp;limit&nbsp;to&nbsp;be&nbsp;respected&nbsp;on&nbsp;a&nbsp;best-effort&nbsp;basis,&nbsp;rather&nbsp;than&nbsp;a&nbsp;hard</CODE><BR>
<CODE>#&nbsp;limit&nbsp;to&nbsp;be&nbsp;obeyed&nbsp;at&nbsp;all&nbsp;costs.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;In&nbsp;general&nbsp;a&nbsp;given&nbsp;box&nbsp;may&nbsp;be&nbsp;printed&nbsp;either&nbsp;monoline&nbsp;or&nbsp;multiline,&nbsp;depending</CODE><BR>
<CODE>#&nbsp;on&nbsp;the&nbsp;size&nbsp;and&nbsp;complexity&nbsp;of&nbsp;the&nbsp;subexpressions&nbsp;within&nbsp;it.&nbsp;&nbsp;One&nbsp;of&nbsp;the&nbsp;core</CODE><BR>
<CODE>#&nbsp;responsibilities&nbsp;of&nbsp;core-prettyprinter-g.pkg&nbsp;is&nbsp;to&nbsp;decide&nbsp;which&nbsp;boxes&nbsp;to</CODE><BR>
<CODE>#&nbsp;print&nbsp;monoline&nbsp;and&nbsp;which&nbsp;to&nbsp;print&nbsp;multiline.&nbsp;&nbsp;This&nbsp;is&nbsp;done&nbsp;basically&nbsp;just&nbsp;by</CODE><BR>
<CODE>#&nbsp;first&nbsp;trying&nbsp;to&nbsp;print&nbsp;it&nbsp;monoline,&nbsp;and&nbsp;retreating&nbsp;to&nbsp;multiline&nbsp;if&nbsp;that&nbsp;does</CODE><BR>
<CODE>#&nbsp;not&nbsp;work.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;In&nbsp;slightly&nbsp;more&nbsp;detail&nbsp;(but&nbsp;still&nbsp;simplified),&nbsp;the&nbsp;prettyprint&nbsp;mill&nbsp;sees</CODE><BR>
<CODE>#&nbsp;the&nbsp;contents&nbsp;of&nbsp;a&nbsp;box&nbsp;as&nbsp;consisting&nbsp;of&nbsp;a&nbsp;list&nbsp;of&nbsp;elements&nbsp;drawn&nbsp;from:</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;TEXT,&nbsp;just&nbsp;a&nbsp;passive&nbsp;string&nbsp;of&nbsp;characters.</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;BOX,&nbsp;a&nbsp;recursively&nbsp;nested&nbsp;box.</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;NEWLINE,&nbsp;which&nbsp;the&nbsp;mill&nbsp;renders&nbsp;by&nbsp;doing&nbsp;a&nbsp;newline&nbsp;and&nbsp;then&nbsp;indenting</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;left&nbsp;margin&nbsp;of&nbsp;the&nbsp;current&nbsp;box&nbsp;by&nbsp;printing&nbsp;blanks.</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;BREAK,&nbsp;which&nbsp;the&nbsp;mill&nbsp;is&nbsp;free&nbsp;to&nbsp;render&nbsp;as&nbsp;either&nbsp;a&nbsp;blank&nbsp;or&nbsp;a&nbsp;NEWLINE.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When&nbsp;rendered&nbsp;as&nbsp;a&nbsp;NEWLINE,&nbsp;we&nbsp;say&nbsp;the&nbsp;break&nbsp;has&nbsp;been&nbsp;"wrapped".</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;The&nbsp;Ocaml&nbsp;and&nbsp;SML/NJ&nbsp;prettyprint&nbsp;mills&nbsp;process&nbsp;input&nbsp;line-by-line&nbsp;as&nbsp;a</CODE><BR>
<CODE>#&nbsp;stream.&nbsp;&nbsp;The&nbsp;resulting&nbsp;limited&nbsp;context&nbsp;makes&nbsp;it&nbsp;hard&nbsp;to&nbsp;wrap&nbsp;breaks&nbsp;in</CODE><BR>
<CODE>#&nbsp;an&nbsp;esthetically&nbsp;satisfying&nbsp;way,&nbsp;so&nbsp;the&nbsp;Mythryl&nbsp;prettyprint&nbsp;mill</CODE><BR>
<CODE>#&nbsp;instead&nbsp;buffers&nbsp;a&nbsp;complete&nbsp;set&nbsp;of&nbsp;nested&nbsp;boxes&nbsp;before&nbsp;beginning</CODE><BR>
<CODE>#&nbsp;formatting,&nbsp;allowing&nbsp;use&nbsp;of&nbsp;more&nbsp;sophisticated&nbsp;wrapping&nbsp;algorithms.</CODE><BR>
<CODE>#&nbsp;(This&nbsp;takes&nbsp;more&nbsp;memory,&nbsp;but&nbsp;ram&nbsp;is&nbsp;much&nbsp;cheaper&nbsp;today&nbsp;than&nbsp;in&nbsp;1995</CODE><BR>
<CODE>#&nbsp;when&nbsp;the&nbsp;original&nbsp;Ocaml&nbsp;prettyprint&nbsp;mill&nbsp;was&nbsp;written.)</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;To&nbsp;a&nbsp;first&nbsp;approximation&nbsp;the&nbsp;algorithm&nbsp;used&nbsp;is:</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Format&nbsp;innermost&nbsp;boxes&nbsp;first.&nbsp;&nbsp;Formatting&nbsp;of&nbsp;a&nbsp;given&nbsp;box&nbsp;is&nbsp;independent</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;boxes&nbsp;exterior&nbsp;to&nbsp;it,&nbsp;and&nbsp;depends&nbsp;only&nbsp;on&nbsp;the&nbsp;height&nbsp;and&nbsp;width&nbsp;of</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boxes&nbsp;immediately&nbsp;within&nbsp;it.&nbsp;&nbsp;(Formatting&nbsp;innermost&nbsp;boxes&nbsp;first&nbsp;means</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;when&nbsp;a&nbsp;given&nbsp;box&nbsp;is&nbsp;formatted,&nbsp;the&nbsp;height&nbsp;and&nbsp;width&nbsp;of&nbsp;subboxes</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;within&nbsp;it&nbsp;are&nbsp;known&nbsp;exactly.&nbsp;&nbsp;This&nbsp;makes&nbsp;formatting&nbsp;easier&nbsp;to&nbsp;implement</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;makes&nbsp;the&nbsp;results&nbsp;of&nbsp;formatting&nbsp;more&nbsp;intuitively&nbsp;understandable.)</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;To&nbsp;format&nbsp;a&nbsp;box,&nbsp;first&nbsp;decide&nbsp;if&nbsp;it&nbsp;can&nbsp;be&nbsp;formatted&nbsp;monoline.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A&nbsp;box&nbsp;can&nbsp;be&nbsp;formatted&nbsp;monoline&nbsp;if:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;It&nbsp;contains&nbsp;no&nbsp;NEWLINEs.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;All&nbsp;subboxes&nbsp;are&nbsp;monoline.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;The&nbsp;summed&nbsp;length&nbsp;of&nbsp;all&nbsp;box&nbsp;contents,&nbsp;including&nbsp;subboxes,</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treating&nbsp;BREAKs&nbsp;as&nbsp;blanks,&nbsp;is&nbsp;less&nbsp;than&nbsp;the&nbsp;assigned&nbsp;box&nbsp;width.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;If&nbsp;the&nbsp;box&nbsp;is&nbsp;monoline,&nbsp;just&nbsp;print&nbsp;it&nbsp;as&nbsp;a&nbsp;horizontal&nbsp;string&nbsp;of&nbsp;chars:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;Print&nbsp;BREAKs&nbsp;as&nbsp;blanks.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;Print&nbsp;TEXT&nbsp;elements&nbsp;in&nbsp;the&nbsp;obvious&nbsp;way&nbsp;--&nbsp;output&nbsp;a&nbsp;string&nbsp;of&nbsp;chars.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;Print&nbsp;monoline&nbsp;subboxes&nbsp;just&nbsp;like&nbsp;TEXT&nbsp;elements.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;There&nbsp;are&nbsp;no&nbsp;NEWLINES&nbsp;to&nbsp;print,&nbsp;by&nbsp;definition&nbsp;of&nbsp;monoline&nbsp;box.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;There&nbsp;are&nbsp;no&nbsp;multiline&nbsp;subboxes&nbsp;to&nbsp;print,&nbsp;&nbsp;by&nbsp;definition&nbsp;of&nbsp;monoline&nbsp;box.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;If&nbsp;the&nbsp;box&nbsp;is&nbsp;multiline:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;Print&nbsp;NEWLINEs&nbsp;by&nbsp;doing&nbsp;a&nbsp;newline&nbsp;and&nbsp;spacing&nbsp;over&nbsp;to&nbsp;assigned&nbsp;left&nbsp;margin&nbsp;of&nbsp;box.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;Print&nbsp;BREAKs&nbsp;as&nbsp;newlines.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;Start&nbsp;the&nbsp;box&nbsp;as&nbsp;though&nbsp;it&nbsp;started&nbsp;with&nbsp;a&nbsp;NEWLINE.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;Print&nbsp;TEXT&nbsp;elements&nbsp;in&nbsp;the&nbsp;obvious&nbsp;way&nbsp;--&nbsp;output&nbsp;a&nbsp;string&nbsp;of&nbsp;chars.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;Print&nbsp;monoline&nbsp;subboxes&nbsp;as&nbsp;though&nbsp;they&nbsp;were&nbsp;TEXT&nbsp;elements.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o&nbsp;Print&nbsp;multiline&nbsp;subboxes&nbsp;recursively&nbsp;just&nbsp;like&nbsp;current&nbsp;multiline&nbsp;box.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;(You&nbsp;may&nbsp;want&nbsp;to&nbsp;read&nbsp;the&nbsp;above&nbsp;twice;&nbsp;&nbsp;if&nbsp;you&nbsp;understand&nbsp;it,&nbsp;using&nbsp;and&nbsp;maintaining</CODE><BR>
<CODE>#&nbsp;these&nbsp;packages&nbsp;should&nbsp;be&nbsp;fairly&nbsp;straightforward,&nbsp;otherwise&nbsp;it&nbsp;is&nbsp;likely&nbsp;to&nbsp;be&nbsp;an</CODE><BR>
<CODE>#&nbsp;exercise&nbsp;in&nbsp;frustration&nbsp;and&nbsp;wasted&nbsp;time.)</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;In&nbsp;practice&nbsp;to&nbsp;get&nbsp;acceptable&nbsp;prettyprint&nbsp;results&nbsp;and&nbsp;to&nbsp;be&nbsp;flexible&nbsp;enough&nbsp;to</CODE><BR>
<CODE>#&nbsp;accomodate&nbsp;different&nbsp;tastes,&nbsp;we&nbsp;need&nbsp;something&nbsp;&nbsp;more&nbsp;featureful&nbsp;than&nbsp;the&nbsp;above:</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Different&nbsp;users&nbsp;want&nbsp;different&nbsp;base&nbsp;indentation&nbsp;distances,&nbsp;so&nbsp;we&nbsp;want&nbsp;tabstop</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spacing&nbsp;to&nbsp;be&nbsp;configurable&nbsp;on&nbsp;a&nbsp;per&nbsp;prettyprinter&nbsp;instance&nbsp;basis.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Prettyprinters&nbsp;may&nbsp;want&nbsp;different&nbsp;boxes&nbsp;to&nbsp;be&nbsp;indented&nbsp;different&nbsp;numbers&nbsp;of</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabstops.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Sometimes&nbsp;we&nbsp;want&nbsp;indentation&nbsp;by&nbsp;a&nbsp;minimum&nbsp;of&nbsp;(say)&nbsp;one&nbsp;blank,&nbsp;other&nbsp;times&nbsp;we</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;content&nbsp;so&nbsp;long&nbsp;as&nbsp;the&nbsp;box&nbsp;winds&nbsp;up&nbsp;on&nbsp;a&nbsp;tabstop.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Sometimes&nbsp;we&nbsp;want&nbsp;to&nbsp;move&nbsp;(say)&nbsp;two&nbsp;tabstops,&nbsp;other&nbsp;times&nbsp;we&nbsp;want&nbsp;to</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;move&nbsp;to&nbsp;(say)&nbsp;an&nbsp;even-numbered&nbsp;tabstop.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Prettyprinters&nbsp;may&nbsp;want&nbsp;some&nbsp;boxes&nbsp;to&nbsp;be&nbsp;indented&nbsp;relative&nbsp;to&nbsp;the&nbsp;left&nbsp;margin</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;other&nbsp;boxes&nbsp;to&nbsp;be&nbsp;indented&nbsp;relative&nbsp;to&nbsp;the&nbsp;current&nbsp;cursor&nbsp;position.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;A&nbsp;user&nbsp;may&nbsp;want&nbsp;an&nbsp;non-wrapped&nbsp;BREAK&nbsp;to&nbsp;render&nbsp;not&nbsp;just&nbsp;as&nbsp;a&nbsp;single&nbsp;blank,&nbsp;but</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;several&nbsp;blanks&nbsp;and/or&nbsp;a&nbsp;move-to-tabstop&nbsp;command.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;o&nbsp;&nbsp;Prettyprinters&nbsp;may&nbsp;want&nbsp;different&nbsp;boxes&nbsp;to&nbsp;use&nbsp;different&nbsp;algorithms&nbsp;for&nbsp;deciding</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;which&nbsp;BREAKs&nbsp;to&nbsp;wrap&nbsp;and&nbsp;which&nbsp;to&nbsp;leave&nbsp;as&nbsp;blanks.&nbsp;&nbsp;The&nbsp;two&nbsp;simplest&nbsp;policies&nbsp;are:</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HORIZONTAL:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Wrap&nbsp;no&nbsp;BREAKs&nbsp;in&nbsp;the&nbsp;box&nbsp;--&nbsp;pack&nbsp;box&nbsp;contents&nbsp;horizontally.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VERTICAL:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Wrap&nbsp;all&nbsp;BREAKs&nbsp;in&nbsp;the&nbsp;box&nbsp;--&nbsp;pack&nbsp;box&nbsp;contents&nbsp;vertically.</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;formatting&nbsp;code&nbsp;and&nbsp;datastructures,&nbsp;the&nbsp;workhorse&nbsp;policy&nbsp;is:</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ALIGN:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Align&nbsp;box&nbsp;contents&nbsp;horizontally&nbsp;if&nbsp;possible,&nbsp;else&nbsp;vertically.</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I.e.,&nbsp;wrap&nbsp;no&nbsp;BREAKs&nbsp;if&nbsp;the&nbsp;result&nbsp;fits&nbsp;in&nbsp;the&nbsp;box&nbsp;width&nbsp;(monoline&nbsp;box)</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;wrap&nbsp;all&nbsp;BREAKs&nbsp;(multiline&nbsp;box).</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;For&nbsp;running&nbsp;text,&nbsp;the&nbsp;traditional&nbsp;policy&nbsp;is:</CODE><BR>
<CODE>#&nbsp;</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RAGGED_RIGHT:&nbsp;&nbsp;&nbsp;Paragraph-style&nbsp;wrapping&nbsp;where&nbsp;each&nbsp;line&nbsp;is&nbsp;wrapped&nbsp;at</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;last&nbsp;possible&nbsp;BREAK&nbsp;consistent&nbsp;with&nbsp;fitting&nbsp;the&nbsp;line</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;the&nbsp;given&nbsp;box&nbsp;width.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;FUTURE&nbsp;DIRECTIONS:</CODE><BR>
<CODE>#&nbsp;If&nbsp;we&nbsp;wind&nbsp;up&nbsp;wanting&nbsp;more&nbsp;flexibility,&nbsp;one&nbsp;try&nbsp;might&nbsp;be&nbsp;defining&nbsp;in</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="#src/lib/prettyprint/big/src/core-prettyprinter.api"><TT>src/lib/prettyprint/big/src/core-prettyprinter.api</TT></A><BR><CODE>#&nbsp;a&nbsp;new&nbsp;Phase1_Token&nbsp;case&nbsp;CUSTOM_BREAK&nbsp;with&nbsp;the&nbsp;semantics&nbsp;that&nbsp;the</CODE><BR>
<CODE>#&nbsp;end-user&nbsp;supplies&nbsp;a&nbsp;function&nbsp;which&nbsp;is&nbsp;called&nbsp;after&nbsp;the&nbsp;regular&nbsp;wrapping</CODE><BR>
<CODE>#&nbsp;pass&nbsp;and&nbsp;which&nbsp;is&nbsp;given&nbsp;full&nbsp;access&nbsp;to&nbsp;the&nbsp;box.contents&nbsp;(and&nbsp;to</CODE><BR>
<CODE>#&nbsp;print_box(box.contents)&nbsp;in&nbsp;order&nbsp;to&nbsp;make&nbsp;a&nbsp;wrap&nbsp;decision;&nbsp;it&nbsp;would</CODE><BR>
<CODE>#&nbsp;probably&nbsp;return&nbsp;{&nbsp;wrap:&nbsp;Boolean,&nbsp;blanks:&nbsp;Int,&nbsp;tab_to:&nbsp;Int&nbsp;}.&nbsp;This</CODE><BR>
<CODE>#&nbsp;would&nbsp;allow&nbsp;the&nbsp;custom&nbsp;code&nbsp;to&nbsp;look&nbsp;at&nbsp;the&nbsp;mono/multiline&nbsp;status&nbsp;of</CODE><BR>
<CODE>#&nbsp;all&nbsp;immediate&nbsp;sub-boxes,&nbsp;peer&nbsp;inside&nbsp;subboxes,&nbsp;do&nbsp;a&nbsp;test&nbsp;rendering</CODE><BR>
<CODE>#&nbsp;and&nbsp;look&nbsp;for&nbsp;parallel&nbsp;constructs,&nbsp;whatever.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Or&nbsp;we&nbsp;could&nbsp;just&nbsp;accept&nbsp;a&nbsp;post-optimize&nbsp;function&nbsp;which&nbsp;is&nbsp;allowed</CODE><BR>
<CODE>#&nbsp;rewrite&nbsp;the&nbsp;post-wrap/pre-print&nbsp;box-tree&nbsp;arbitrarily...&nbsp;that&nbsp;might</CODE><BR>
<CODE>#&nbsp;be&nbsp;more&nbsp;to&nbsp;the&nbsp;point&nbsp;if&nbsp;we&nbsp;want&nbsp;to&nbsp;get&nbsp;really&nbsp;sophisticated&nbsp;along</CODE><BR>
<CODE>#&nbsp;the&nbsp;lines&nbsp;of&nbsp;rendering&nbsp;parallel&nbsp;constructs&nbsp;as&nbsp;parallel&nbsp;text.&nbsp;&nbsp;If</CODE><BR>
<CODE>#&nbsp;so,&nbsp;we&nbsp;should&nbsp;make&nbsp;explicit&nbsp;in&nbsp;the&nbsp;post-wrap&nbsp;tree&nbsp;the&nbsp;decisions</CODE><BR>
<CODE>#&nbsp;which&nbsp;are&nbsp;currently&nbsp;made&nbsp;in&nbsp;the&nbsp;fly&nbsp;by&nbsp;the&nbsp;print&nbsp;pass.</CODE><BR><BR><BR><BR>
<CODE>##&nbsp;COPYRIGHT&nbsp;(c)&nbsp;2005&nbsp;John&nbsp;Reppy&nbsp;(http://www.cs.uchicago.edu/~jhr)</CODE><BR>
<CODE>##&nbsp;All&nbsp;rights&nbsp;reserved.</CODE><BR>
<CODE>##&nbsp;Subsequent&nbsp;changes&nbsp;by&nbsp;Jeff&nbsp;Prothero&nbsp;Copyright&nbsp;(c)&nbsp;2010-2015,</CODE><BR>
<CODE>##&nbsp;released&nbsp;per&nbsp;terms&nbsp;of&nbsp;SMLNJ-COPYRIGHT.</CODE><BR>
</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-src_lib_prettyprint_big_src_core-prettyprinter-types_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_prettyprint_big_src_out_prettyprint-output-stream_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
