<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Mythryl eval Operators</TITLE>
</HEAD>
<BODY >
<A HREF="my-Mythryl_Backticks_Operators-2.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Mythryl_for_SML_Programmers.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Further_Reading.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc202">5.7.20</A>  Mythryl eval Operators</H3><P>Scripting languages such as Perl frequently implement an <TT>eval</TT> operator 
allowing execution of source code strings dynamically created by the running 
script. This has a variety of handy uses ranging from implementing systems 
which interactively execute user-entered code to system which dynamically 
compile special-case code at need.</P><P>The <SPAN STYLE="font-variant:small-caps">SML/NJ</SPAN> codebase has been implemented from the start upon an 
incremental compiler design which makes implementation of such an operator 
straightforward, but unfortunately there has never been a supported 
interface to this functionality. Thus, for example, Moonflare&#X2019;s 
<A HREF="http://www.moonflare.com/code/mlud/summary.php">MLud</A> server written in SML/NJ had to use an undocumented API to access this 
functionality, which API was broken by subsequent releases. Perhaps 
uncoincidentally, development of this software ceased shortly thereafter.</P><P>Mythryl implements a supported <TT>eval</TT> operator for accessing incremental 
compilation functionality:</P><PRE CLASS="verbatim">    linux&gt; my

    eval:  evali "2 + 2";

    4
</PRE><P>Perl and bash, being dynamically typed, are not bothered by the fact 
that the type of <TT>eval</TT> depends entirely upon the contents of its 
string argument.</P><P>In a language like <SPAN STYLE="font-variant:small-caps">SML</SPAN> or Mythryl, this ill-typedness is more 
problematic. This is not an unsurmountable problem. If it were, 
<SPAN STYLE="font-variant:small-caps">SML</SPAN>&#X2019;s interactive mode would not be able to print out the 
value and type of interactively entered expressions. But the solution 
is not something you would want to examine immediately before a meal. 
This problem may relate to the lack of a supported <SPAN STYLE="font-variant:small-caps">SML/NJ</SPAN> <SPAN STYLE="font-variant:small-caps">API</SPAN> 
for accessing incremental compilation functionality.</P><P>Eventually, <TT>eval</TT> should be tweaked to have type <TT>String -&gt; X</TT> 
where X can change from invocation to invocation. (Implementing this 
might be a nice undergrad compiler course project. Email me a patch 
and I&#X2019;ll merge it in!)</P><P>For the moment, at least, Mythryl&#X2019;s solution is just to supply in the 
library a half dozen odd statically typed <TT>eval</TT> variants covering 
common cases:</P><PRE CLASS="verbatim">
    eval:   String -&gt; Void;

    evali:  String -&gt; Int;
    evalf:  String -&gt; Float;
    evals:  String -&gt; String;

    evalli: String -&gt; List( Int    );
    evallf: String -&gt; List( Float  );
    evalls: String -&gt; List( String );

</PRE><P>Additional variants may be implemented as needed by 
cloning and tweaking the existing routines.</P><P>This isn&#X2019;t a great solution, but it is much better than nothing!</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Mythryl_Backticks_Operators-2.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Mythryl_for_SML_Programmers.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Further_Reading.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
