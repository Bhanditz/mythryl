<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Improvements to the core Mythryl codebase</TITLE>
</HEAD>
<BODY >
<A HREF="my-Native_Mythryl_libraries.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="index.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Oop_Support.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H2 CLASS="section"><A NAME="htoc223">9.5</A>  Improvements to the core Mythryl codebase</H2><BLOCKQUOTE CLASS="quotation"><FONT SIZE=1>
&#X201C;A day will come when beings,<BR>
  now latent in our thoughts<BR>
  and hidden in our loins,<BR>
  shall stand upon Earth<BR>
  as a footstool and laugh,<BR>
  and reach out their hands<BR>
  amidst the stars.&#X201D;<BR>
</FONT><P><FONT SIZE=1>                            &#X2014;</FONT><FONT SIZE=1><EM>H.G. Wells, 1902</EM></FONT><FONT SIZE=1>
</FONT></P></BLOCKQUOTE><P>Closer to home, useful contributions (again in roughly increasing 
order of difficulty) include:</P><UL CLASS="itemize"><LI CLASS="li-itemize">
Check out the existing libraries like <TT>x-kit</TT>, see what works, fix what does not, document both, write tutorials and examples.
</LI><LI CLASS="li-itemize">Protect existing functionality from bitrot by writing additional unit tests.
</LI><LI CLASS="li-itemize">Expand and improve the <TT>winix</TT> cross-platform OS/filesystem interface to include more functionality common to Windows, MacOS and *nix.
</LI><LI CLASS="li-itemize">Improve the <SPAN STYLE="font-variant:small-caps">GNU</SPAN> autotools based installation logic.
</LI><LI CLASS="li-itemize">Grep the codebase for <SPAN STYLE="font-variant:small-caps">FIXME</SPAN>, pick one, and fix it.
</LI><LI CLASS="li-itemize">Do a proper Debian package for Mythryl.
</LI><LI CLASS="li-itemize">Clean up the C runtime code so it compiles complaint-free under <TT>gcc -Wall</TT>. (I did this once, and lost it in a laptop disk futzup. <EM>sigh</EM>.)
</LI><LI CLASS="li-itemize">Change the C runtime to use <TT>typedef</TT>&#X2019;d integer types everywhere, as preparation for an AMD-64 port.
</LI><LI CLASS="li-itemize">Revive the currently broken backend architecture-description logic <TT>adl</TT>.
</LI><LI CLASS="li-itemize">Do a port to AMD-64. (The biggest short-term win from this would be having a decent number of registers, unlike intel32: Probably good for a 15-30</LI><LI CLASS="li-itemize">Re-activate and maintain the Windows or Mac ports.
</LI><LI CLASS="li-itemize">Reduce the start-up time for Mythryl scripts by pre-forking several ready-to-run mythryld processes.
</LI><LI CLASS="li-itemize">Implement strings-as-types, to reduce the contortions of phantom type programming.
</LI><LI CLASS="li-itemize">Implement a cleaner, more typesafe facility for generating Mythryl source code than just contacatenating strings.
</LI><LI CLASS="li-itemize">Rewrite Makelib to cleanly separate parsing and processing.
</LI><LI CLASS="li-itemize">Implement <SPAN STYLE="font-variant:small-caps">OOP</SPAN> support per Bernard Berthomeiu&#X2019;s paper. (See next section.)
</LI><LI CLASS="li-itemize">Revive Fu&#X2019;s UHawaii 1999 thesis work &#X201C;Design and Implementation of an Operating system in Standard ML&#X201D; and port to Mythryl. 
(This includes a port of the CMU Fox Project&#X2019;s SML TCP/IP protocol stack.) Add in the x-kit code to allow standalone Mythryl 
applications to function as X clients.
</LI><LI CLASS="li-itemize">Implement Generalized Abstract Types. The Peyton Jones/Washburn/Weirich &#X201C;Wobbly Types&#X201D; paper is a good starting point.
</LI><LI CLASS="li-itemize">Kill the compiler&#X2019;s overflow checking, except when specifically requested.
</LI><LI CLASS="li-itemize">Kill the tagged_int type. It screws up the surface semantics for the sake of a few percent gain in space/time efficiency, which is always a bad idea.
</LI><LI CLASS="li-itemize">Kill the sequence headers (SEQHDR) on strings and vectors. These are inordinately expensive in time and space and intrude runtime typing into a system based on compile-time typing.
</LI><LI CLASS="li-itemize">Design and implement an application-programmer API for accessing the codebase&#X2019;s incremental compilation capabilities. The <TT>.lib</TT> &#X201C;setup&#X201D; code has much of the required machinery.
</LI><LI CLASS="li-itemize">Clean up the .lib file syntax. I suggest making .lib files into vanilla Mythryl code executed at maketime.
</LI><LI CLASS="li-itemize">Make the type-checker an easily replaced generic: There is an enormous amount of good research coming out on improved/alternate typechecking.
</LI><LI CLASS="li-itemize">Re-implement typechecking based on Derek Dreyer and Karl Crary&#X2019;s CMU thesis work: The current stamp-based logic is a hoary kludge whose time has come. This will include phasing out equality types at the surface syntax level.
</LI><LI CLASS="li-itemize">Implement alternate typechecking algorithms, selectable by a pragma or such: Dependent types and linear types are attractive targets.
</LI><LI CLASS="li-itemize">Re-activate the codebase support for inter-package inlining. Be alert: It was probably disabled for a good reason.
</LI><LI CLASS="li-itemize">Do a general tune-up of existing backend code optimization. There is probably a lot of low-hanging fruit here. You&#X2019;ll want to make/steal a benchmark suite to meaure progress and prevent regression.
</LI><LI CLASS="li-itemize">Re/activate some or all of the backend optimizations based on (e.g.) SSA (Static Single Assignment). This will probably break the garbage collector if you&#X2019;re not careful &#X2014; so be careful.
</LI><LI CLASS="li-itemize">Do a production-quality reimplemention of Mythryl support for parallel compiles of the compiler on multicore machines.
</LI><LI CLASS="li-itemize">Do a production-quality rewrite of the c-glue facility (nee&#X2019; Matthias Blume&#X2019;s NLFFI) emphasizing semi-automated interface generation driven by SWIG-like spec files, 
rather than fully automatic interface generation driven only by <TT>.h</TT> files, which is heroic and a great research project, but not ready for prime time, making 
the entire facility useless in practice.
</LI><LI CLASS="li-itemize">Integrate the Mythryl <TT>x-kit</TT> (neé <TT>eXene</TT>) libraries, making them the standard.
</LI><LI CLASS="li-itemize">Make the Mythryl codebase more thread-safe by moving the various global variables scattered through it into dynamically allocated records.
</LI><LI CLASS="li-itemize">Write a native Mythryl OpenGL widget kit taking <TT>x-kit</TT> as a model but using the &#X201C;Adaptive Functional Programming&#X201D; mechanism for event propagation.
</LI><LI CLASS="li-itemize">Re-activate the Mythryl codebase support for multiprocessing, which worked a decade ago on SGI and Sparc machines but has bitrotted since.
</LI><LI CLASS="li-itemize">Write Mythryl debugger. (I would start by reviewing David Tarditi&#X2019;s SML/NJ debugger paper(s), then fold in Xavier LeRoy&#X2019;s idea of using process forking to implement replay.)
</LI><LI CLASS="li-itemize">Write a real-time garbage collector for Mythryl based on Cheng&#X2019;s 2001 CMU thesis. Make it <SPAN STYLE="font-variant:small-caps">COW</SPAN>-friendly to maximize shared pages after a fork().
</LI><LI CLASS="li-itemize">Implement software transactional memory. The Harris/Marlow/Peyton Jones/Herlihy paper &#X201C;Composable memory transactions&#X201D; is a good starting point.
</LI></UL>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Native_Mythryl_libraries.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="index.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Oop_Support.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
