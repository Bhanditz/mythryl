<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>NULL Values and THE</TITLE>
</HEAD>
<BODY >
<A HREF="my-Preface-3.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Delving_Deeper.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Tuples_and_Records.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc67">5.3.2</A>  NULL Values and THE</H3><P>In C it is common for functions to return <SPAN STYLE="font-variant:small-caps">NULL</SPAN> when 
a valid pointer value is not possible. Failure to check 
for <SPAN STYLE="font-variant:small-caps">NULL</SPAN> pointers is a major source of program crashes.</P><P>Mythryl has a similar convention, except that the compiler 
implements compiletime checks sufficient to guarantee that 
you will never have a runtime crash due to lack of <SPAN STYLE="font-variant:small-caps">NULL</SPAN> 
pointer checking.</P><P>Function results are wrapped using <TT>THE</TT> if they are not <TT>NULL</TT>. 
The two possibilities are then distinguished using a <TT>case</TT>. When 
you are sure a value is non-<TT>NULL</TT>, you may use the function <TT>the</TT> 
to strip off the <TT>THE</TT>:</P><PRE CLASS="verbatim">    #!/usr/bin/mythryl

    fun safe_divide i j:  Null_Or( Int )
        =
        if (j != 0)   THE (i / j);
        else          NULL;
        fi; 

    fun test i j
        =
        case (safe_divide i j)
            THE k =&gt; printf "%d / %d == %d\n" i j k; 
            NULL  =&gt; printf "You can't divide %d by %d!\n" i j;
        esac; 

    test 4 2;
    test 4 0;

    printf "6 / 3 == %d\n" (the (safe_divide 6 3));
    printf "6 / 0 == %d\n" (the (safe_divide 6 0));
</PRE><P>When run this will yield:</P><PRE CLASS="verbatim">    linux$ ./my-script
    4 / 2 == 2
    You can't divide 4 by 0!
    6 / 3 == 2

    Uncaught exception NULL_OR
</PRE>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Preface-3.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Delving_Deeper.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Tuples_and_Records.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
