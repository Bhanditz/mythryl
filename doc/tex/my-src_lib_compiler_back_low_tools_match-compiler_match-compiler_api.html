<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>src/lib/compiler/back/low/tools/match-compiler/match-compiler.api</TITLE>
</HEAD>
<BODY >
<A HREF="my-src_lib_compiler_back_low_tools_line-number-db_symbol_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_compiler_back_low_tools_match-compiler_match-g_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc1257">15.3.181</A>  src/lib/compiler/back/low/tools/match-compiler/match-compiler.api</H3><P>
<A NAME="src/lib/compiler/back/low/tools/match-compiler/match-compiler.api"></A>
<CODE>#&nbsp;match-compiler.api</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;A&nbsp;simple&nbsp;pattern&nbsp;matching&nbsp;compiler.</CODE><BR>
<CODE>#&nbsp;This&nbsp;one&nbsp;uses&nbsp;Mikael&nbsp;Pettersson's&nbsp;algorithm.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;NOTE:&nbsp;This&nbsp;module&nbsp;is&nbsp;completely&nbsp;detached</CODE><BR>
<CODE>#&nbsp;from&nbsp;the&nbsp;rest&nbsp;of&nbsp;the&nbsp;infrastructure,&nbsp;so</CODE><BR>
<CODE>#&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;reused.</CODE><BR><BR>
<CODE>#&nbsp;Compiled&nbsp;by:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_compiler_back_low_tools_match-compiler_lib.html#src/lib/compiler/back/low/tools/match-compiler.lib"><TT>src/lib/compiler/back/low/tools/match-compiler.lib</TT></A><BR><BR><CODE>###&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"There&nbsp;are&nbsp;always&nbsp;alternatives."</CODE><BR>
<CODE>###</CODE><BR>
<CODE>###&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;Spock,&nbsp;"The&nbsp;Galileo&nbsp;Seven,"&nbsp;"Star&nbsp;Trek"</CODE><BR><BR><BR><BR>
<CODE>api&nbsp;&nbsp;Match_Compiler&nbsp;{</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;These&nbsp;are&nbsp;client&nbsp;defined&nbsp;types&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;guard:&nbsp;&nbsp;&nbsp;&nbsp;api&nbsp;{&nbsp;&nbsp;Guard;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_string:&nbsp;&nbsp;Guard&nbsp;-&gt;&nbsp;String;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;expression:&nbsp;api&nbsp;{&nbsp;&nbsp;Expression;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_string:&nbsp;&nbsp;Expression&nbsp;-&gt;&nbsp;String;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;action:&nbsp;&nbsp;&nbsp;api&nbsp;{&nbsp;&nbsp;Action;&nbsp;};</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;con:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;api&nbsp;{&nbsp;&nbsp;Con;&nbsp;&nbsp;compare:&nbsp;&nbsp;(Con,&nbsp;Con)&nbsp;-&gt;&nbsp;Order;&nbsp;};</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;literal:&nbsp;&nbsp;api&nbsp;{&nbsp;&nbsp;Literal;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compare:&nbsp;&nbsp;(Literal,&nbsp;Literal)&nbsp;-&gt;&nbsp;Order;&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;variable:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;api&nbsp;{&nbsp;&nbsp;Var;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;These&nbsp;are&nbsp;new&nbsp;types&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Index&nbsp;=&nbsp;INT&nbsp;&nbsp;&nbsp;Int&nbsp;</CODE><CODE>|&nbsp;LABEL&nbsp;&nbsp;variable::Var;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Path&nbsp;&nbsp;=&nbsp;PATH&nbsp;&nbsp;List(&nbsp;Index&nbsp;);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;path</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;api&nbsp;{&nbsp;&nbsp;compare:&nbsp;&nbsp;(Path,&nbsp;Path)&nbsp;-&gt;&nbsp;Order;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_string:&nbsp;&nbsp;Path&nbsp;-&gt;&nbsp;String;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_ident:&nbsp;&nbsp;Path&nbsp;-&gt;&nbsp;String;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dot:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Path,&nbsp;Index)&nbsp;-&gt;&nbsp;Path;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;map:&nbsp;&nbsp;Map&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Map&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_map_api.html#src/lib/src/map.api"><TT>src/lib/src/map.api</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;&nbsp;key::Key&nbsp;==&nbsp;Path;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;=&nbsp;VAR&nbsp;&nbsp;variable::Var&nbsp;</CODE><CODE>|&nbsp;PVAR&nbsp;&nbsp;Path;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;package&nbsp;subst</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Map&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Map&nbsp;&nbsp;&nbsp;is&nbsp;from&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_map_api.html#src/lib/src/map.api"><TT>src/lib/src/map.api</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key::Key&nbsp;==&nbsp;variable::Var;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Pattern;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Subst&nbsp;=&nbsp;subst::Map(&nbsp;Name&nbsp;);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Decon</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;CON&nbsp;&nbsp;&nbsp;&nbsp;con::Con&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Match&nbsp;a&nbsp;user&nbsp;constructor.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><CODE>|&nbsp;LIT&nbsp;&nbsp;&nbsp;&nbsp;literal::Literal;&nbsp;&nbsp;</CODE><CODE>#&nbsp;&nbsp;Match&nbsp;a&nbsp;user&nbsp;literal.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;exception&nbsp;MATCH_COMPILER&nbsp;&nbsp;String;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Compiled_Dfa;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Compiled&nbsp;pattern&nbsp;matching&nbsp;dfa&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Compiled_Rule;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Rule_Number&nbsp;=&nbsp;Int;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Compiled_Pat;</CODE><BR><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Compile&nbsp;a&nbsp;user&nbsp;pattern&nbsp;into&nbsp;internal&nbsp;pattern&nbsp;form;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;This&nbsp;function&nbsp;abstracts&nbsp;out&nbsp;the&nbsp;computation&nbsp;of&nbsp;paths&nbsp;and&nbsp;namings.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;rename</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;{&nbsp;id_pattern:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;variable::Var&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as_pattern:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(variable::Var,&nbsp;A_pattern)&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wild_pattern:&nbsp;&nbsp;&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cons_pattern:&nbsp;&nbsp;&nbsp;&nbsp;(con::Con,&nbsp;List(&nbsp;A_pattern&nbsp;))&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tuple_pattern:&nbsp;&nbsp;&nbsp;List(&nbsp;A_pattern&nbsp;)&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;record_pattern:&nbsp;&nbsp;List(&nbsp;(variable::Var,&nbsp;A_pattern)&nbsp;)&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lit_pattern:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;literal::Literal&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;logical&nbsp;connectives&nbsp;and&nbsp;other&nbsp;extensions&nbsp;to&nbsp;the&nbsp;standard</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or_pattern:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List(&nbsp;A_pattern&nbsp;)&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and_pattern:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List(&nbsp;A_pattern&nbsp;)&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not_pattern:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A_pattern&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where_pattern:&nbsp;&nbsp;&nbsp;(A_pattern,&nbsp;guard::Guard)&nbsp;-&gt;&nbsp;Compiled_Pat,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nested_pattern:&nbsp;&nbsp;(A_pattern,&nbsp;((Int,&nbsp;expression::Expression)),&nbsp;A_pattern)&nbsp;-&gt;&nbsp;Compiled_Pat</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;A_pattern</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Compiled_Pat</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;number:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rule_Number,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;rule&nbsp;number&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;patterns:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List(&nbsp;A_pattern&nbsp;),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;the&nbsp;pattern&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guard:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Null_Or(&nbsp;guard::Guard&nbsp;),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;optional&nbsp;guard&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;action::Action,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Action&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;match_fail_exception:&nbsp;Null_Or(&nbsp;variable::Var&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Currently&nbsp;ignored.&nbsp;See&nbsp;comments&nbsp;for&nbsp;MATCH_FAIL_EXCEPTION_IN_EXPRESSION&nbsp;in&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_compiler_back_low_tools_adl-syntax_adl-raw-syntax-form_api.html#src/lib/compiler/back/low/tools/adl-syntax/adl-raw-syntax-form.api"><TT>src/lib/compiler/back/low/tools/adl-syntax/adl-raw-syntax-form.api</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Compiled_Rule;</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;Compile&nbsp;a&nbsp;set&nbsp;of&nbsp;canonical&nbsp;rules&nbsp;into&nbsp;a&nbsp;dfa&nbsp;&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;compile</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;compiled_rules:&nbsp;List(&nbsp;Compiled_Rule&nbsp;),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compress:&nbsp;Bool</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Compiled_Dfa;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;exhaustive:&nbsp;&nbsp;Compiled_Dfa&nbsp;-&gt;&nbsp;Bool;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;redundant:&nbsp;&nbsp;&nbsp;Compiled_Dfa&nbsp;-&gt;&nbsp;int_list_set::Set;</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;For&nbsp;debugging&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;to_string:&nbsp;&nbsp;&nbsp;Compiled_Dfa&nbsp;-&gt;&nbsp;String;</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Generate&nbsp;code&nbsp;for&nbsp;a&nbsp;compiled&nbsp;dfa.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Assumes&nbsp;an&nbsp;ML-like&nbsp;language:</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;code_gen</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;gen_fail:&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;expression::Expression,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_ok:&nbsp;&nbsp;&nbsp;&nbsp;action::Action&nbsp;-&gt;&nbsp;expression::Expression,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_path:&nbsp;&nbsp;Path&nbsp;-&gt;&nbsp;expression::Expression,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_bind:&nbsp;&nbsp;List&nbsp;((variable::Var,&nbsp;expression::Expression))&nbsp;-&gt;&nbsp;List(&nbsp;A_decl&nbsp;),</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_case:&nbsp;&nbsp;(variable::Var,&nbsp;&nbsp;List&nbsp;((Decon,&nbsp;List(&nbsp;Null_Or(&nbsp;Path&nbsp;)&nbsp;),&nbsp;expression::Expression)),&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Null_Or(&nbsp;expression::Expression&nbsp;))&nbsp;-&gt;&nbsp;expression::Expression,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_if:&nbsp;&nbsp;&nbsp;&nbsp;(guard::Guard,&nbsp;expression::Expression,&nbsp;expression::Expression)&nbsp;-&gt;&nbsp;expression::Expression,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_goto:&nbsp;&nbsp;(Int,&nbsp;List(&nbsp;variable::Var&nbsp;))&nbsp;-&gt;&nbsp;expression::Expression,&nbsp;#&nbsp;&nbsp;Call&nbsp;a&nbsp;function&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_fun:&nbsp;&nbsp;&nbsp;(Int,&nbsp;List(&nbsp;variable::Var&nbsp;),&nbsp;expression::Expression)&nbsp;-&gt;&nbsp;A_decl,&nbsp;#&nbsp;&nbsp;function&nbsp;def&nbsp;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_cont:&nbsp;&nbsp;(variable::Var,&nbsp;Int,&nbsp;List(&nbsp;variable::Var&nbsp;))&nbsp;-&gt;&nbsp;A_decl,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_let:&nbsp;&nbsp;&nbsp;(List(&nbsp;A_decl&nbsp;),&nbsp;expression::Expression)&nbsp;-&gt;&nbsp;expression::Expression,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_variable:&nbsp;&nbsp;&nbsp;Path&nbsp;-&gt;&nbsp;variable::Var,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_val:&nbsp;&nbsp;&nbsp;(variable::Var,&nbsp;expression::Expression)&nbsp;-&gt;&nbsp;A_decl,</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gen_proj:&nbsp;&nbsp;(Path,&nbsp;&nbsp;List(&nbsp;(Null_Or(&nbsp;Path&nbsp;),&nbsp;Index)))&nbsp;-&gt;&nbsp;A_decl</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((expression::Expression,&nbsp;Compiled_Dfa))</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expression::Expression;</CODE><BR>
<CODE>};</CODE><BR>
</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-src_lib_compiler_back_low_tools_line-number-db_symbol_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_compiler_back_low_tools_match-compiler_match-g_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
