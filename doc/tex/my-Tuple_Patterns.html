<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Tuple Patterns</TITLE>
</HEAD>
<BODY >
<A HREF="my-Case_Expression.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Case_Expressions_and_Pattern-Matching.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Sub-Pattern_Matching.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc258">10.8.2</A>  Tuple Patterns</H3><P>
<A NAME="section:ref:case-expressions-and-pattern-matching:tuple-patterns"></A></P><P>Tuple patterns are very simple. They are written using syntax 
essentially identical to those of tuple expressions: A 
comma-separated list of pattern elements wrapped in parentheses: </P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    case (1,2)
        (1,1) =&gt; print "(1,1).\n";
        (1,2) =&gt; print "(1,2).\n";
        (2,1) =&gt; print "(2,1).\n";
        (2,2) =&gt; print "(2,2).\n";
        _     =&gt; print "Dunno.\n";
    esac;

    linux$ ./my-script
    (1,2).
</PRE><P>What makes pattern-matching really useful is that 
we may use variables in patterns to extract values 
from the input expression:</P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    case (1,2)
        (i,j) =&gt; printf "(%d,%d).\n" i j;
    esac;

    linux$ ./my-script
    (1,2).
</PRE><P>Another useful property is that patterns may be 
arbitrarily nested:</P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    case (((1,2),(3,4,5)),(6,7))
        (((a,b),(c,d,e)),(f,g)) =&gt; printf "(((%d,%d),(%d,%d,%d)),(%d,%d))\n" a b c d e f g;
    esac;

    linux$ ./my-script
    (((1,2),(3,4,5)),(6,7))
</PRE><P>Note how much more compact and readable the above code is than the 
equivalent code explicitly extracting the required 
values using the underlying <TT>#1 #2 #3 ...</TT> operators:</P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    x = (((1,2),(3,4,5)),(6,7));

    printf "(((%d,%d),(%d,%d,%d)),(%d,%d))\n"
        (#1 (#1 (#1 x)))
        (#2 (#1 (#1 x)))
        (#1 (#2 (#1 x)))
        (#2 (#2 (#1 x)))
        (#3 (#2 (#1 x)))
            (#1 (#2 x))
            (#2 (#2 x));

    linux$ ./my-script
    (((1,2),(3,4,5)),(6,7))
</PRE><P>Using a case expression to matching a tuple of Boolean values is often shorter and 
clearer than writing out the equivalent set of nested <TT>if</TT> statements:</P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    bool1 = TRUE;
    bool2 = FALSE;

    case (bool1, bool2)
       (TRUE,  TRUE ) =&gt; print "Exclusive-OR is FALSE.\n";
       (TRUE,  FALSE) =&gt; print "Exclusive-OR is TRUE.\n";
       (FALSE, TRUE ) =&gt; print "Exclusive-OR is TRUE.\n";
       (FALSE, FALSE) =&gt; print "Exclusive-OR is FALSE.\n";
    esac;

    linux$ ./my-script
    Exclusive-OR is TRUE.
</PRE><P>Compare with the nested-if alternative:</P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    bool1 = TRUE;
    bool2 = FALSE;

    if bool1
        if bool2
            print "Exclusive-OR is FALSE.\n";
        else
            print "Exclusive-OR is TRUE.\n";
        fi;
    else
        if bool2
            print "Exclusive-OR is TRUE.\n";
        else
            print "Exclusive-OR is FALSE.\n";
        fi;
    fi;

    linux$ ./my-script
    Exclusive-OR is TRUE.
</PRE><P>The latter code is both longer and harder to understand and maintain 
than the former code.</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Case_Expression.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Case_Expressions_and_Pattern-Matching.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Sub-Pattern_Matching.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
