<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Overview</TITLE>
</HEAD>
<BODY >
<A HREF="my-Schematic.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Compiler_Internals.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Front_End.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc3589">16.1.2</A>  Overview</H3><P>
<A NAME="section:compiler:overview"></A></P><P>This compiler is a derivative of <SPAN STYLE="font-variant:small-caps">SML/NJ</SPAN>, a research 
compiler built collaboratively by Bell Labs, CMU, Yale, 
Cornell and Princeton, among others. (A good overview 
of its internals is contained in [13].)</P><P>The compiler proper is the part of Mythryl responsible 
for converting a single source file into native 
object code.</P><P>(See src/app/makelib for the higher-level task of compiling 
all the components of an application in the correct 
order and producing an executable binary for the application 
as a whole.)</P><P>The compiler is conceptually organized into two parts:</P><UL CLASS="itemize"><LI CLASS="li-itemize">
front end: Handles lexing, parsing and typechecking.
</LI><LI CLASS="li-itemize">back end: Handles optimization and code generation.
</LI></UL><P>The back end in turn is subdivided into two parts:
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
upper half: Handles high-level (machine-independent) issues.
</LI><LI CLASS="li-itemize">lower half: Handles low-level (machine-dependent) issues.
</LI></UL><P>The basic compiler code layout is:</P><UL CLASS="itemize"><LI CLASS="li-itemize">
Compiler stuff generally is in <TT>src/lib/compiler/</TT>.
</LI><LI CLASS="li-itemize">Compiler frontend stuff is in <TT>src/lib/compiler/front/</TT>.
</LI><LI CLASS="li-itemize">Compiler backend tophalf stuff is in <TT>src/lib/compiler/back/top/</TT>.
</LI><LI CLASS="li-itemize">Compiler backend lowhalf stuff is in <TT>src/lib/compiler/back/low/</TT>.
</LI></UL><P>The actual top-level compilation code is in makelib, 
<A HREF="my-src_app_makelib_main_makelib-g_pkg.html#src/app/makelib/main/makelib-g.pkg">src/app/makelib/main/makelib-g.pkg</A> </P><P>This is where commandline switches to the compiler are processed. This file is however mostly concerned with 
"make" level functionality (traversing the source-file 
dependency graph and compiling individual files in 
topologically correct ordering) rather than compilation 
per se.</P><P>From a control flow point of view, the top of the core 
interactive compile function-call hiearchy is the <TT>c::compile</TT> 
call in</P><BLOCKQUOTE CLASS="quote">
<A HREF="my-src_lib_compiler_toplevel_interact_read-eval-print-loop-g_pkg.html#src/lib/compiler/toplevel/interact/read-eval-print-loop-g.pkg">src/lib/compiler/toplevel/interact/read-eval-print-loop-g.pkg</A>.</BLOCKQUOTE><P>together with nearby code, while the core makefile-driven 
compilation code is in</P><BLOCKQUOTE CLASS="quote">
<A HREF="my-src_app_makelib_main_makelib-g_pkg.html#src/app/makelib/main/makelib-g.pkg">src/app/makelib/main/makelib-g.pkg</A>.</BLOCKQUOTE><P>which delegates most of the work to</P><BLOCKQUOTE CLASS="quote">
<A HREF="my-src_app_makelib_compile_link-in-dependency-order-g_pkg.html#src/app/makelib/compile/link-in-dependency-order-g.pkg">src/app/makelib/compile/link-in-dependency-order-g.pkg</A>.</BLOCKQUOTE><P>and (especially) the <TT>compile_in_this_process</TT> function in</P><BLOCKQUOTE CLASS="quote">
<A HREF="my-src_app_makelib_compile_compile-in-dependency-order-g_pkg.html#src/app/makelib/compile/compile-in-dependency-order-g.pkg">src/app/makelib/compile/compile-in-dependency-order-g.pkg</A>.</BLOCKQUOTE><P>Either way, the actual heart of the compile-one-file logic 
is in</P><BLOCKQUOTE CLASS="quote">
<A HREF="my-src_lib_compiler_toplevel_main_translate-raw-syntax-to-execode-g_pkg.html#src/lib/compiler/toplevel/main/translate-raw-syntax-to-execode-g.pkg">src/lib/compiler/toplevel/main/translate-raw-syntax-to-execode-g.pkg</A>.</BLOCKQUOTE>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Schematic.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Compiler_Internals.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Front_End.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
