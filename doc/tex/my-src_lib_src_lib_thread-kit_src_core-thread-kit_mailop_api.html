<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>src/lib/src/lib/thread-kit/src/core-thread-kit/mailop.api</TITLE>
</HEAD>
<BODY >
<A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_maildrop_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_mailqueue_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc1460">15.3.384</A>  src/lib/src/lib/thread-kit/src/core-thread-kit/mailop.api</H3><P>
<A NAME="src/lib/src/lib/thread-kit/src/core-thread-kit/mailop.api"></A>
<CODE>##&nbsp;mailop.api</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Here&nbsp;we&nbsp;define&nbsp;the&nbsp;core&nbsp;mailop&nbsp;api,</CODE><BR>
<CODE>#&nbsp;in&nbsp;particular&nbsp;the&nbsp;'do_one_mailop'&nbsp;and&nbsp;'==&gt;'&nbsp;fns&nbsp;which&nbsp;are&nbsp;the</CODE><BR>
<CODE>#&nbsp;primary&nbsp;client-code&nbsp;interface&nbsp;to&nbsp;the&nbsp;mailop&nbsp;system&nbsp;via</CODE><BR>
<CODE>#&nbsp;handle-mail-from-multiple-sources&nbsp;calls&nbsp;looking&nbsp;like</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_one_mailop&nbsp;[</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foo'&nbsp;==&gt;&nbsp;{.&nbsp;do_this();&nbsp;},</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bar'&nbsp;==&gt;&nbsp;{.&nbsp;do_that();&nbsp;}</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;];&nbsp;</CODE><BR><BR>
<CODE>#&nbsp;Compiled&nbsp;by:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_std_standard_lib.html#src/lib/std/standard.lib"><TT>src/lib/std/standard.lib</TT></A><BR><BR><BR><BR><CODE>###&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Programming&nbsp;languages&nbsp;are&nbsp;like&nbsp;fairies;</CODE><BR>
<CODE>###&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;they&nbsp;are&nbsp;as&nbsp;real&nbsp;as&nbsp;you&nbsp;believe&nbsp;them&nbsp;to&nbsp;be."</CODE><BR><BR><BR><BR>
<CODE>api&nbsp;Mailop&nbsp;{</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Mailop(X);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Run_Gun&nbsp;=&nbsp;&nbsp;Mailop(Void);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Purely&nbsp;for&nbsp;readability.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;End_Gun&nbsp;=&nbsp;&nbsp;Mailop(Void);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Purely&nbsp;for&nbsp;readability.</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;###################################</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;These&nbsp;are&nbsp;the&nbsp;big&nbsp;two&nbsp;from&nbsp;the&nbsp;client-code&nbsp;perspective:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;do_one_mailop:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List(&nbsp;Mailop(X)&nbsp;)&nbsp;-&gt;&nbsp;X;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Given&nbsp;a&nbsp;list&nbsp;of&nbsp;mailops&nbsp;(e.g.,&nbsp;[&nbsp;foo'&nbsp;==&gt;&nbsp;do_this,&nbsp;bar'&nbsp;==&gt;&nbsp;do_that&nbsp;]),&nbsp;pick&nbsp;at&nbsp;most&nbsp;one&nbsp;that&nbsp;is&nbsp;ready&nbsp;to&nbsp;run&nbsp;and&nbsp;run&nbsp;it.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;If&nbsp;no&nbsp;mailop&nbsp;if&nbsp;ready&nbsp;to&nbsp;fire,&nbsp;block&nbsp;until&nbsp;one&nbsp;is&nbsp;ready&nbsp;to&nbsp;fire&nbsp;and&nbsp;then&nbsp;fire&nbsp;it.&nbsp;(Timeout&nbsp;mailops&nbsp;provide&nbsp;a&nbsp;way&nbsp;to&nbsp;avoid&nbsp;blocking&nbsp;indefinitely.)</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Whenever&nbsp;multiple&nbsp;mailops&nbsp;are&nbsp;ready&nbsp;to&nbsp;fire,&nbsp;an&nbsp;attempt&nbsp;is&nbsp;made&nbsp;to&nbsp;pick&nbsp;fairly&nbsp;between&nbsp;them&nbsp;--&nbsp;everyone&nbsp;gets&nbsp;their&nbsp;turn&nbsp;eventually.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;(==&gt;):&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Mailop(X),&nbsp;X&nbsp;-&gt;&nbsp;Y)&nbsp;-&gt;&nbsp;Mailop(Y);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Given&nbsp;'mailop'&nbsp;and&nbsp;'added_action',&nbsp;construct&nbsp;a&nbsp;new&nbsp;(compound)&nbsp;mailop&nbsp;which&nbsp;does</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;exactly&nbsp;what&nbsp;'mailop'&nbsp;does,&nbsp;except&nbsp;that&nbsp;afterwards&nbsp;it&nbsp;also&nbsp;does&nbsp;'added_function'.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;This&nbsp;is&nbsp;typically&nbsp;used&nbsp;in&nbsp;a&nbsp;'do_one_mailop'&nbsp;arglist,&nbsp;and&nbsp;in&nbsp;that&nbsp;context&nbsp;we&nbsp;think</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;of&nbsp;it&nbsp;and&nbsp;use&nbsp;it&nbsp;as&nbsp;an&nbsp;if-then&nbsp;rule&nbsp;--&nbsp;hence&nbsp;the&nbsp;infix&nbsp;"==&gt;"&nbsp;name.</CODE><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;###################################</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;These&nbsp;are&nbsp;support&nbsp;for&nbsp;imp-to-imp&nbsp;communications&nbsp;where&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;"imp"&nbsp;==&nbsp;"server&nbsp;microthread".&nbsp;&nbsp;Think&nbsp;"tiny&nbsp;daemon".</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;you&nbsp;want&nbsp;zero&nbsp;risk&nbsp;of&nbsp;deadlock.&nbsp;&nbsp;If&nbsp;you&nbsp;like&nbsp;debugging</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;erratic&nbsp;deadlocks&nbsp;you&nbsp;can&nbsp;safely&nbsp;skip&nbsp;this&nbsp;stuff:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;Replyqueue;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;make_replyqueue:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Void&nbsp;-&gt;&nbsp;Replyqueue;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;put_in_replyqueue:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Replyqueue,&nbsp;Mailop(Void))&nbsp;-&gt;&nbsp;Void;</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;do_one_mailop':&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Replyqueue&nbsp;-&gt;&nbsp;List(&nbsp;Mailop(Void)&nbsp;)&nbsp;-&gt;&nbsp;Void;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Just&nbsp;like&nbsp;do_one_mailop,&nbsp;except&nbsp;also&nbsp;processes&nbsp;the&nbsp;request&nbsp;queue&nbsp;of&nbsp;pending&nbsp;replies&nbsp;from&nbsp;other&nbsp;imps.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;replyqueue_to_string:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Replyqueue,&nbsp;String)&nbsp;-&gt;&nbsp;String;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Debug&nbsp;support.&nbsp;Input&nbsp;string&nbsp;is&nbsp;a&nbsp;name&nbsp;for&nbsp;the&nbsp;replyqueue.</CODE><BR><BR><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;###################################</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;The&nbsp;remaining&nbsp;fns&nbsp;here&nbsp;are&nbsp;used</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;much&nbsp;less&nbsp;often&nbsp;in&nbsp;client&nbsp;code:</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;dynamic_mailop:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Void&nbsp;&nbsp;&nbsp;-&gt;&nbsp;Mailop(X)&nbsp;)&nbsp;-&gt;&nbsp;Mailop(X);&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Make&nbsp;do_one_mailop&nbsp;[...]&nbsp;mailop&nbsp;while&nbsp;do_one_mailop&nbsp;is&nbsp;running.&nbsp;&nbsp;Used&nbsp;in&nbsp;(for&nbsp;example):&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_std_src_socket_socket_pkg.html#src/lib/std/src/socket/socket.pkg"><TT>src/lib/std/src/socket/socket.pkg</TT></A><BR><CODE>&nbsp;&nbsp;&nbsp;&nbsp;dynamic_mailop_with_nack:&nbsp;&nbsp;&nbsp;(Mailop(&nbsp;Void&nbsp;)&nbsp;-&gt;&nbsp;Mailop(X)&nbsp;)&nbsp;-&gt;&nbsp;Mailop(X);&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;As&nbsp;above,&nbsp;but&nbsp;the&nbsp;make-mailop&nbsp;fn&nbsp;is&nbsp;also&nbsp;given&nbsp;a&nbsp;mailop&nbsp;used&nbsp;to&nbsp;signal&nbsp;client&nbsp;abortion&nbsp;of&nbsp;the&nbsp;mailop.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;never':&nbsp;&nbsp;&nbsp;Mailop(X);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;This&nbsp;mailop&nbsp;is&nbsp;never&nbsp;ready&nbsp;to&nbsp;fire.&nbsp;&nbsp;Used&nbsp;e.g.,&nbsp;in&nbsp;dynamic_mailop.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;always':&nbsp;&nbsp;X&nbsp;-&gt;&nbsp;Mailop(X);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;This&nbsp;mailop&nbsp;is&nbsp;always&nbsp;ready&nbsp;to&nbsp;fire&nbsp;and&nbsp;simply&nbsp;returns&nbsp;its&nbsp;argument&nbsp;as&nbsp;the&nbsp;mailop&nbsp;value.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;if_then':&nbsp;&nbsp;&nbsp;&nbsp;(Mailop(X),&nbsp;X&nbsp;-&gt;&nbsp;Y)&nbsp;-&gt;&nbsp;Mailop(Y);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;A&nbsp;non-infix&nbsp;synonym&nbsp;for&nbsp;'==&gt;'.&nbsp;&nbsp;Given&nbsp;Mailop(X)&nbsp;and&nbsp;f:&nbsp;X&nbsp;-&gt;&nbsp;Y,&nbsp;result&nbsp;returns&nbsp;f(Mailop(X))&nbsp;whenever&nbsp;Mailop(X)&nbsp;fires.</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;make_exception_handling_mailop</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Mailop(X),&nbsp;Exception&nbsp;-&gt;&nbsp;X)&nbsp;-&gt;&nbsp;Mailop(X);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;cat_mailops:&nbsp;&nbsp;List(&nbsp;Mailop(X)&nbsp;)&nbsp;-&gt;&nbsp;Mailop(X);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Combine&nbsp;a&nbsp;list&nbsp;of&nbsp;mailops&nbsp;into&nbsp;a&nbsp;single&nbsp;mailop.&nbsp;&nbsp;A&nbsp;frequent&nbsp;idiom&nbsp;is:&nbsp;&nbsp;block_until_mailop_fires&nbsp;(cat_mailops&nbsp;mailops);</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;block_until_mailop_fires:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mailop(X)&nbsp;-&gt;&nbsp;X;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Run&nbsp;an&nbsp;individual&nbsp;mailop&nbsp;without&nbsp;bothering&nbsp;with&nbsp;a&nbsp;full&nbsp;do_one_mailop&nbsp;[...]&nbsp;statement.</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;Typically&nbsp;used&nbsp;to&nbsp;block&nbsp;until&nbsp;the&nbsp;mailop&nbsp;fires,&nbsp;hence&nbsp;the&nbsp;name.</CODE><BR>
<CODE>};</CODE><BR><BR><BR><BR>
<CODE>##&nbsp;COPYRIGHT&nbsp;(c)&nbsp;1989-1991&nbsp;John&nbsp;H.&nbsp;Reppy</CODE><BR>
<CODE>##&nbsp;COPYRIGHT&nbsp;(c)&nbsp;1995&nbsp;AT&amp;T&nbsp;Bell&nbsp;Laboratories.</CODE><BR>
<CODE>##&nbsp;Subsequent&nbsp;changes&nbsp;by&nbsp;Jeff&nbsp;Prothero&nbsp;Copyright&nbsp;(c)&nbsp;2010-2015,</CODE><BR>
<CODE>##&nbsp;released&nbsp;per&nbsp;terms&nbsp;of&nbsp;SMLNJ-COPYRIGHT.</CODE><BR>
</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_maildrop_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_src_lib_thread-kit_src_core-thread-kit_mailqueue_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
