<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Tuples and Records</TITLE>
</HEAD>
<BODY >
<A HREF="my-NULL_Values_and_THE.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Delving_Deeper.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Vectors.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc68">5.3.3</A>  Tuples and Records</H3><P>"Tuple" is a mathematical word for a sequence of values. It is a 
generalization of such English words as:</P><PRE CLASS="verbatim">   "duple"     (two of something),
   "triple"    (three ...       ),
   "quadruple" (four  ...       )
   "quintuple" (five  ...       )
   "sextuple"  (six   ...       )
   "septuple"  (seven ...       )
   "octuple"   (eight ...       )
</PRE><P>We use "tuple" to refer to all of these plus all other lengths.</P><P>Mythryl tuples are written with the values wrapped in parentheses 
and separated by commas:</P><PRE CLASS="verbatim">    ("this", 123)             # A length-two tuple.
    (0, 1, "infinity")        # A length-three tuple.
    ("string", 'a', 1, 1.0)   # A length-four tuple.
</PRE><P>Tuples are near and dear to Mythryl&#X2019;s heart. They are the cheapest, 
simplest compound datastructure, the material from which almost all 
else is fashioned.</P><P>In more formal language, a Mythryl tuple is a heterogeneous collection 
of values stored contiguously in a small chunk of memory and accessed 
by slot number. Mythryl attempts to make creation of tuples as cheap 
as possible. The Mythryl implementation can create tuples roughly as 
cheaply as C can push a stackframe.</P><PRE CLASS="verbatim">    linux$ my

    eval:  a = ("Windward Passage", 13.5, 9318.0);

    eval:  #1 a;
    "Windward Passage"

    eval:  #2 a;
    13.5

    eval:  #3 a;
    9318
</PRE><P>A Mythryl record is similarly a heterogeneous collection of values stored 
contiguous in a small chunk of memory. The difference is that record values 
are accessed by name instead of by slot number:</P><PRE CLASS="verbatim">    linux$ my

    eval:  a = { name =&gt; "Windward Passage", length_overall =&gt; 13.5, displacement =&gt; 9318.0 }; 

    eval:  a.name;
    "Windward Passage"

    eval:  a.length_overall;
    13.5

    eval:  a.displacement;
    9318.0

    eval:  .name a;
    "Windward Passage"

    eval:  .length_overall a;
    13.5

    eval:  .displacement a;
    9318.0
</PRE><P>As the above example shows, record fields can be accessed by name via 
the <TT>record.field</TT> syntax familiar from C. This is usually the 
most readable syntax.</P><P>The final three expressions in the above example show that record 
fields can also be accessed by applying the fieldname as a function.</P><P>This may be useful, for example, in conjunction with <TT>map</TT>, 
extracting a given field from a list of records:</P><PRE CLASS="verbatim">    eval:  a = { name =&gt; "Windward Passage", length_overall =&gt; 13.5,  displacement =&gt;   9318.0 };
    eval:  b = { name =&gt; "Gay Deceiver",     length_overall =&gt; 130.5, displacement =&gt; 491634.8 };

    eval:  c = [ a, b ];

    eval:  map .name c;
    ["Windward Passage", "Gay Deceiver"]

    eval:  map .length_overall c;
    [13.5, 130.5]

    eval:  map .displacement c;
    [9318.0, 491634.8]
</PRE><P>Value order is significant in a tuple: <TT>(1,2,3)</TT> is not the 
same tuple as <TT>(3,2,1)</TT>.</P><P>Field order within a record, by contrast, is of no signficance: 
<TT>{ first=&gt;"John", last=&gt;"Doe" }</TT> is exactly equivalent to 
<TT>{ last=&gt;"Doe", first=&gt;"John" }</TT>.</P><P>Semantically, Mythryl records and tuples are very closely related. In 
fact, internally, the Mythryl compiler converts record expressions 
into tuple expressions very early in processing and makes no 
distinction between them thereafter.</P><P>Whether to use tuples or records in a given situation is thus often more 
a matter of taste than anything else.</P><P>Records and tuples are the cheapest, simplest Mythryl datastructures. 
They are the bricks and mortar from which higher level datastructures 
are built.</P><P>Mythryl programs create and discard 
enormous numbers of tuples and records as they run. Mythryl makes creating 
them as cheap as pushing a stackframe in C; it is expected and encouraged 
that the Mythryl programmer think as little of creating a new tuple or 
record as does the C programmer of doing a function call.</P><P>As the above examples hint, tuples and records are particularly 
powerful in combination with lists. Lists excel at handling 
variable-length homogeneous collections; records and tuples excel at 
handling fixed-length heterogeneous collections.</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-NULL_Values_and_THE.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Delving_Deeper.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Vectors.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
