<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>Implicit Case Expressions in Functions</TITLE>
</HEAD>
<BODY >
<A HREF="my-Overview-4.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Functions.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Anonymous_Functions.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc266">10.9.2</A>  Implicit Case Expressions in Functions</H3><P>
<A NAME="section:ref:functions:implicit-case-expressions-in-functions"></A></P><P>Mythryl function syntax supports implicit case expressions, allowing 
a function to be expressed as a sequence of <I>pattern</I> =&gt; <I>expression</I> 
pairs without need to write an explicit <TT>case</TT>.</P><P>Thus, the script</P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    fun from_roman string
        =
        case string
             "I"    =&gt; 1;
             "II"   =&gt; 2;
             "III"  =&gt; 3;
             "IV"   =&gt; 4;
             "V"    =&gt; 5;
             "VI"   =&gt; 6;
             "VII"  =&gt; 7;
             "VIII" =&gt; 8;
             "IX"   =&gt; 9;
             _      =&gt; raise exception DIE "Unsupported Roman number";
        esac;

    printf "from_roman III = %d\n" (from_roman "III");

    linux$ ./my-script
    from_roman III = 3
</PRE><P>may be written more compactly as</P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    fun from_roman "I"    =&gt; 1;
        from_roman "II"   =&gt; 2;
        from_roman "III"  =&gt; 3;
        from_roman "IV"   =&gt; 4;
        from_roman "V"    =&gt; 5;
        from_roman "VI"   =&gt; 6;
        from_roman "VII"  =&gt; 7;
        from_roman "VIII" =&gt; 8;
        from_roman "IX"   =&gt; 9;
        from_roman _      =&gt; raise exception DIE "Unsupported Roman number";
    end;

    printf "from_roman III = %d\n" (from_roman "III");

    linux$ ./my-script
    from_roman III = 3
</PRE><P>This facility is particularly useful when writing short 
recursive functions with separate terminal and recursion 
cases:</P><PRE CLASS="verbatim">    linux$ cat my-script
    #!/usr/bin/mythryl

    r = [ 1, 2, 3 ];

    fun sum_list ([],       sum) =&gt; sum;
        sum_list (i ! rest, sum) =&gt; sum_list (rest, sum + i);
    end;

    printf "%d-element list summing to %d.\n" (list::length r) (sum_list (r, 0));

    linux$ ./my-script
    3-element list summing to 6.
</PRE>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-Overview-4.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Functions.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-Anonymous_Functions.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
