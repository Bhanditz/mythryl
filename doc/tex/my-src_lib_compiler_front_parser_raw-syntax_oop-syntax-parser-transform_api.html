<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK REL=STYLESHEET type="text/css" HREF="local.css">
<LINK rel="stylesheet" type="text/css" href="book.css">
<TITLE>src/lib/compiler/front/parser/raw-syntax/oop-syntax-parser-transform.api</TITLE>
</HEAD>
<BODY >
<A HREF="my-src_lib_compiler_front_parser_raw-syntax_map-raw-syntax_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_compiler_front_parser_raw-syntax_printf-format-string-to-raw-syntax_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A><HR>
<H3 CLASS="subsection"><A NAME="htoc1314">15.3.238</A>  src/lib/compiler/front/parser/raw-syntax/oop-syntax-parser-transform.api</H3><P>
<A NAME="src/lib/compiler/front/parser/raw-syntax/oop-syntax-parser-transform.api"></A>
<CODE>##&nbsp;oop-syntax-parser-transform.api</CODE><BR><BR>
<CODE>#&nbsp;Compiled&nbsp;by:</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_compiler_front_parser_parser_sublib.html#src/lib/compiler/front/parser/parser.sublib"><TT>src/lib/compiler/front/parser/parser.sublib</TT></A><BR><BR><CODE>#&nbsp;Mythryl&nbsp;treats&nbsp;OOP&nbsp;(object-oriented&nbsp;programming)&nbsp;constructs</CODE><BR>
<CODE>#&nbsp;as&nbsp;"derived&nbsp;forms",&nbsp;expanding&nbsp;them&nbsp;into&nbsp;vanilla&nbsp;non-OOP</CODE><BR>
<CODE>#&nbsp;syntax&nbsp;at&nbsp;the&nbsp;raw&nbsp;syntax&nbsp;stage&nbsp;of&nbsp;code&nbsp;compilation.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;Logically,&nbsp;the&nbsp;Mythryl&nbsp;compiler&nbsp;has&nbsp;four&nbsp;phases&nbsp;dealing&nbsp;with</CODE><BR>
<CODE>#&nbsp;raw&nbsp;syntax:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;1)&nbsp;Parse&nbsp;phase,&nbsp;during&nbsp;which&nbsp;all&nbsp;source&nbsp;files&nbsp;in&nbsp;a&nbsp;library</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;read&nbsp;from&nbsp;disk&nbsp;source&nbsp;files&nbsp;and&nbsp;converted&nbsp;into</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw&nbsp;syntax&nbsp;parsetrees.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;2)&nbsp;Dependency&nbsp;extraction&nbsp;phase,&nbsp;during&nbsp;which&nbsp;the&nbsp;parsetrees</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;analysed&nbsp;to&nbsp;extract&nbsp;inter-file&nbsp;dependencies,&nbsp;such&nbsp;as</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a&nbsp;function&nbsp;in&nbsp;one&nbsp;file&nbsp;calling&nbsp;a&nbsp;function&nbsp;in&nbsp;another.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;3)&nbsp;Sort&nbsp;phase,&nbsp;during&nbsp;which&nbsp;the&nbsp;source&nbsp;files&nbsp;in&nbsp;the&nbsp;library</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;are&nbsp;topologically&nbsp;sorted&nbsp;according&nbsp;to&nbsp;dependencies,&nbsp;so</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;we&nbsp;can&nbsp;compile&nbsp;each&nbsp;file&nbsp;only&nbsp;after&nbsp;all&nbsp;files&nbsp;it</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depends&nbsp;upon&nbsp;have&nbsp;been&nbsp;compiled,&nbsp;thus&nbsp;making&nbsp;full&nbsp;type</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;information&nbsp;from&nbsp;them&nbsp;available.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;4)&nbsp;Compile&nbsp;phase,&nbsp;during&nbsp;which&nbsp;raw&nbsp;syntax&nbsp;parsetrees&nbsp;from</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;phase&nbsp;(1)&nbsp;are&nbsp;compiled&nbsp;in&nbsp;topological&nbsp;sort&nbsp;order&nbsp;to&nbsp;produce</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual&nbsp;native&nbsp;code.</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;The&nbsp;majority&nbsp;of&nbsp;our&nbsp;OOP&nbsp;syntax&nbsp;expansion&nbsp;is&nbsp;done&nbsp;in&nbsp;phase&nbsp;(4)</CODE><BR>
<CODE>#&nbsp;during&nbsp;typechecking,&nbsp;because&nbsp;it&nbsp;requires&nbsp;access&nbsp;to&nbsp;type&nbsp;information</CODE><BR>
<CODE>#&nbsp;from&nbsp;superclasses.&nbsp;&nbsp;The&nbsp;code&nbsp;for&nbsp;this&nbsp;may&nbsp;be&nbsp;found&nbsp;in</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_compiler_front_typer_main_expand-oop-syntax_pkg.html#src/lib/compiler/front/typer/main/expand-oop-syntax.pkg"><TT>src/lib/compiler/front/typer/main/expand-oop-syntax.pkg</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;However,&nbsp;the&nbsp;above&nbsp;code&nbsp;synthesis&nbsp;generates&nbsp;references&nbsp;to&nbsp;two</CODE><BR>
<CODE>#&nbsp;OOP&nbsp;support&nbsp;libraries:</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_oop_pkg.html#src/lib/src/oop.pkg"><TT>src/lib/src/oop.pkg</TT></A><BR><CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</CODE><A HREF="my-src_lib_src_object_pkg.html#src/lib/src/object.pkg"><TT>src/lib/src/object.pkg</TT></A><BR><CODE>#</CODE><BR>
<CODE>#&nbsp;It&nbsp;is&nbsp;essential&nbsp;that&nbsp;these&nbsp;dependencies&nbsp;be&nbsp;made&nbsp;known&nbsp;to&nbsp;phases&nbsp;(2)</CODE><BR>
<CODE>#&nbsp;and&nbsp;(3)&nbsp;above,&nbsp;so&nbsp;that&nbsp;these&nbsp;libraries&nbsp;will&nbsp;be&nbsp;compiled&nbsp;and&nbsp;available</CODE><BR>
<CODE>#&nbsp;during&nbsp;code&nbsp;synthesis&nbsp;in&nbsp;phase&nbsp;(4).</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;That&nbsp;is&nbsp;our&nbsp;job&nbsp;here:&nbsp;&nbsp;We&nbsp;get&nbsp;called&nbsp;from&nbsp;the&nbsp;'named_classes'&nbsp;rule&nbsp;in</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;src/lib/compiler/front/parser/yacc/mythryl.grammar</CODE><BR>
<CODE>#</CODE><BR>
<CODE>#&nbsp;and&nbsp;we&nbsp;add&nbsp;statements&nbsp;like&nbsp;"package&nbsp;dummy__oop__ref&nbsp;=&nbsp;oop;"</CODE><BR>
<CODE>#&nbsp;to&nbsp;the&nbsp;raw&nbsp;syntax&nbsp;for&nbsp;the&nbsp;class&nbsp;to&nbsp;establish&nbsp;the&nbsp;required</CODE><BR>
<CODE>#&nbsp;dependencies.</CODE><BR><BR>
<CODE>api&nbsp;Oop_Syntax_Parser_Transform&nbsp;{</CODE><BR><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;prepend_dummy_package_references_to_declaration</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</CODE><BR>
<CODE>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;raw_syntax::Declaration&nbsp;-&gt;&nbsp;raw_syntax::Declaration;</CODE><BR><BR><BR>
<CODE>};</CODE><BR>
</P>

<HR SIZE=2>
<DIV CLASS="center">
<FONT SIZE=1>Comments and suggestions to: </FONT><A HREF="mailto:bugs@mythryl.org"><FONT SIZE=1>bugs@mythryl.org</FONT></A></DIV>
<HR>
<A HREF="my-src_lib_compiler_front_parser_raw-syntax_map-raw-syntax_api.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A><A HREF="my-Codebase__api_Files.html"><IMG SRC="contents_motif.gif" ALT="Up"></A><A HREF="my-src_lib_compiler_front_parser_raw-syntax_printf-format-string-to-raw-syntax_api.html"><IMG SRC="next_motif.gif" ALT="Next"></A></BODY>
</HTML>
